<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>strategia_techniczna.md</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }
        pre {
            background-color: #f5f5f5;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
        }
        code {
            background-color: #f5f5f5;
            padding: 2px 4px;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <h1>1. Wprowadzenie</h1>
<h2>1.1. Cel dokumentu</h2>
<p>Celem dokumentu "Strategia testów automatycznych" jest dostarczenie kompleksowych wytycznych dotyczących planowania,
implementacji, wykonania i analizy testów automatycznych w organizacji, ze szczególnym uwzględnieniem testów frontendu
przy użyciu Selenium/Selenide oraz testów API z wykorzystaniem Rest Assured. Dokument ten służy jako:</p>
<ul>
<li>Formalne określenie metodyki prowadzenia testów automatycznych w projekcie/organizacji</li>
<li>Ustanowienie jednolitych standardów i praktyk dla wszystkich zespołów zaangażowanych w automatyzację testów UI i API</li>
<li>Jasne zdefiniowanie metryk, KPI i kryteriów akceptacji dla oceny skuteczności testów automatycznych</li>
<li>Zapewnienie spójnego podejścia do identyfikacji, analizy i rozwiązywania problemów związanych z testami automatycznymi</li>
<li>Przedstawienie procesu integracji testów automatycznych z cyklem wytwarzania oprogramowania i pipeline'ami CI/CD
  zgodnie z podejściem Shift-Left</li>
<li>Określenie ról i odpowiedzialności w procesie automatyzacji testów</li>
<li>Zapewnienie zgodności z wymaganiami biznesowymi dotyczącymi jakości i szybkości dostarczania oprogramowania</li>
</ul>
<p>Dokument ten stanowi punkt odniesienia dla zespołów projektowych, deweloperskich, testerskich, operacyjnych oraz
zarządzających, zapewniając wspólne zrozumienie celów i metod automatyzacji testów UI i API w systemach IT.</p>
<h2>1.2. Zakres testów automatycznych</h2>
<p>Zakres testów automatycznych określa granice i obszary systemu poddawane weryfikacji poprzez zautomatyzowane narzędzia i
skrypty, koncentrując się na testach interfejsu użytkownika (UI) oraz interfejsów programistycznych aplikacji (API).
Kompleksowa strategia testów automatycznych obejmuje:</p>
<h3>Testy UI z wykorzystaniem Selenium/Selenide</h3>
<ul>
<li><strong>Funkcjonalne testy interfejsu użytkownika</strong> - weryfikacja poprawności działania elementów interfejsu, przepływów
  użytkownika oraz interakcji między komponentami</li>
<li><strong>Testy regresyjne UI</strong> - automatyczne sprawdzanie, czy zmiany w jednym obszarze nie wpłynęły negatywnie na
  funkcjonalność w innych obszarach aplikacji</li>
<li><strong>Testy cross-browser</strong> - weryfikacja działania aplikacji w różnych przeglądarkach (Chrome, Firefox, Edge, Safari)</li>
<li><strong>Testy responsywności</strong> - sprawdzanie zachowania interfejsu na różnych rozmiarach ekranu</li>
<li><strong>Walidacja formularzy</strong> - automatyczna weryfikacja mechanizmów walidacji danych wprowadzanych przez użytkownika</li>
<li><strong>Weryfikacja elementów wizualnych</strong> - sprawdzanie obecności, widoczności i stanu elementów interfejsu</li>
</ul>
<h3>Testy API z wykorzystaniem Rest Assured</h3>
<ul>
<li><strong>Testy funkcjonalne API</strong> - weryfikacja poprawności działania endpointów zgodnie ze specyfikacją</li>
<li><strong>Testy kontraktów API</strong> - sprawdzanie zgodności interfejsów ze zdefiniowanymi kontraktami (np. Swagger/OpenAPI)</li>
<li><strong>Testy integracyjne</strong> - weryfikacja poprawności komunikacji między różnymi komponentami systemu poprzez API</li>
<li><strong>Testy bezpieczeństwa API</strong> - podstawowa weryfikacja mechanizmów autoryzacji i uwierzytelniania</li>
<li><strong>Testy obsługi błędów</strong> - sprawdzanie poprawności obsługi nieprawidłowych żądań i danych wejściowych</li>
<li><strong>Testy wydajnościowe API</strong> - podstawowe testy wydajności kluczowych endpointów</li>
</ul>
<h3>Podejście Shift-Left</h3>
<p>Zakres testów automatycznych obejmuje również aspekty związane z podejściem Shift-Left, takie jak:</p>
<ul>
<li>Wczesna integracja testów automatycznych w cyklu wytwarzania oprogramowania</li>
<li>Automatyzacja testów równolegle z rozwojem funkcjonalności</li>
<li>Współpraca między deweloperami a testerami przy tworzeniu testów automatycznych</li>
<li>Automatyzacja testów jednostkowych komponentów UI i API</li>
<li>Integracja testów automatycznych w pipeline'ach CI/CD od najwcześniejszych etapów rozwoju</li>
</ul>
<h3>Wyłączenia</h3>
<p>Zakres testów automatycznych świadomie nie obejmuje:</p>
<ul>
<li>Testów wydajnościowych pełnego systemu</li>
<li>Kompleksowych testów bezpieczeństwa</li>
<li>Testów eksploracyjnych i testów użyteczności, które wymagają oceny człowieka</li>
<li>Testów kompatybilności ze starszymi wersjami przeglądarek lub systemów operacyjnych, jeśli nie są wspierane przez
  specyfikację projektu</li>
</ul>
<p>Zakres testów automatycznych jest dostosowany do specyfiki testowanego systemu, jego architektury oraz wymagań
biznesowych.
Strategia jasno definiuje, które komponenty, interfejsy i funkcjonalności podlegają automatyzacji testów,
a które wymagają manualnego podejścia, zapewniając tym samym optymalne wykorzystanie zasobów
i maksymalizację pokrycia testowego w kluczowych obszarach.</p>
<h1>2. Metodyka testów automatycznych</h1>
<h2>2.1. Podejście do testów</h2>
<p>Podejście do testów automatycznych definiuje fundamentalną filozofię i zasady, którymi kierujemy się podczas planowania
i realizacji automatyzacji. Nasze podejście opiera się na kilku kluczowych filarach:</p>
<h3>Strategiczna automatyzacja</h3>
<p>Stosujemy świadome i celowe podejście do wyboru funkcjonalności do automatyzacji, koncentrując się na obszarach o:</p>
<ol>
<li>Największej wartości biznesowej</li>
<li>Wysokim ryzyku defektów</li>
<li>Częstej modyfikacji</li>
<li>Powtarzalności w testach regresyjnych</li>
</ol>
<p>Zamiast dążyć do automatyzacji wszystkiego, identyfikujemy te części systemu, gdzie automatyzacja przyniesie największy
zwrot z inwestycji. Analiza kosztów i korzyści pomaga w priorytetyzacji obszarów do automatyzacji.</p>
<h3>Piramida testów automatycznych</h3>
<p>Nasze podejście opiera się na zmodyfikowanej piramidzie testów dla UI i API:</p>
<ul>
<li><strong>Podstawa piramidy</strong>: Testy API jako fundament automatyzacji (szybkie, stabilne, łatwe w utrzymaniu)</li>
<li><strong>Środkowa warstwa</strong>: Testy komponentowe UI (testowanie izolowanych fragmentów interfejsu)</li>
<li><strong>Wierzchołek piramidy</strong>: End-to-end testy UI (pokrywające kluczowe ścieżki biznesowe)</li>
</ul>
<p>Ta struktura zapewnia optymalne pokrycie przy jednoczesnym utrzymaniu szybkości wykonania i stabilności testów.</p>
<h3>Utrzymywalność i skalowalność</h3>
<p>Projektujemy testy z myślą o ich długoterminowej utrzymywalności:</p>
<ul>
<li>Stosowanie wzorca Page Object Model dla testów UI</li>
<li>Tworzenie abstrakcji dla endpointów API</li>
<li>Separacja kodu testowego od danych testowych</li>
<li>Modularność i możliwość wielokrotnego wykorzystania komponentów</li>
</ul>
<h3>Szybka informacja zwrotna</h3>
<p>Testy są projektowane tak, aby dostarczać szybkiej informacji zwrotnej o jakości kodu:</p>
<ul>
<li>Integracja z pipeline'ami CI/CD</li>
<li>Priorytetyzacja krytycznych testów do wczesnego wykonania</li>
<li>Paralelizacja wykonania testów</li>
<li>Raportowanie wyników w czasie rzeczywistym</li>
</ul>
<h3>Podejście iteracyjne i przyrostowe</h3>
<p>Rozwijamy framework testowy i zestaw testów automatycznych iteracyjnie:</p>
<ul>
<li>Rozpoczynamy od podstawowych przypadków testowych</li>
<li>Stopniowo zwiększamy pokrycie testowe</li>
<li>Regularnie refaktoryzujemy kod testowy</li>
<li>Dostosowujemy strategie testowe na podstawie zdobytych doświadczeń</li>
</ul>
<h2>2.2. Typy testów automatycznych</h2>
<h3>2.2.1. Testy UI z wykorzystaniem Selenium/Selenide</h3>
<p>Testy UI z wykorzystaniem Selenium/Selenide koncentrują się na weryfikacji aplikacji z perspektywy użytkownika
końcowego, symulując interakcje z przeglądarką internetową.</p>
<h4>Charakterystyka testów UI:</h4>
<ol>
<li><strong>Poziomy testów UI</strong>: <ul>
<li><strong>Testy komponentowe</strong> - testowanie izolowanych elementów UI (formularze, tabele, wykresy)</li>
<li><strong>Testy funkcjonalne</strong> - weryfikacja konkretnych funkcjonalności interfejsu</li>
<li><strong>Testy end-to-end</strong> - odzwierciedlenie pełnych ścieżek biznesowych użytkownika</li>
<li><strong>Testy cross-browser</strong> - weryfikacja działania w różnych przeglądarkach</li>
</ul>
</li>
<li><strong>Struktura testów UI</strong>:<ul>
<li>Wykorzystanie Page Object Pattern do reprezentacji stron i komponentów</li>
<li>Tworzenie abstrakcji dla powtarzalnych działań (np. logowanie, nawigacja)</li>
<li>Separacja logiki testowej od szczegółów technicznych lokalizacji elementów</li>
<li>Implementacja mechanizmów poczekania i synchronizacji dla operacji asynchronicznych</li>
</ul>
</li>
<li><strong>Strategie stabilizacji</strong>:<ul>
<li>Dodanie inteligentnych warunków oczekiwania (wait conditions)</li>
<li>Mechanizmy ponownych prób dla niestabilnych operacji</li>
<li>Zrzuty ekranu i logi dla diagnostyki</li>
<li>Izolacja testów (czyszczenie stanu między testami)</li>
</ul>
</li>
<li><strong>Przykładowa implementacja testu UI</strong>:</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">userShouldBeAbleToLogin</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">LoginPage</span> <span class="n">loginPage</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LoginPage</span><span class="p">();</span>
    <span class="n">loginPage</span><span class="p">.</span><span class="na">open</span><span class="p">();</span>

    <span class="n">DashboardPage</span> <span class="n">dashboardPage</span> <span class="o">=</span> <span class="n">loginPage</span><span class="p">.</span><span class="na">login</span><span class="p">(</span><span class="s">&quot;user@example.com&quot;</span><span class="p">,</span> <span class="s">&quot;password&quot;</span><span class="p">);</span>

    <span class="n">dashboardPage</span><span class="p">.</span><span class="na">isUserLoggedIn</span><span class="p">()</span>
        <span class="p">.</span><span class="na">shouldBe</span><span class="p">(</span><span class="n">visible</span><span class="p">)</span>
        <span class="p">.</span><span class="na">shouldHave</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s">&quot;Welcome, User&quot;</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div>

<p>Przyjmuje się testowanie UI w celu weryfikacji funkcjonalności aplikacji z perspektywy użytkownika końcowego.
Zatem testy UI odzwierciedlają pełne ścieżki biznesowe, w tym logowanie, nawigacja, edycje danych, itd.</p>
<p><strong><em>W tym przypadku bierze się pod uwagę jedynie <strong>Testy End-to-End</strong> jako kandydatów do automatyzacji.</em></strong></p>
<h3>2.2.2. Testy API z wykorzystaniem Rest Assured</h3>
<p>Testy API z wykorzystaniem Rest Assured weryfikują działanie interfejsów programistycznych aplikacji, koncentrując się
na poprawności, spójności i niezawodności komunikacji między komponentami systemu.</p>
<h4>Charakterystyka testów API:</h4>
<ol>
<li><strong>Poziomy testów API</strong>:<ul>
<li><strong>Testy podstawowe (smoke)</strong> - sprawdzenie dostępności i podstawowej funkcjonalności</li>
<li><strong>Testy funkcjonalne</strong> - weryfikacja logiki biznesowej zaimplementowanej w API</li>
<li><strong>Testy kontraktowe</strong> - sprawdzenie zgodności API ze specyfikacją</li>
<li><strong>Testy negatywne</strong> - weryfikacja obsługi błędów i nieprawidłowych danych wejściowych</li>
<li><strong>Testy sekwencyjne</strong> - weryfikacja przepływów wieloetapowych (np. tworzenie, aktualizacja, usunięcie)</li>
</ul>
</li>
<li><strong>Struktura testów API</strong>:<ul>
<li>Organizacja testów według endpointów lub zasobów</li>
<li>Modelowanie danych wejściowych i wyjściowych za pomocą POJO</li>
<li>Centralizacja konfiguracji i wspólnych elementów (autentykacja, nagłówki)</li>
<li>Struktura given-when-then dla przejrzystości testów</li>
</ul>
</li>
<li><strong>Strategie weryfikacji</strong>:<ul>
<li>Walidacja statusów odpowiedzi</li>
<li>Weryfikacja schematu JSON/XML</li>
<li>Sprawdzanie wartości biznesowych</li>
<li>Walidacja nagłówków i metadanych</li>
<li>Weryfikacja czasu odpowiedzi</li>
</ul>
</li>
<li><strong>Przykładowa implementacja testu API</strong>:</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">shouldCreateNewUser</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">UserDTO</span> <span class="n">newUser</span> <span class="o">=</span> <span class="k">new</span> <span class="n">UserDTO</span><span class="p">(</span><span class="s">&quot;Jan&quot;</span><span class="p">,</span> <span class="s">&quot;Kowalski&quot;</span><span class="p">,</span> <span class="s">&quot;john.kowalski@example.com&quot;</span><span class="p">);</span>

    <span class="n">UserDTO</span> <span class="n">createdUser</span> <span class="o">=</span> <span class="n">RestAssured</span>
        <span class="p">.</span><span class="na">given</span><span class="p">()</span>
            <span class="p">.</span><span class="na">contentType</span><span class="p">(</span><span class="n">ContentType</span><span class="p">.</span><span class="na">JSON</span><span class="p">)</span>
            <span class="p">.</span><span class="na">body</span><span class="p">(</span><span class="n">newUser</span><span class="p">)</span>
            <span class="p">.</span><span class="na">log</span><span class="p">().</span><span class="na">ifValidationFails</span><span class="p">()</span>
        <span class="p">.</span><span class="na">when</span><span class="p">()</span>
            <span class="p">.</span><span class="na">post</span><span class="p">(</span><span class="s">&quot;/api/users&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="na">then</span><span class="p">()</span>
            <span class="p">.</span><span class="na">statusCode</span><span class="p">(</span><span class="mi">201</span><span class="p">)</span>
            <span class="p">.</span><span class="na">extract</span><span class="p">().</span><span class="na">as</span><span class="p">(</span><span class="n">UserDTO</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>

    <span class="n">assertThat</span><span class="p">(</span><span class="n">createdUser</span><span class="p">.</span><span class="na">getId</span><span class="p">()).</span><span class="na">isNotNull</span><span class="p">();</span>
    <span class="n">assertThat</span><span class="p">(</span><span class="n">createdUser</span><span class="p">.</span><span class="na">getEmail</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;john.kowalski@example.com&quot;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<h2>2.3. Shift-Left Testing</h2>
<p>Shift-Left Testing to podejście, w którym aktywności testowe są przesunięte do wcześniejszych faz cyklu wytwarzania
oprogramowania. W kontekście testów automatycznych oznacza to integrację automatyzacji od najwcześniejszych etapów
projektu.</p>
<h3>Kluczowe elementy Shift-Left w automatyzacji testów:</h3>
<ol>
<li><strong>Testowanie równoległe z rozwojem</strong>:<ul>
<li>Tworzenie testów automatycznych jednocześnie z rozwojem funkcjonalności</li>
<li>Współpraca deweloperów i testerów przy definiowaniu przypadków testowych</li>
<li>Wczesna identyfikacja problemów z testowalnością</li>
</ul>
</li>
<li><strong>Automatyzacja od początku projektu</strong>:<ul>
<li>Budowanie frameworka testowego od pierwszych sprintów</li>
<li>Automatyzacja bazowych funkcjonalności zaraz po ich implementacji</li>
<li>Tworzenie podstawowych komponentów Page Object Model przed pełną implementacją UI</li>
</ul>
</li>
<li><strong>Integracja z procesem deweloperskim</strong>:<ul>
<li>Deweloperzy uruchamiają testy automatyczne przed commit'em</li>
<li>Testy automatyczne jako część definicji ukończenia (DoD) dla user stories</li>
<li>Code review obejmujące również kod testów automatycznych</li>
</ul>
</li>
<li><strong>Prewencja defektów</strong>:<ul>
<li>Wczesne wykrywanie problemów z testowalnością i designem</li>
<li>Definiowanie testów przed implementacją (Test First)</li>
<li>Wykorzystanie testów API do weryfikacji backendu przed pełną implementacją frontendu</li>
</ul>
</li>
<li><strong>Praktyczne zastosowanie podejścia Shift-Left</strong>:<ul>
<li>Testerzy uczestniczą w planowaniu i analizie wymagań</li>
<li>Projektowanie testów już na etapie specyfikacji wymagań</li>
<li>Identyfikacja przypadków testowych do automatyzacji przed rozpoczęciem implementacji</li>
<li>Przygotowanie szkieletów testów automatycznych równolegle z projektowaniem architektury</li>
</ul>
</li>
</ol>
<h2>2.4. Metryki i KPI w testach automatycznych</h2>
<p>Metryki i KPI (Key Performance Indicators) stanowią fundament do obiektywnej oceny efektywności testów automatycznych i
umożliwiają podejmowanie decyzji opartych na danych.</p>
<h3>Kluczowe metryki dla testów UI i API:</h3>
<ol>
<li><strong>Metryki pokrycia</strong>:<ul>
<li><strong>Pokrycie funkcjonalne</strong> - procent zautomatyzowanych przypadków testowych w stosunku do wszystkich
  zidentyfikowanych</li>
<li><strong>Pokrycie kodu</strong> - procent kodu frontendowego pokryty testami UI i procent kodu backendowego pokryty testami API</li>
<li><strong>Pokrycie ryzyka</strong> - procent obszarów wysokiego ryzyka objęty testami automatycznymi</li>
</ul>
</li>
<li><strong>Metryki jakościowe</strong>:<ul>
<li><strong>Defect Detection Efficiency (DDE)</strong> - procent defektów wykrytych przez testy automatyczne</li>
<li><strong>Defect Leakage</strong> - liczba defektów, które przedostały się na produkcję mimo istniejących testów automatycznych</li>
<li><strong>False Positives</strong> - liczba fałszywych alarmów zgłaszanych przez testy automatyczne</li>
</ul>
</li>
<li><strong>Metryki wydajnościowe</strong>:<ul>
<li><strong>Czas wykonania</strong> - średni czas potrzebny na wykonanie pełnego zestawu testów</li>
<li><strong>Czas do informacji zwrotnej</strong> - jak szybko testy dostarczają informacji o wprowadzonych zmianach</li>
<li><strong>Narzut czasu na uruchomienie testów</strong> w pipeline'ie CI/CD</li>
</ul>
</li>
<li><strong>Metryki stabilności</strong>:<ul>
<li><strong>Test Flakiness Rate</strong> - procent testów, które dają niespójne wyniki przy tych samych warunkach</li>
<li><strong>Mean Time Between Failures (MTBF)</strong> - średni czas między awariami zestawu testów</li>
<li><strong>Test Pass Rate</strong> - stosunek testów zakończonych sukcesem do wszystkich uruchomionych testów</li>
</ul>
</li>
<li><strong>Metryki utrzymaniowe</strong>:<ul>
<li><strong>Effort Distribution</strong> - proporcja czasu spędzonego na tworzenie vs. utrzymanie testów automatycznych</li>
<li><strong>Test Maintenance Index</strong> - wskaźnik wysiłku potrzebnego do utrzymania testów po zmianach w aplikacji</li>
<li><strong>Test Update Frequency</strong> - jak często testy muszą być aktualizowane</li>
</ul>
</li>
</ol>
<h3>KPI dla oceny efektywności strategii automatyzacji:</h3>
<ol>
<li><strong>Redukcja czasu testów</strong>:<ul>
<li>Średni czas zaoszczędzony dzięki automatyzacji w porównaniu do testów manualnych</li>
<li>Skrócenie czasu potrzebnego na weryfikację regresji</li>
</ul>
</li>
<li><strong>Zwrot z inwestycji (ROI)</strong>:<ul>
<li>Koszt tworzenia i utrzymania testów automatycznych vs. korzyści z wykrytych defektów</li>
<li>Oszczędności wynikające z wcześniejszego wykrywania defektów</li>
</ul>
</li>
<li><strong>Wskaźniki biznesowe</strong>:<ul>
<li>Redukcja Time-to-Market nowych funkcjonalności</li>
<li>Obniżenie kosztu jakości (Cost of Quality)</li>
<li>Zwiększenie częstotliwości wdrożeń na produkcję</li>
</ul>
</li>
<li><strong>Cele dla metryk</strong>:</li>
</ol>
<table>
<thead>
<tr>
<th>Metryka</th>
<th>Cel</th>
<th>Priorytet</th>
<th>Pokrycie funkcjonalne</th>
</tr>
</thead>
<tbody>
<tr>
<td>&gt; 80%</td>
<td>dla krytycznych funkcjonalności</td>
<td>Wysoki</td>
<td>Procent pokrycia funkcjonalności w testach UI</td>
</tr>
<tr>
<td>&gt; 80%</td>
<td>dla krytycznych funkcjonalności</td>
<td>Wysoki</td>
<td>Procent pokrycia funkcjonalności w testach UI</td>
</tr>
<tr>
<td>&gt; 95%</td>
<td>dla krytycznych funkcjonalności</td>
<td>Wysoki</td>
<td>Test Pass Rate w ostatnich 10 runach</td>
</tr>
<tr>
<td>\&lt; 5%</td>
<td>dla krytycznych funkcjonalności</td>
<td>Wysoki</td>
<td>Test Flakiness Rate w ostatnich 10 runach</td>
</tr>
<tr>
<td>\&lt; 20%</td>
<td>ogólny czas pracy</td>
<td>Wysoki</td>
<td>Utrzymanie testów</td>
</tr>
<tr>
<td>\&lt; 60</td>
<td>minut dla pełnego zestawu</td>
<td>Średni</td>
<td>Czas wykonania testów UI</td>
</tr>
<tr>
<td>\&lt; 20</td>
<td>minut dla pełnego zestawu</td>
<td>Średni</td>
<td>Czas wykonania testów API</td>
</tr>
</tbody>
</table>
<p>Regularne monitorowanie tych metryk pozwala na ciągłe doskonalenie strategii automatyzacji testów oraz podejmowanie
świadomych decyzji dotyczących inwestycji w rozwój testów automatycznych.</p>
<h1>3. Narzędzia i frameworki</h1>
<h2>3.1. Selenium WebDriver</h2>
<p>Selenium WebDriver jest fundamentalną technologią wykorzystywaną do automatyzacji testów interfejsu użytkownika w
aplikacjach webowych. Umożliwia programistyczną kontrolę przeglądarek internetowych, co pozwala na symulowanie
interakcji użytkownika z aplikacją.</p>
<h3>Główne cechy Selenium WebDriver:</h3>
<ol>
<li><strong>Wieloplatformowość</strong>:<ul>
<li>Wsparcie dla wszystkich głównych przeglądarek (Chrome, Firefox, Edge, Safari)</li>
<li>Kompatybilność z różnymi systemami operacyjnymi</li>
<li>Możliwość uruchamiania testów w trybie headless (bez interfejsu graficznego)</li>
</ul>
</li>
<li><strong>API WebDriver</strong>:<ul>
<li>Standardowe, stabilne API do kontrolowania przeglądarek</li>
<li>Wsparcie dla różnych języków programowania (Java, C#, Python, JavaScript)</li>
<li>Bogaty zestaw metod do interakcji z elementami stron</li>
</ul>
</li>
<li><strong>Lokalizatory elementów</strong>:<ul>
<li>Wyszukiwanie elementów za pomocą różnych strategii (ID, klasa, nazwa, XPath, CSS selektory)</li>
<li>Możliwość tworzenia złożonych selektorów dla dynamicznych elementów</li>
<li>Hierarchiczne wyszukiwanie elementów w strukturze DOM</li>
</ul>
</li>
<li><strong>Możliwości akcji</strong>:<ul>
<li>Klikanie, wprowadzanie tekstu, zaznaczanie opcji</li>
<li>Obsługa akcji przesuwania, przeciągania i upuszczania (drag &amp; drop)</li>
<li>Wykonywanie skryptów JavaScript w kontekście strony</li>
<li>Symulacja zdarzeń klawiatury i myszy</li>
</ul>
</li>
<li><strong>Wykorzystanie w projekcie</strong>:<ul>
<li>Podstawowy silnik do automatyzacji interfejsu użytkownika</li>
<li>Bazowa technologia dla Selenide</li>
<li>Integracja z Selenium Grid do równoległego wykonywania testów</li>
<li>Wykonywanie testów cross-browser</li>
</ul>
</li>
</ol>
<h3>Przykładowa implementacja testu z wykorzystaniem Selenium WebDriver:</h3>
<div class="codehilite"><pre><span></span><code><span class="kd">public</span> <span class="kt">void</span> <span class="nf">testLoginFunctionality</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">WebDriver</span> <span class="n">driver</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ChromeDriver</span><span class="p">();</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="c1">// Otwarcie strony logowania</span>
        <span class="n">driver</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;https://application-url.com/login&quot;</span><span class="p">);</span>

        <span class="c1">// Wprowadzenie danych logowania</span>
        <span class="n">WebElement</span> <span class="n">usernameField</span> <span class="o">=</span> <span class="n">driver</span><span class="p">.</span><span class="na">findElement</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="na">id</span><span class="p">(</span><span class="s">&quot;username&quot;</span><span class="p">));</span>
        <span class="n">WebElement</span> <span class="n">passwordField</span> <span class="o">=</span> <span class="n">driver</span><span class="p">.</span><span class="na">findElement</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="na">id</span><span class="p">(</span><span class="s">&quot;password&quot;</span><span class="p">));</span>
        <span class="n">WebElement</span> <span class="n">loginButton</span> <span class="o">=</span> <span class="n">driver</span><span class="p">.</span><span class="na">findElement</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="na">id</span><span class="p">(</span><span class="s">&quot;login-button&quot;</span><span class="p">));</span>

        <span class="n">usernameField</span><span class="p">.</span><span class="na">sendKeys</span><span class="p">(</span><span class="s">&quot;testuser&quot;</span><span class="p">);</span>
        <span class="n">passwordField</span><span class="p">.</span><span class="na">sendKeys</span><span class="p">(</span><span class="s">&quot;password123&quot;</span><span class="p">);</span>
        <span class="n">loginButton</span><span class="p">.</span><span class="na">click</span><span class="p">();</span>

        <span class="c1">// Oczekiwanie na załadowanie dashboard</span>
        <span class="n">WebDriverWait</span> <span class="n">wait</span> <span class="o">=</span> <span class="k">new</span> <span class="n">WebDriverWait</span><span class="p">(</span><span class="n">driver</span><span class="p">,</span> <span class="n">Duration</span><span class="p">.</span><span class="na">ofSeconds</span><span class="p">(</span><span class="mi">10</span><span class="p">));</span>
        <span class="n">wait</span><span class="p">.</span><span class="na">until</span><span class="p">(</span><span class="n">ExpectedConditions</span><span class="p">.</span><span class="na">visibilityOfElementLocated</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="na">id</span><span class="p">(</span><span class="s">&quot;dashboard&quot;</span><span class="p">)));</span>

        <span class="c1">// Weryfikacja pomyślnego logowania</span>
        <span class="n">WebElement</span> <span class="n">welcomeMessage</span> <span class="o">=</span> <span class="n">driver</span><span class="p">.</span><span class="na">findElement</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="na">id</span><span class="p">(</span><span class="s">&quot;welcome-message&quot;</span><span class="p">));</span>
        <span class="n">assertTrue</span><span class="p">(</span><span class="n">welcomeMessage</span><span class="p">.</span><span class="na">getText</span><span class="p">().</span><span class="na">contains</span><span class="p">(</span><span class="s">&quot;Welcome, TestUser&quot;</span><span class="p">));</span>
    <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
        <span class="n">driver</span><span class="p">.</span><span class="na">quit</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3>Wyzwania i ograniczenia:</h3>
<ul>
<li>Wymaga zarządzania cyklem życia WebDrivera (inicjalizacja, czyszczenie)</li>
<li>Bezpośrednie użycie wymaga implementacji jawnych mechanizmów oczekiwania</li>
<li>Kod testowy może stać się obszerny i trudny w utrzymaniu bez odpowiedniej abstrakcji</li>
<li>Testy mogą być niestabilne przy nieprawidłowym podejściu do synchronizacji</li>
</ul>
<h2>3.2. Selenide</h2>
<p>Selenide to wrapper na Selenium WebDriver, zaprojektowany,
aby rozwiązać typowe problemy związane z automatyzacją UI i uprościć tworzenie testów.
Dzięki jego deklaratywnemu API, testy stają się bardziej zwięzłe, czytelne i stabilne.</p>
<h3>Główne cechy Selenide:</h3>
<ol>
<li><strong>Uproszczona składnia</strong>:<ul>
<li>Fluent API ułatwiające łańcuchowanie operacji</li>
<li>Krótszy i czytelniejszy kod testowy</li>
<li>Wbudowana inicjalizacja i zamykanie WebDrivera</li>
</ul>
</li>
<li><strong>Automatyczne oczekiwanie</strong>:<ul>
<li>Inteligentne mechanizmy oczekiwania na elementy</li>
<li>Automatyczne ponowne próby w przypadku StaleElementReferenceException</li>
<li>Konfigurowalne timeouty dla różnych operacji</li>
</ul>
</li>
<li><strong>Zaawansowane walidacje</strong>:<ul>
<li>Bogaty zestaw asercji dla elementów UI</li>
<li>Możliwość weryfikacji wielu właściwości naraz</li>
<li>Czytelne komunikaty błędów z załączonymi zrzutami ekranu</li>
</ul>
</li>
<li><strong>Obsługa AJAX i JavaScript</strong>:<ul>
<li>Efektywna obsługa aplikacji wykorzystujących AJAX</li>
<li>Automatyczne oczekiwanie na zakończenie animacji i operacji asynchronicznych</li>
<li>Uproszczona praca z dynamicznie zmieniającym się DOM</li>
</ul>
</li>
<li><strong>Wykorzystanie w projekcie</strong>:<ul>
<li>Podstawowy framework do implementacji testów UI</li>
<li>Integracja z Page Object Pattern</li>
<li>Obsługa złożonych interakcji użytkownika</li>
<li>Automatyczne tworzenie zrzutów ekranu dla nieudanych testów</li>
</ul>
</li>
</ol>
<h3>Przykładowa implementacja testu z wykorzystaniem Selenide:</h3>
<p>java</p>
<div class="codehilite"><pre><span></span><code><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">userCanLoginToSystem</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Otwórz stronę logowania</span>
    <span class="n">open</span><span class="p">(</span><span class="s">&quot;https://application-url.com/login&quot;</span><span class="p">);</span>

    <span class="c1">// Wprowadź dane logowania i kliknij przycisk</span>
    <span class="n">$</span><span class="p">(</span><span class="s">&quot;#username&quot;</span><span class="p">).</span><span class="na">setValue</span><span class="p">(</span><span class="s">&quot;testuser&quot;</span><span class="p">);</span>
    <span class="n">$</span><span class="p">(</span><span class="s">&quot;#password&quot;</span><span class="p">).</span><span class="na">setValue</span><span class="p">(</span><span class="s">&quot;password123&quot;</span><span class="p">);</span>
    <span class="n">$</span><span class="p">(</span><span class="s">&quot;#login-button&quot;</span><span class="p">).</span><span class="na">click</span><span class="p">();</span>

    <span class="c1">// Weryfikacja pomyślnego logowania</span>
    <span class="n">$</span><span class="p">(</span><span class="s">&quot;#dashboard&quot;</span><span class="p">).</span><span class="na">should</span><span class="p">(</span><span class="n">appear</span><span class="p">);</span>
    <span class="n">$</span><span class="p">(</span><span class="s">&quot;#welcome-message&quot;</span><span class="p">).</span><span class="na">shouldHave</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s">&quot;Welcome, TestUser&quot;</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div>

<h3>Porównanie z czystym Selenium WebDriver:</h3>
<table>
<thead>
<tr>
<th>Aspekt</th>
<th>Zarządzanie WebDriverem</th>
<th>Obsługa oczekiwania</th>
<th>Asercje</th>
<th>Obsługa AJAX i JavaScript</th>
<th>Kod</th>
</tr>
</thead>
<tbody>
<tr>
<td>Selenium WebDriver</td>
<td>Ręczne inicjowanie i zamykanie</td>
<td>Wymaga jawnej implementacji</td>
<td>Konieczność zewnętrznych bibliotek</td>
<td>Konieczność dodatkowej implementacji</td>
<td>Rozwlekły, wymaga boilerplate</td>
</tr>
<tr>
<td>Selenide</td>
<td>Automatyczne</td>
<td>Wbudowana automatycznie</td>
<td>Wbudowane z inteligentnym czekaniem</td>
<td>Wbudowana</td>
<td>Zwięzły, deklaratywny</td>
</tr>
</tbody>
</table>
<h2>3.3. Rest Assured</h2>
<p>Rest Assured to biblioteka Java zaprojektowana do testowania i walidacji REST API. Oferuje DSL (Domain Specific
Language) pozwalający na pisanie czytelnych, zwięzłych testów dla interfejsów programistycznych.</p>
<h3>Główne cechy Rest Assured:</h3>
<ol>
<li><strong>Deklaratywna składnia BDD</strong>:<ul>
<li>Struktura given-when-then odzwierciedlająca metodologię BDD</li>
<li>Czytelne, samodokumentujące się testy</li>
<li>Łańcuchowanie metod dla kompaktowej składni</li>
</ul>
</li>
<li><strong>Wszechstronna walidacja odpowiedzi</strong>:<ul>
<li>Weryfikacja statusów HTTP, nagłówków, treści odpowiedzi</li>
<li>Zaawansowana ekstrakcja danych z odpowiedzi JSON/XML</li>
<li>Path expressions dla złożonych weryfikacji danych</li>
</ul>
</li>
<li><strong>Elastyczna serializacja/deserializacja</strong>:<ul>
<li>Automatyczne mapowanie obiektów Java na JSON/XML i odwrotnie</li>
<li>Wsparcie dla różnych serializatorów (Jackson, Gson, JAXB)</li>
<li>Obsługa różnych formatów danych (JSON, XML, HTML, Text)</li>
</ul>
</li>
<li><strong>Zaawansowana konfiguracja</strong>:<ul>
<li>Konfigurowalne proxy, timeouty, autentykacja</li>
<li>Reużywalne specyfikacje dla powtarzalnych elementów</li>
<li>Wsparcie dla SSL/TLS, cookies, sesji</li>
</ul>
</li>
<li><strong>Wykorzystanie w projekcie</strong>:<ul>
<li>Podstawowy framework do testowania API</li>
<li>Weryfikacja kontraktów między front-endem a back-endem</li>
<li>Przygotowanie i czyszczenie danych testowych</li>
<li>Testy integracyjne komponentów back-endowych</li>
</ul>
</li>
</ol>
<h3>Przykładowa implementacja testu z wykorzystaniem Rest Assured:</h3>
<div class="codehilite"><pre><span></span><code><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">canRetrieveUserById</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Przygotowanie i wykonanie żądania</span>
    <span class="n">RestAssured</span><span class="p">.</span><span class="na">given</span><span class="p">()</span>
        <span class="p">.</span><span class="na">header</span><span class="p">(</span><span class="s">&quot;Authorization&quot;</span><span class="p">,</span> <span class="s">&quot;Bearer &quot;</span> <span class="o">+</span> <span class="n">getAuthToken</span><span class="p">())</span>
        <span class="p">.</span><span class="na">contentType</span><span class="p">(</span><span class="n">ContentType</span><span class="p">.</span><span class="na">JSON</span><span class="p">)</span>
        <span class="p">.</span><span class="na">pathParam</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">,</span> <span class="s">&quot;12345&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="na">log</span><span class="p">().</span><span class="na">ifValidationFails</span><span class="p">()</span>
    <span class="p">.</span><span class="na">when</span><span class="p">()</span>
        <span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;/api/users/{id}&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="na">then</span><span class="p">()</span>
        <span class="p">.</span><span class="na">statusCode</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
        <span class="p">.</span><span class="na">contentType</span><span class="p">(</span><span class="n">ContentType</span><span class="p">.</span><span class="na">JSON</span><span class="p">)</span>
        <span class="p">.</span><span class="na">body</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">,</span> <span class="n">equalTo</span><span class="p">(</span><span class="s">&quot;12345&quot;</span><span class="p">))</span>
        <span class="p">.</span><span class="na">body</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">,</span> <span class="n">equalTo</span><span class="p">(</span><span class="s">&quot;Jan Kowalski&quot;</span><span class="p">))</span>
        <span class="p">.</span><span class="na">body</span><span class="p">(</span><span class="s">&quot;email&quot;</span><span class="p">,</span> <span class="n">matchesPattern</span><span class="p">(</span><span class="s">&quot;[a-z]+@[a-z]+\\.[a-z]+&quot;</span><span class="p">))</span>
        <span class="p">.</span><span class="na">body</span><span class="p">(</span><span class="s">&quot;roles&quot;</span><span class="p">,</span> <span class="n">hasSize</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
        <span class="p">.</span><span class="na">body</span><span class="p">(</span><span class="s">&quot;roles&quot;</span><span class="p">,</span> <span class="n">hasItems</span><span class="p">(</span><span class="s">&quot;USER&quot;</span><span class="p">,</span> <span class="s">&quot;ADMIN&quot;</span><span class="p">))</span>
        <span class="p">.</span><span class="na">time</span><span class="p">(</span><span class="n">lessThan</span><span class="p">(</span><span class="mi">1000L</span><span class="p">));</span> <span class="c1">// Czas odpowiedzi poniżej 1 sekundy</span>
<span class="p">}</span>
</code></pre></div>

<h3>Zaawansowane scenariusze z Rest Assured:</h3>
<ol>
<li><strong>Testowanie sekwencji API</strong>:</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="c1">// Krok 1: Utworzenie użytkownika</span>
<span class="n">String</span> <span class="n">userId</span> <span class="o">=</span> <span class="n">given</span><span class="p">()</span>
    <span class="p">.</span><span class="na">contentType</span><span class="p">(</span><span class="n">ContentType</span><span class="p">.</span><span class="na">JSON</span><span class="p">)</span>
    <span class="p">.</span><span class="na">body</span><span class="p">(</span><span class="k">new</span> <span class="n">UserDTO</span><span class="p">(</span><span class="s">&quot;Jan&quot;</span><span class="p">,</span> <span class="s">&quot;Kowalski&quot;</span><span class="p">,</span> <span class="s">&quot;john@example.com&quot;</span><span class="p">))</span>
<span class="p">.</span><span class="na">when</span><span class="p">()</span>
    <span class="p">.</span><span class="na">post</span><span class="p">(</span><span class="s">&quot;/api/users&quot;</span><span class="p">)</span>
<span class="p">.</span><span class="na">then</span><span class="p">()</span>
    <span class="p">.</span><span class="na">statusCode</span><span class="p">(</span><span class="mi">201</span><span class="p">)</span>
    <span class="p">.</span><span class="na">extract</span><span class="p">().</span><span class="na">path</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">);</span>

<span class="c1">// Krok 2: Pobranie utworzonego użytkownika</span>
<span class="n">given</span><span class="p">()</span>
    <span class="p">.</span><span class="na">pathParam</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">,</span> <span class="n">userId</span><span class="p">)</span>
<span class="p">.</span><span class="na">when</span><span class="p">()</span>
    <span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;/api/users/{id}&quot;</span><span class="p">)</span>
<span class="p">.</span><span class="na">then</span><span class="p">()</span>
    <span class="p">.</span><span class="na">statusCode</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
    <span class="p">.</span><span class="na">body</span><span class="p">(</span><span class="s">&quot;email&quot;</span><span class="p">,</span> <span class="n">equalTo</span><span class="p">(</span><span class="s">&quot;john@example.com&quot;</span><span class="p">));</span>

<span class="c1">// Krok 3: Usunięcie użytkownika</span>
<span class="n">given</span><span class="p">()</span>
    <span class="p">.</span><span class="na">pathParam</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">,</span> <span class="n">userId</span><span class="p">)</span>
<span class="p">.</span><span class="na">when</span><span class="p">()</span>
    <span class="p">.</span><span class="na">delete</span><span class="p">(</span><span class="s">&quot;/api/users/{id}&quot;</span><span class="p">)</span>
<span class="p">.</span><span class="na">then</span><span class="p">()</span>
    <span class="p">.</span><span class="na">statusCode</span><span class="p">(</span><span class="mi">204</span><span class="p">);</span>
</code></pre></div>

<ol>
<li><strong>Walidacja schematu JSON</strong>:</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="n">given</span><span class="p">()</span>
    <span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;/api/products&quot;</span><span class="p">)</span>
<span class="p">.</span><span class="na">then</span><span class="p">()</span>
    <span class="p">.</span><span class="na">assertThat</span><span class="p">()</span>
    <span class="p">.</span><span class="na">body</span><span class="p">(</span><span class="n">matchesJsonSchemaInClasspath</span><span class="p">(</span><span class="s">&quot;schemas/products-schema.json&quot;</span><span class="p">));</span>
</code></pre></div>

<h2>3.4. Biblioteki wspierające</h2>
<p>Poza głównymi frameworkami, w testach automatycznych wykorzystujemy szereg bibliotek wspierających, które rozszerzają
możliwości testowe i ułatwiają implementację rozwiązań.</p>
<h3>JUnit 5 / TestNG</h3>
<p><strong>Rola</strong>:</p>
<p>Podstawowe frameworki do uruchamiania testów</p>
<p><strong>Funkcjonalności</strong>:</p>
<ul>
<li>Definiowanie i organizacja testów</li>
<li>Parametryzacja testów</li>
<li>Mechanizmy asercji</li>
<li>Hooks do zarządzania cyklem życia testów (setup, teardown)</li>
<li>Równoległe wykonanie testów</li>
<li>Grupowanie i filtrowanie testów do uruchomienia</li>
</ul>
<h3>AssertJ</h3>
<p><strong>Rola</strong>:</p>
<p>Biblioteka do asercji w stylu fluent API</p>
<p><strong>Funkcjonalności</strong>:</p>
<ul>
<li>Czytelne, opisowe asercje dla różnych typów danych</li>
<li>Łańcuchowanie asercji</li>
<li>Szczegółowe komunikaty błędów</li>
<li>Rozszerzalne asercje dla własnych typów</li>
<li>Wykorzystanie Wyrażeń Lambda, Stream i Optional</li>
</ul>
<h3>Jackson / Gson</h3>
<p><strong>Rola</strong>:</p>
<p>Biblioteki do serializacji/deserializacji JSON</p>
<p><strong>Funkcjonalności</strong>:</p>
<ul>
<li>Konwersja między obiektami Java a JSON</li>
<li>Obsługa złożonych struktur danych</li>
<li>Konfigurowalny proces serializacji/deserializacji</li>
<li>Wsparcie dla adnotacji do kontrolowania procesu mapowania</li>
</ul>
<h3>Awaitility</h3>
<p><strong>Rola</strong>:</p>
<p>Biblioteka do asynchronicznego oczekiwania na dany efekt w systemie</p>
<p><strong>Funkcjonalności</strong>:</p>
<ul>
<li>Deklaratywne oczekiwanie na spełnienie warunków</li>
<li>Obsługa operacji asynchronicznych</li>
<li>Definiowalne timeout'y i interwały</li>
<li>Integracja z wyrażeniami lambda</li>
</ul>
<h3>Lombok</h3>
<p><strong>Rola</strong>:</p>
<p>Redukcja boilerplate kodu Java</p>
<p><strong>Funkcjonalności</strong>:</p>
<ul>
<li>Automatyczne generowanie getterów/setterów</li>
<li>Uproszczone definiowanie klas DTO</li>
<li>Wzorce Builder, toString, equals/hashCode</li>
<li>Usprawnienie zarządzania zasobami (try-with-resources)</li>
</ul>
<h3>Allure Report</h3>
<p><strong>Rola</strong>:</p>
<p>Generowanie raportów z testów</p>
<p><strong>Funkcjonalności</strong>:</p>
<ul>
<li>Atrakcyjne wizualnie raporty HTML</li>
<li>Szczegółowe statystyki wykonania testów</li>
<li>Załączniki (zrzuty ekranu, logi, dane wejściowe/wyjściowe)</li>
<li>Kategoryzacja błędów i trendów</li>
<li>Integracja z CI/CD i narzędziami zarządzania testami</li>
</ul>
<h3>Faker</h3>
<p><strong>Rola</strong>:</p>
<p>Generowanie realistycznych danych testowych</p>
<p><strong>Funkcjonalności</strong>:</p>
<p>Różnorodne typy danych (imiona, adresy, numery telefonów, itp.)</p>
<ul>
<li>Wielojęzyczne wsparcie</li>
<li>Spójne generowanie danych</li>
<li>Konfigurowalne generatory</li>
</ul>
<h3>Log4j / SLF4J</h3>
<p><strong>Rola</strong>:</p>
<p>Zarządzanie logowaniem</p>
<p><strong>Funkcjonalności</strong>:</p>
<ul>
<li>Elastyczna konfiguracja logowania</li>
<li>Różne poziomy logów</li>
<li>Rotacja plików logów</li>
<li>Formatowanie komunikatów</li>
<li>Integracja z narzędziami monitoringu</li>
</ul>
<h3>JsonPath / XmlPath</h3>
<p><strong>Rola</strong>:</p>
<p>Zaawansowane przetwarzanie odpowiedzi JSON/XML</p>
<p><strong>Funkcjonalności</strong>:</p>
<ul>
<li>Ekstrakcja danych za pomocą wyrażeń ścieżkowych</li>
<li>Przetwarzanie złożonych hierarchii</li>
<li>Filtrowanie i transformacja danych</li>
<li>Integracja z Rest Assured do weryfikacji odpowiedzi</li>
</ul>
<h3>Integracja bibliotek w frameworku testowym:</h3>
<div class="codehilite"><pre><span></span><code><span class="nd">@Slf4j</span> <span class="c1">// Lombok dla logowania</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserApiTest</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Faker</span> <span class="n">faker</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Faker</span><span class="p">();</span> <span class="c1">// Generator danych</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">shouldCreateAndRetrieveUser</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Przygotowanie danych testowych z Faker</span>
        <span class="n">String</span> <span class="n">email</span> <span class="o">=</span> <span class="n">faker</span><span class="p">.</span><span class="na">internet</span><span class="p">().</span><span class="na">emailAddress</span><span class="p">();</span>
        <span class="n">UserDTO</span> <span class="n">newUser</span> <span class="o">=</span> <span class="k">new</span> <span class="n">UserDTO</span><span class="p">(</span>
            <span class="n">faker</span><span class="p">.</span><span class="na">name</span><span class="p">().</span><span class="na">firstName</span><span class="p">(),</span>
            <span class="n">faker</span><span class="p">.</span><span class="na">name</span><span class="p">().</span><span class="na">lastName</span><span class="p">(),</span>
            <span class="n">email</span>
        <span class="p">);</span>

        <span class="c1">// Wykonanie testu z Rest Assured</span>
        <span class="n">String</span> <span class="n">userId</span> <span class="o">=</span> <span class="n">RestAssured</span><span class="p">.</span><span class="na">given</span><span class="p">()</span>
            <span class="p">.</span><span class="na">contentType</span><span class="p">(</span><span class="n">ContentType</span><span class="p">.</span><span class="na">JSON</span><span class="p">)</span>
            <span class="p">.</span><span class="na">body</span><span class="p">(</span><span class="n">newUser</span><span class="p">)</span> <span class="c1">// Jackson/Gson serializacja</span>
            <span class="p">.</span><span class="na">log</span><span class="p">().</span><span class="na">ifValidationFails</span><span class="p">()</span>
        <span class="p">.</span><span class="na">when</span><span class="p">()</span>
            <span class="p">.</span><span class="na">post</span><span class="p">(</span><span class="s">&quot;/api/users&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="na">then</span><span class="p">()</span>
            <span class="p">.</span><span class="na">statusCode</span><span class="p">(</span><span class="mi">201</span><span class="p">)</span>
            <span class="p">.</span><span class="na">extract</span><span class="p">().</span><span class="na">path</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">);</span>

        <span class="c1">// Asynchroniczna weryfikacja z Awaitility</span>
        <span class="n">Awaitility</span><span class="p">.</span><span class="na">await</span><span class="p">()</span>
            <span class="p">.</span><span class="na">atMost</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">TimeUnit</span><span class="p">.</span><span class="na">SECONDS</span><span class="p">)</span>
            <span class="p">.</span><span class="na">pollInterval</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">TimeUnit</span><span class="p">.</span><span class="na">SECONDS</span><span class="p">)</span>
            <span class="p">.</span><span class="na">until</span><span class="p">(()</span> <span class="o">-&gt;</span> <span class="n">isUserAvailableInSystem</span><span class="p">(</span><span class="n">userId</span><span class="p">));</span>

        <span class="c1">// Asercje z AssertJ</span>
        <span class="n">UserDTO</span> <span class="n">retrievedUser</span> <span class="o">=</span> <span class="n">getUserById</span><span class="p">(</span><span class="n">userId</span><span class="p">);</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">retrievedUser</span><span class="p">)</span>
            <span class="p">.</span><span class="na">isNotNull</span><span class="p">()</span>
            <span class="p">.</span><span class="na">extracting</span><span class="p">(</span><span class="n">UserDTO</span><span class="p">::</span><span class="n">getEmail</span><span class="p">)</span>
            <span class="p">.</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">email</span><span class="p">);</span>

        <span class="c1">// Logowanie z SLF4J</span>
        <span class="n">log</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;Successfully verified user creation: {}&quot;</span><span class="p">,</span> <span class="n">userId</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// Metody pomocnicze...</span>
<span class="p">}</span>
</code></pre></div>

<p>Ta kombinacja narzędzi i bibliotek zapewnia kompleksowe rozwiązanie do testowania aplikacji webowych na wszystkich
poziomach, od API po interfejs użytkownika, z zachowaniem czytelności, utrzymywalności i efektywności testów.</p>
<h1>4. Proces tworzenia testów automatycznych</h1>
<h2>4.1. Identyfikacja przypadków testowych do automatyzacji</h2>
<p>Identyfikacja odpowiednich przypadków testowych do automatyzacji jest kluczowym etapem, który determinuje skuteczność
całego procesu testów automatycznych. Wymaga ona strategicznego podejścia, aby zmaksymalizować zwrot z inwestycji (ROI)
i skoncentrować wysiłki na obszarach o największej wartości.</p>
<h3>Kryteria wyboru przypadków do automatyzacji:</h3>
<ol>
<li><strong>Wartość biznesowa</strong>:<ul>
<li>Krytyczne funkcjonalności, których awaria ma znaczący wpływ na biznes</li>
<li>Główne ścieżki biznesowe wykorzystywane przez większość użytkowników</li>
<li>Procesy generujące przychód (np. ścieżka zakupowa, płatności)</li>
<li>Funkcjonalności wymagane przez regulacje prawne lub zgodność</li>
</ul>
</li>
<li><strong>Częstotliwość wykonania</strong>:
    *
        * Testy wykonywane regularnie w cyklach regresyjnych<ul>
<li>Scenariusze walidowane przy każdym wdrożeniu</li>
<li>Funkcje wymagające częstego retestingu po zmianach w kodzie</li>
</ul>
</li>
<li><strong>Podatność na błędy</strong>:<ul>
<li>Obszary z historią częstych defektów</li>
<li>Funkcjonalności złożone lub o wysokim ryzyku technicznym</li>
<li>Komponenty z wieloma zależnościami</li>
<li>Moduły podlegające częstym zmianom</li>
</ul>
</li>
<li><strong>Techniczna wykonalność</strong>:<ul>
<li>Stabilność interfejsu użytkownika lub API</li>
<li>Determinizm wyników (te same dane wejściowe zawsze dają te same wyniki)</li>
<li>Możliwość izolacji komponentu do testów
  *Dostępność elementów UI do automatyzacji (identyfikatory, selektory)</li>
</ul>
</li>
<li><strong>Nakład pracy vs. korzyści</strong>:<ul>
<li>Czas potrzebny na implementację testu automatycznego</li>
<li>Częstotliwość ręcznego wykonania testu</li>
<li>Złożoność utrzymania testu w czasie</li>
<li>Oczekiwana długość życia testowanej funkcjonalności</li>
</ul>
</li>
</ol>
<h3>Metodologia identyfikacji przypadków testowych:</h3>
<ol>
<li><strong>Analiza ryzyka</strong>:<ul>
<li>Ocena wpływu potencjalnej awarii (skala 1-5)</li>
<li>Ocena prawdopodobieństwa wystąpienia błędu (skala 1-5)</li>
<li>Obliczenie indeksu ryzyka (wpływ × prawdopodobieństwo)</li>
<li>Priorytetyzacja funkcjonalności o najwyższym indeksie ryzyka</li>
</ul>
</li>
<li><strong>Analiza wymagań</strong>:<ul>
<li>Przeglądanie dokumentacji biznesowej i technicznej</li>
<li>Identyfikacja scenariuszy z User Stories</li>
<li>Analiza przypadków użycia</li>
<li>Wyodrębnienie testów funkcjonalnych bazujących na specyfikacji</li>
</ul>
</li>
<li><strong>Analiza kodu i pokrycia</strong>:<ul>
<li>Przegląd struktury aplikacji</li>
<li>Identyfikacja obszarów o niskim pokryciu testami</li>
<li>Analiza złożoności cyklomatycznej kodu</li>
<li>Identyfikacja wspólnych komponentów używanych w wielu miejscach</li>
</ul>
</li>
<li><strong>Analiza historyczna</strong>:<ul>
<li>Przegląd wcześniejszych incydentów i defektów</li>
<li>Identyfikacja częstych obszarów problemowych</li>
<li>Analiza raportów z testów manualnych</li>
<li>Przegląd logów i metryk produkcyjnych</li>
</ul>
</li>
</ol>
<h3>Proces decyzyjny i dokumentacja:</h3>
<ol>
<li><strong>Matryca decyzyjna automatyzacji</strong>:</li>
</ol>
<table>
<thead>
<tr>
<th>Kryterium</th>
<th>Waga</th>
<th>Ocena (1-5)</th>
<th>Wynik ważony</th>
</tr>
</thead>
<tbody>
<tr>
<td>Wartość biznesowa</td>
<td>3</td>
<td>?</td>
<td>?</td>
</tr>
<tr>
<td>Częstotliwość wykonania</td>
<td>2</td>
<td>?</td>
<td>?</td>
</tr>
<tr>
<td>Podatność na błędy</td>
<td>2</td>
<td>?</td>
<td>?</td>
</tr>
<tr>
<td>Techniczna wykonalność</td>
<td>1</td>
<td>?</td>
<td>?</td>
</tr>
<tr>
<td>Łatwość utrzymania</td>
<td>1</td>
<td>?</td>
<td>?</td>
</tr>
<tr>
<td><strong>Suma</strong></td>
<td></td>
<td></td>
<td><strong>?</strong></td>
</tr>
</tbody>
</table>
<p><em>Przypadki testowe z sumą powyżej określonego progu są kwalifikowane do automatyzacji.</em></p>
<ol>
<li>
<p><strong>Dokumentacja wybranych przypadków</strong>:</p>
<ul>
<li>Unikalne ID przypadku testowego</li>
<li>Opis funkcjonalności do testowania</li>
<li>Kryteria akceptacji</li>
<li>Priorytet automatyzacji</li>
<li>Szacowany nakład pracy</li>
<li>Powiązane wymagania biznesowe</li>
<li>Typ testu (UI/API)</li>
</ul>
</li>
<li>
<p><strong>Przegląd i zatwierdzenie</strong>:</p>
<ul>
<li>Zespołowy przegląd wybranych przypadków</li>
<li>Weryfikacja przez interesariuszy biznesowych</li>
<li>Walidacja technicznej wykonalności</li>
<li>Finalne zatwierdzenie listy do automatyzacji</li>
</ul>
</li>
</ol>
<h3>Przykładowa lista kryteriów oceny dla testów UI vs. API:</h3>
<table>
<thead>
<tr>
<th>Funkcjonalność</th>
<th>Lepiej testować przez UI</th>
<th>Lepiej testować przez API</th>
</tr>
</thead>
<tbody>
<tr>
<td>Logowanie i bezpieczeństwo</td>
<td>✓ (pełna ścieżka użytkownika)</td>
<td>✓ (weryfikacja tokenów, uprawnień)</td>
</tr>
<tr>
<td>Walidacja formularzy</td>
<td>✓ (interakcje wizualne)</td>
<td>✗</td>
</tr>
<tr>
<td>Przepływy biznesowe (np. zamówienia)</td>
<td>✓ (end-to-end)</td>
<td>✓ (pojedyncze kroki)</td>
</tr>
<tr>
<td>CRUD</td>
<td>✗</td>
<td>✓ (wydajność, spójność)</td>
</tr>
<tr>
<td>Wygląd i układy</td>
<td>✓</td>
<td>✗</td>
</tr>
<tr>
<td>Integracja z systemami zewnętrznymi</td>
<td>✗</td>
<td>✓ (szybkość, niezawodność)</td>
</tr>
<tr>
<td>Weryfikacja integracji z API</td>
<td>✗</td>
<td>✓ (skuteczność, szybkość)</td>
</tr>
<tr>
<td>Weryfikacja integracji z UI</td>
<td>✓</td>
<td>✗</td>
</tr>
</tbody>
</table>
<h2>4.2. Projektowanie testów UI</h2>
<p>Projektowanie testów UI jest procesem twórczym, wymagającym zrozumienia zarówno aspektów biznesowych, jak i technicznych
aplikacji. Dobrze zaprojektowane testy UI są czytelne, utrzymywalne i skutecznie wykrywają defekty.</p>
<h3>Podejście do projektowania testów UI:</h3>
<ol>
<li><strong>Definiowanie zakresu testu</strong>:</li>
<li>Określenie dokładnego celu testu (co konkretnie ma być zweryfikowane)</li>
<li>Identyfikacja warunków wstępnych (np. stan aplikacji, dane testowe)</li>
<li>Zdefiniowanie oczekiwanych rezultatów</li>
<li>
<p>Ustalenie granic testu (co należy, a czego nie należy testować)</p>
</li>
<li>
<p><strong>Dekompozycja scenariusza na kroki</strong>:</p>
</li>
<li>Podział testu na logiczne, atomowe kroki</li>
<li>Identyfikacja punktów kontrolnych i weryfikacyjnych</li>
<li>Określenie kolejności działań użytkownika</li>
<li>
<p>Identyfikacja potencjalnych punktów synchronizacji (oczekiwania)</p>
</li>
<li>
<p><strong>Identyfikacja elementów UI</strong>:</p>
</li>
<li>Analiza struktury DOM aplikacji</li>
<li>Wybór optymalnych lokalizatorów (preferowane ID, następnie CSS selektory)</li>
<li>Dokumentacja lokalizatorów dla wielokrotnego użycia</li>
<li>
<p>Identyfikacja dynamicznych elementów wymagających specjalnego podejścia</p>
</li>
<li>
<p><strong>Planowanie walidacji i asercji</strong>:</p>
</li>
<li>Określenie co dokładnie powinno być weryfikowane</li>
<li>Wybór typów asercji (widoczność, tekst, atrybuty, stan)</li>
<li>Dokumentacja oczekiwanych wyników</li>
<li>
<p>Planowanie alternatywnych ścieżek (przypadki błędów)</p>
</li>
<li>
<p><strong>Identyfikacja potencjalnych wyzwań</strong>:</p>
</li>
<li>Potencjalne problemy z synchronizacją (AJAX, animacje)</li>
<li>Dynamicznie generowane elementy</li>
<li>Elementy zależne od stanu (np. widoczne tylko przy określonych warunkach)</li>
<li>Cross-browser kompatybilność</li>
</ol>
<h3>Przykładowy proces projektowania testu UI:</h3>
<p>Scenariusz biznesowy: "Użytkownik powinien móc zalogować się do aplikacji, dodać produkt do koszyka i przejść do
płatności"</p>
<ol>
<li><strong>Dekompozycja scenariusza</strong>:</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="mf">1.</span><span class="w"> </span><span class="nb">Log</span><span class="n">owanie</span><span class="w"> </span><span class="n">do</span><span class="w"> </span><span class="n">aplikacji</span><span class="w"></span>
<span class="w">   </span><span class="n">a</span><span class="mf">.</span><span class="w"> </span><span class="n">Otwarcie</span><span class="w"> </span><span class="n">strony</span><span class="w"> </span><span class="nb">log</span><span class="n">owania</span><span class="w"></span>
<span class="w">   </span><span class="n">b</span><span class="mf">.</span><span class="w"> </span><span class="n">Wprowadzenie</span><span class="w"> </span><span class="n">poprawnych</span><span class="w"> </span><span class="n">danych</span><span class="w"></span>
<span class="w">   </span><span class="n">c</span><span class="mf">.</span><span class="w"> </span><span class="n">Weryfikacja</span><span class="w"> </span><span class="n">pomyślnego</span><span class="w"> </span><span class="nb">log</span><span class="n">owania</span><span class="w"></span>
<span class="mf">2.</span><span class="w"> </span><span class="n">Wyszukiwanie</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">dodawanie</span><span class="w"> </span><span class="n">produktu</span><span class="w"></span>
<span class="w">   </span><span class="n">a</span><span class="mf">.</span><span class="w"> </span><span class="n">Wyszukanie</span><span class="w"> </span><span class="n">produktu</span><span class="w"> </span><span class="n">po</span><span class="w"> </span><span class="n">nazwie</span><span class="w"></span>
<span class="w">   </span><span class="n">b</span><span class="mf">.</span><span class="w"> </span><span class="n">Weryfikacja</span><span class="w"> </span><span class="n">wyników</span><span class="w"> </span><span class="n">wyszukiwania</span><span class="w"></span>
<span class="w">   </span><span class="n">c</span><span class="mf">.</span><span class="w"> </span><span class="n">Wybór</span><span class="w"> </span><span class="n">produktu</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">dodanie</span><span class="w"> </span><span class="n">do</span><span class="w"> </span><span class="n">koszyka</span><span class="w"></span>
<span class="w">   </span><span class="n">d</span><span class="mf">.</span><span class="w"> </span><span class="n">Weryfikacja</span><span class="w"> </span><span class="n">powiadomienia</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="n">dodaniu</span><span class="w"> </span><span class="n">do</span><span class="w"> </span><span class="n">koszyka</span><span class="w"></span>
<span class="mf">3.</span><span class="w"> </span><span class="n">Przejście</span><span class="w"> </span><span class="n">do</span><span class="w"> </span><span class="n">procesu</span><span class="w"> </span><span class="n">płatności</span><span class="w"></span>
<span class="w">   </span><span class="n">a</span><span class="mf">.</span><span class="w"> </span><span class="n">Otwarcie</span><span class="w"> </span><span class="n">koszyka</span><span class="w"></span>
<span class="w">   </span><span class="n">b</span><span class="mf">.</span><span class="w"> </span><span class="n">Weryfikacja</span><span class="w"> </span><span class="n">dodanego</span><span class="w"> </span><span class="n">produktu</span><span class="w"></span>
<span class="w">   </span><span class="n">c</span><span class="mf">.</span><span class="w"> </span><span class="n">Przejście</span><span class="w"> </span><span class="n">do</span><span class="w"> </span><span class="n">płątności</span><span class="w"></span>
<span class="w">   </span><span class="n">d</span><span class="mf">.</span><span class="w"> </span><span class="n">Weryfikacja</span><span class="w"> </span><span class="n">strony</span><span class="w"> </span><span class="n">checkout</span><span class="w"></span>
</code></pre></div>

<ol>
<li><strong>Identyfikacja elementów UI i lokalizatorów</strong>:</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="nv">Strona</span> <span class="nv">logowania</span>:
<span class="o">-</span> <span class="nv">Pole</span> <span class="nv">username</span>: #<span class="nv">username</span>
<span class="o">-</span> <span class="nv">Pole</span> <span class="nv">password</span>: #<span class="nv">password</span>
<span class="o">-</span> <span class="nv">Przycisk</span> <span class="nv">login</span>: #<span class="nv">login</span><span class="o">-</span><span class="nv">button</span>
<span class="o">-</span> <span class="nv">Komunikat</span> <span class="nv">powodzenia</span>: .<span class="nv">success</span><span class="o">-</span><span class="nv">message</span>
<span class="mi">1</span>.
<span class="nv">Strona</span> <span class="nv">g</span>łó<span class="nv">wna</span>:
<span class="o">-</span> <span class="nv">Pole</span> <span class="nv">wyszukiwania</span>: #<span class="nv">search</span><span class="o">-</span><span class="nv">input</span>
<span class="o">-</span> <span class="nv">Przycisk</span> <span class="nv">wyszukiwania</span>: <span class="nv">button</span>[<span class="nv">type</span><span class="o">=</span><span class="s2">&quot;</span><span class="s">submit</span><span class="s2">&quot;</span>]
<span class="o">-</span> <span class="nv">Lista</span> <span class="nv">wynik</span>ó<span class="nv">w</span>: .<span class="nv">search</span><span class="o">-</span><span class="nv">results</span> .<span class="nv">product</span><span class="o">-</span><span class="nv">item</span>
<span class="o">-</span> <span class="nv">Przycisk</span> <span class="s2">&quot;</span><span class="s">Dodaj do koszyka</span><span class="s2">&quot;</span>: .<span class="nv">add</span><span class="o">-</span><span class="nv">to</span><span class="o">-</span><span class="nv">cart</span><span class="o">-</span><span class="nv">button</span>
<span class="o">-</span> <span class="nv">Powiadomienie</span> <span class="nv">o</span> <span class="nv">dodaniu</span>: #<span class="nv">cart</span><span class="o">-</span><span class="nv">notification</span>
<span class="mi">1</span>.
<span class="nv">Koszyk</span> <span class="nv">i</span> <span class="nv">checkout</span>:
<span class="o">-</span> <span class="nv">Link</span> <span class="k">do</span> <span class="nv">koszyka</span>: #<span class="nv">cart</span><span class="o">-</span><span class="nv">link</span>
<span class="o">-</span> <span class="nv">Pozycje</span> <span class="nv">w</span> <span class="nv">koszyku</span>: .<span class="nv">cart</span><span class="o">-</span><span class="nv">items</span> .<span class="nv">item</span>
<span class="o">-</span> <span class="nv">Przycisk</span> <span class="nv">checkout</span>: #<span class="nv">checkout</span><span class="o">-</span><span class="nv">button</span>
<span class="o">-</span> <span class="nv">Nag</span>łó<span class="nv">wek</span> <span class="nv">strony</span> <span class="nv">checkout</span>: .<span class="nv">checkout</span><span class="o">-</span><span class="nv">page</span> <span class="nv">h1</span>
</code></pre></div>

<ol>
<li><strong>Procedury walidacji</strong>:</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="nv">Walidacja</span> <span class="nv">logowania</span>:
<span class="o">-</span> <span class="nv">Dashboard</span> <span class="nv">jest</span> <span class="nv">widoczny</span>
<span class="o">-</span> <span class="nv">Nazwa</span> <span class="nv">u</span>ż<span class="nv">ytkownika</span> <span class="nv">jest</span> <span class="nv">wy</span>ś<span class="nv">wietlona</span> <span class="nv">w</span> <span class="nv">nag</span>łó<span class="nv">wku</span>
<span class="mi">1</span>.
<span class="nv">Walidacja</span> <span class="nv">wyszukiwania</span>:
<span class="o">-</span> <span class="nv">Lista</span> <span class="nv">produkt</span>ó<span class="nv">w</span> <span class="nv">zawiera</span> <span class="nv">przynajmniej</span> <span class="nv">jeden</span> <span class="nv">element</span>
<span class="o">-</span> <span class="nv">Nazwa</span> <span class="nv">pierwszego</span> <span class="nv">produktu</span> <span class="nv">zawiera</span> <span class="nv">szukan</span>ą <span class="nv">fraz</span>ę
<span class="mi">1</span>.
<span class="nv">Walidacja</span> <span class="nv">dodania</span> <span class="k">do</span> <span class="nv">koszyka</span>:
<span class="o">-</span> <span class="nv">Powiadomienie</span> <span class="nv">jest</span> <span class="nv">wy</span>ś<span class="nv">wietlone</span>
<span class="o">-</span> <span class="nv">Licznik</span> <span class="nv">produkt</span>ó<span class="nv">w</span> <span class="nv">w</span> <span class="nv">koszyku</span> <span class="nv">zwi</span>ę<span class="nv">kszy</span>ł <span class="nv">si</span>ę
<span class="mi">1</span>.
<span class="nv">Walidacja</span> <span class="nv">checkout</span>:
<span class="o">-</span> <span class="nv">Strona</span> <span class="nv">checkout</span> <span class="nv">jest</span> <span class="nv">za</span>ł<span class="nv">adowana</span>
<span class="o">-</span> <span class="nv">Produkt</span> <span class="nv">jest</span> <span class="nv">widoczny</span> <span class="nv">na</span> <span class="nv">li</span>ś<span class="nv">cie</span> <span class="nv">zam</span>ó<span class="nv">wienia</span>
<span class="o">-</span> <span class="nv">Cena</span> <span class="nv">jest</span> <span class="nv">zgodna</span> <span class="nv">z</span> <span class="nv">oczekiwan</span>ą
</code></pre></div>

<ol>
<li><strong>Identyfikacja potencjalnych wyzwań</strong>:</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="o">-</span> <span class="nv">Dynamiczne</span> <span class="nv">generowanie</span> <span class="nv">ID</span> <span class="nv">produkt</span>ó<span class="nv">w</span> <span class="o">-</span> <span class="nv">konieczne</span> <span class="nv">u</span>ż<span class="nv">ycie</span> <span class="nv">relatywnych</span> <span class="nv">lokalizator</span>ó<span class="nv">w</span>
<span class="o">-</span> <span class="nv">Asynchroniczne</span> ł<span class="nv">adowanie</span> <span class="nv">wynik</span>ó<span class="nv">w</span> <span class="nv">wyszukiwania</span> <span class="o">-</span> <span class="nv">potrzebne</span> <span class="nv">mechanizmy</span> <span class="nv">oczekiwania</span>
<span class="o">-</span> <span class="nv">Animacja</span> <span class="nv">powiadomienia</span> <span class="nv">o</span> <span class="nv">dodaniu</span> <span class="k">do</span> <span class="nv">koszyka</span> <span class="o">-</span> <span class="nv">synchronizacja</span> <span class="nv">czasowa</span>
<span class="o">-</span> <span class="nv">Sesja</span> <span class="nv">u</span>ż<span class="nv">ytkownika</span> <span class="o">-</span> <span class="nv">mo</span>ż<span class="nv">e</span> <span class="nv">wymaga</span>ć <span class="nv">ponownego</span> <span class="nv">logowania</span> <span class="nv">przy</span> <span class="nv">d</span>ł<span class="nv">u</span>ż<span class="nv">szych</span> <span class="nv">testach</span>
</code></pre></div>

<h3>Projektowanie modelu Page Object:</h3>
<p>Przy projektowaniu testów UI kluczowe jest zastosowanie wzorca Page Object Model (POM), który oddziela logikę testową od
reprezentacji interfejsu użytkownika.</p>
<ol>
<li><strong>Identyfikacja stron i komponentów</strong>:</li>
<li>Wyodrębnienie głównych stron aplikacji (np. LoginPage, ProductPage,
         CartPage)</li>
<li>Identyfikacja współdzielonych komponentów (np. Header, Footer, SearchBox)</li>
<li>Abstrakcja skomplikowanych elementów i ich zachowań (UsersTable, AccountTransfersTable)</li>
<li>Określenie relacji między stronami (nawigacja)</li>
<li>
<p>Decyzja zwracania innych page objectów przez page object lub zwracanie przez metody publiczne this/void</p>
</li>
<li>
<p><strong>Definiowanie metod w Page Objects</strong>:</p>
</li>
<li>Metody reprezentujące akcje użytkownika (loginAs(User user), searchForProduct(ProductType productType)) - jako abstrakce zachowań</li>
<li>Metody weryfikujące stan strony (isLoggedIn()) - jako abstrakcje weryfikacji</li>
<li>
<p>Metody pobierające stan elementów, które <strong><em>muszą</em></strong> być wykorzystane w testach (w dalszej części procesu)  (getCartItemCount())</p>
</li>
<li>
<p><strong>Przykładowa struktura klas Page Object</strong>:</p>
</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="c1">// Bazowa klasa dla wszystkich stron</span>
<span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">BasePage</span> <span class="p">{</span>
    <span class="kd">protected</span> <span class="n">SelenideElement</span> <span class="n">pageContainer</span><span class="p">;</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">isAt</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">pageContainer</span><span class="p">.</span><span class="na">shoulddBe</span><span class="p">(</span><span class="n">displayed</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// Wspólne metody nawigacyjne</span>
    <span class="kd">public</span> <span class="n">HomePage</span> <span class="nf">navigateToHome</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">$</span><span class="p">(</span><span class="s">&quot;#home-link&quot;</span><span class="p">).</span><span class="na">click</span><span class="p">();</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">HomePage</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="c1">// Inne wspólne metody...</span>
<span class="p">}</span>

<span class="c1">// Konkretna implementacja strony</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LoginPage</span> <span class="kd">extends</span> <span class="n">BasePage</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="n">SelenideElement</span> <span class="n">usernameField</span> <span class="o">=</span> <span class="n">$</span><span class="p">(</span><span class="s">&quot;#username&quot;</span><span class="p">);</span>
    <span class="kd">private</span> <span class="n">SelenideElement</span> <span class="n">passwordField</span> <span class="o">=</span> <span class="n">$</span><span class="p">(</span><span class="s">&quot;#password&quot;</span><span class="p">);</span>
    <span class="kd">private</span> <span class="n">SelenideElement</span> <span class="n">loginButton</span> <span class="o">=</span> <span class="n">$</span><span class="p">(</span><span class="s">&quot;#login-button&quot;</span><span class="p">);</span>

    <span class="kd">public</span> <span class="nf">LoginPage</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">pageContainer</span> <span class="o">=</span> <span class="n">$</span><span class="p">(</span><span class="s">&quot;.login-container&quot;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="n">HomePage</span> <span class="nf">loginAs</span><span class="p">(</span><span class="n">String</span> <span class="n">username</span><span class="p">,</span> <span class="n">String</span> <span class="n">password</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">usernameField</span><span class="p">.</span><span class="na">setValue</span><span class="p">(</span><span class="n">username</span><span class="p">);</span>
        <span class="n">passwordField</span><span class="p">.</span><span class="na">setValue</span><span class="p">(</span><span class="n">password</span><span class="p">);</span>
        <span class="n">loginButton</span><span class="p">.</span><span class="na">click</span><span class="p">();</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">HomePage</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="n">LoginPage</span> <span class="nf">loginExpectingError</span><span class="p">(</span><span class="n">String</span> <span class="n">username</span><span class="p">,</span> <span class="n">String</span> <span class="n">password</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">usernameField</span><span class="p">.</span><span class="na">setValue</span><span class="p">(</span><span class="n">username</span><span class="p">);</span>
        <span class="n">passwordField</span><span class="p">.</span><span class="na">setValue</span><span class="p">(</span><span class="n">password</span><span class="p">);</span>
        <span class="n">loginButton</span><span class="p">.</span><span class="na">click</span><span class="p">();</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isErrorMessageDisplayed</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">$</span><span class="p">(</span><span class="s">&quot;.error-message&quot;</span><span class="p">).</span><span class="na">isDisplayed</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h2>4.3. Projektowanie testów API</h2>
<p>Projektowanie testów API koncentruje się na weryfikacji poprawności działania interfejsów programistycznych aplikacji,
które stanowią fundament komunikacji między komponentami systemu. Dobrze zaprojektowane testy API zapewniają szybką i
niezawodną weryfikację logiki biznesowej.</p>
<h3>Podejście do projektowania testów API:</h3>
<ol>
<li><strong>Analiza dokumentacji API</strong>:</li>
<li>Przegląd specyfikacji API (Swagger/OpenAPI, RAML, dokumentacja tekstowa)</li>
<li>Zrozumienie dostępnych endpointów, parametrów i odpowiedzi</li>
<li>Identyfikacja kodów statusów i ich znaczenia</li>
<li>
<p>Analiza schematów danych JSON/XML</p>
</li>
<li>
<p><strong>Identyfikacja scenariuszy testowych</strong>:</p>
</li>
<li>Testy pozytywne (happy path) dla głównych operacji CRUD</li>
<li>Testy negatywne weryfikujące obsługę błędów i walidację</li>
<li>Testy graniczne sprawdzające limity parametrów</li>
<li>
<p>Testy wydajnościowe dla kluczowych endpointów i procesów</p>
</li>
<li>
<p><strong>Dekompozycja na przypadki testowe</strong>:</p>
</li>
<li>Grupowanie testów według zasobów/endpointów</li>
<li>Identyfikacja testów powiązanych (np. sekwencje create-read-update-delete)</li>
<li>Określenie zależności między testami</li>
<li>
<p>Ustalenie priorytetów testów</p>
</li>
<li>
<p><strong>Planowanie walidacji i asercji</strong>:</p>
</li>
<li>Weryfikacja statusu odpowiedzi HTTP</li>
<li>Walidacja struktury i schematu odpowiedzi</li>
<li>Sprawdzenie konkretnych wartości w odpowiedzi</li>
<li>Weryfikacja nagłówków (Content-Type, authorization)</li>
<li>
<p>Pomiar czasu odpowiedzi (SLA)</p>
</li>
<li>
<p><strong>Zarządzanie danymi testowymi</strong>:</p>
</li>
<li>Identyfikacja danych wejściowych wymaganych dla testów</li>
<li>Strategia tworzenia/usuwania danych testowych</li>
<li>Podejście do izolacji danych między testami</li>
<li>Obsługa zależności danych</li>
</ol>
<h3>Przykładowy proces projektowania testu API:</h3>
<p>Scenariusz biznesowy: "Weryfikacja pełnego cyklu życia użytkownika (tworzenie, odczyt, aktualizacja, usuwanie)"</p>
<ol>
<li><strong>Dekompozycja scenariusza</strong>:</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="mf">1.</span><span class="w"> </span><span class="n">Tworzenie</span><span class="w"> </span><span class="n">użytkownika</span><span class="w"> </span><span class="p">(</span><span class="nb">POS</span><span class="n">T</span><span class="w"> </span><span class="o">/</span><span class="n">api</span><span class="o">/</span><span class="n">users</span><span class="p">)</span><span class="w"></span>
<span class="w">   </span><span class="n">a</span><span class="mf">.</span><span class="w"> </span><span class="n">Pozytywne</span><span class="p">:</span><span class="w"> </span><span class="n">utworzenie</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="n">poprawnymi</span><span class="w"> </span><span class="n">danymi</span><span class="w"></span>
<span class="w">   </span><span class="n">b</span><span class="mf">.</span><span class="w"> </span><span class="n">Negatywne</span><span class="p">:</span><span class="w"> </span><span class="n">próba</span><span class="w"> </span><span class="n">utworzenia</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="n">brakującymi</span><span class="w"> </span><span class="n">polami</span><span class="w"></span>
<span class="w">   </span><span class="n">c</span><span class="mf">.</span><span class="w"> </span><span class="n">Negatywne</span><span class="p">:</span><span class="w"> </span><span class="n">próba</span><span class="w"> </span><span class="n">utworzenia</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="n">niepoprawnym</span><span class="w"> </span><span class="kr">for</span><span class="n">matem</span><span class="w"> </span><span class="n">danych</span><span class="w"></span>

<span class="mf">2.</span><span class="w"> </span><span class="n">Odczyt</span><span class="w"> </span><span class="n">użytkownika</span><span class="w"> </span><span class="p">(</span><span class="kr">GET</span><span class="w"> </span><span class="o">/</span><span class="n">api</span><span class="o">/</span><span class="n">users</span><span class="o">/</span><span class="err">{</span><span class="n">id</span><span class="err">}</span><span class="p">)</span><span class="w"></span>
<span class="w">   </span><span class="n">a</span><span class="mf">.</span><span class="w"> </span><span class="n">Pozytywne</span><span class="p">:</span><span class="w"> </span><span class="n">pobranie</span><span class="w"> </span><span class="n">istniejącego</span><span class="w"> </span><span class="n">użytkownika</span><span class="w"></span>
<span class="w">   </span><span class="n">b</span><span class="mf">.</span><span class="w"> </span><span class="n">Negatywne</span><span class="p">:</span><span class="w"> </span><span class="n">próba</span><span class="w"> </span><span class="n">pobrania</span><span class="w"> </span><span class="n">nieistniejącego</span><span class="w"> </span><span class="n">użytkownika</span><span class="w"></span>
<span class="w">   </span><span class="n">c</span><span class="mf">.</span><span class="w"> </span><span class="n">Weryfikacja</span><span class="w"> </span><span class="n">wszystkich</span><span class="w"> </span><span class="n">zwracanych</span><span class="w"> </span><span class="n">pól</span><span class="w"></span>

<span class="mf">3.</span><span class="w"> </span><span class="n">Aktualizacja</span><span class="w"> </span><span class="n">użytkownika</span><span class="w"> </span><span class="p">(</span><span class="n">PUT</span><span class="w"> </span><span class="o">/</span><span class="n">api</span><span class="o">/</span><span class="n">users</span><span class="o">/</span><span class="err">{</span><span class="n">id</span><span class="err">}</span><span class="p">)</span><span class="w"></span>
<span class="w">   </span><span class="n">a</span><span class="mf">.</span><span class="w"> </span><span class="n">Pozytywne</span><span class="p">:</span><span class="w"> </span><span class="n">pełna</span><span class="w"> </span><span class="n">aktualizacja</span><span class="w"> </span><span class="n">danych</span><span class="w"></span>
<span class="w">   </span><span class="n">b</span><span class="mf">.</span><span class="w"> </span><span class="n">Pozytywne</span><span class="p">:</span><span class="w"> </span><span class="n">częściowa</span><span class="w"> </span><span class="n">aktualizacja</span><span class="w"> </span><span class="n">danych</span><span class="w"> </span><span class="p">(</span><span class="n">PATCH</span><span class="p">)</span><span class="w"></span>
<span class="w">   </span><span class="n">c</span><span class="mf">.</span><span class="w"> </span><span class="n">Negatywne</span><span class="p">:</span><span class="w"> </span><span class="n">próba</span><span class="w"> </span><span class="n">aktualizacji</span><span class="w"> </span><span class="n">nieistniejącego</span><span class="w"> </span><span class="n">użytkownika</span><span class="w"></span>

<span class="mf">4.</span><span class="w"> </span><span class="n">Usuwanie</span><span class="w"> </span><span class="n">użytkownika</span><span class="w"> </span><span class="p">(</span><span class="n">DELETE</span><span class="w"> </span><span class="o">/</span><span class="n">api</span><span class="o">/</span><span class="n">users</span><span class="o">/</span><span class="err">{</span><span class="n">id</span><span class="err">}</span><span class="p">)</span><span class="w"></span>
<span class="w">   </span><span class="n">a</span><span class="mf">.</span><span class="w"> </span><span class="n">Pozytywne</span><span class="p">:</span><span class="w"> </span><span class="n">usunięcie</span><span class="w"> </span><span class="n">istniejącego</span><span class="w"> </span><span class="n">użytkownika</span><span class="w"></span>
<span class="w">   </span><span class="n">b</span><span class="mf">.</span><span class="w"> </span><span class="n">Negatywne</span><span class="p">:</span><span class="w"> </span><span class="n">próba</span><span class="w"> </span><span class="n">usunięcia</span><span class="w"> </span><span class="n">nieistniejącego</span><span class="w"> </span><span class="n">użytkownika</span><span class="w"></span>
<span class="w">   </span><span class="n">c</span><span class="mf">.</span><span class="w"> </span><span class="n">Weryfikacja</span><span class="p">,</span><span class="w"> </span><span class="n">że</span><span class="w"> </span><span class="n">usunięty</span><span class="w"> </span><span class="n">użytkownik</span><span class="w"> </span><span class="n">jest</span><span class="w"> </span><span class="n">niedostępny</span><span class="w"></span>
</code></pre></div>

<ol>
<li><strong>Identyfikacja danych testowych</strong>:</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="n">Dane</span><span class="w"> </span><span class="nl">użytkownika</span><span class="p">:</span><span class="w"></span>
<span class="o">-</span><span class="w"> </span><span class="n">Poprawny</span><span class="w"> </span><span class="nl">użytkownik</span><span class="p">:</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">    </span><span class="ss">&quot;firstName&quot;</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;Jan&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="ss">&quot;lastName&quot;</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;Kowalski&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="ss">&quot;email&quot;</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;john.kowalski@example.com&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="ss">&quot;roles&quot;</span><span class="err">:</span><span class="w"> </span><span class="o">[</span><span class="n">&quot;USER&quot;</span><span class="o">]</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>

<span class="o">-</span><span class="w"> </span><span class="n">Niepełne</span><span class="w"> </span><span class="nl">dane</span><span class="p">:</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">    </span><span class="ss">&quot;firstName&quot;</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;Jan&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="ss">&quot;email&quot;</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;john.incomplete@example.com&quot;</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>

<span class="o">-</span><span class="w"> </span><span class="n">Niepoprawny</span><span class="w"> </span><span class="nf">format</span><span class="err">:</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">    </span><span class="ss">&quot;firstName&quot;</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;Jan&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="ss">&quot;lastName&quot;</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;Kowalski&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="ss">&quot;email&quot;</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;invalid-email&quot;</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>

<span class="o">-</span><span class="w"> </span><span class="n">Dane</span><span class="w"> </span><span class="n">do</span><span class="w"> </span><span class="nl">aktualizacji</span><span class="p">:</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">    </span><span class="ss">&quot;firstName&quot;</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;Jan&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="ss">&quot;lastName&quot;</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;Updated&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="ss">&quot;email&quot;</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;jan.updated@example.com&quot;</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>
</code></pre></div>

<p>3<strong>Procedury walidacji</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="mf">1.</span><span class="w"> </span><span class="n">Walidacja</span><span class="w"> </span><span class="n">tworzenia</span><span class="p">:</span><span class="w"></span>
<span class="o">-</span><span class="w"> </span><span class="n">Status</span><span class="w"> </span><span class="mf">201</span><span class="w"> </span><span class="n">Created</span><span class="w"></span>
<span class="o">-</span><span class="w"> </span><span class="n">Odpowiedź</span><span class="w"> </span><span class="n">zawiera</span><span class="w"> </span><span class="n">ID</span><span class="w"> </span><span class="n">utworzonego</span><span class="w"> </span><span class="n">użytkownika</span><span class="w"></span>
<span class="o">-</span><span class="w"> </span><span class="n">Lokalizacja</span><span class="w"> </span><span class="p">(</span><span class="n">header</span><span class="w"> </span><span class="n">Location</span><span class="p">)</span><span class="w"> </span><span class="n">wskazuje</span><span class="w"> </span><span class="n">na</span><span class="w"> </span><span class="n">nowy</span><span class="w"> </span><span class="n">zasób</span><span class="w"></span>

<span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="n">Walidacja</span><span class="w"> </span><span class="n">odczytu</span><span class="p">:</span><span class="w"></span>
<span class="o">-</span><span class="w"> </span><span class="n">Status</span><span class="w"> </span><span class="mf">200</span><span class="w"> </span><span class="n">OK</span><span class="w"></span>
<span class="o">-</span><span class="w"> </span><span class="n">Wszystkie</span><span class="w"> </span><span class="n">pola</span><span class="w"> </span><span class="n">zgodne</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="n">oczekiwanymi</span><span class="w"></span>
<span class="o">-</span><span class="w"> </span><span class="kr">Cont</span><span class="n">ent</span><span class="o">-</span><span class="n">Type</span><span class="p">:</span><span class="w"> </span><span class="n">application</span><span class="o">/</span><span class="n">json</span><span class="w"></span>

<span class="mf">3.</span><span class="w"> </span><span class="n">Walidacja</span><span class="w"> </span><span class="n">aktualizacji</span><span class="p">:</span><span class="w"></span>
<span class="o">-</span><span class="w"> </span><span class="n">Status</span><span class="w"> </span><span class="mf">200</span><span class="w"> </span><span class="n">OK</span><span class="w"></span>
<span class="o">-</span><span class="w"> </span><span class="n">Pola</span><span class="w"> </span><span class="n">zaktualizowane</span><span class="w"> </span><span class="n">zgodnie</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="n">żądaniem</span><span class="w"></span>

<span class="mf">4.</span><span class="w"> </span><span class="n">Walidacja</span><span class="w"> </span><span class="n">usunięcia</span><span class="p">:</span><span class="w"></span>
<span class="o">-</span><span class="w"> </span><span class="n">Status</span><span class="w"> </span><span class="mf">204</span><span class="w"> </span><span class="n">No</span><span class="w"> </span><span class="kr">Cont</span><span class="n">ent</span><span class="w"></span>
<span class="o">-</span><span class="w"> </span><span class="n">Próba</span><span class="w"> </span><span class="n">odczytu</span><span class="w"> </span><span class="n">usuniętego</span><span class="w"> </span><span class="n">użytkownika</span><span class="w"> </span><span class="n">zwraca</span><span class="w"> </span><span class="mf">404</span><span class="w"></span>
</code></pre></div>

<ol>
<li><strong>Potencjalne wyzwania</strong>:</li>
</ol>
<div class="codehilite"><pre><span></span><code>- Zależności danych źródłowych
- Zarządzanie identyfikatorami między testami
- Kolejność wykonania testów (zależności pomiędzy procesami)
- Idempotentność testów (możliwość wielokrotnego uruchomienia)
- Zarządzanie danymi testowymi (czyszczenie)
</code></pre></div>

<h3>Projektowanie abstrakcji dla testów API:</h3>
<p>Przy projektowaniu testów API kluczowe jest stworzenie odpowiednich abstrakcji, które uczynią testy czytelnymi i
utrzymywalnymi.</p>
<ol>
<li><strong>Modele danych (DTOs)</strong>:</li>
<li>Klasy reprezentujące struktury danych używane w API</li>
<li>Adnotacje dla serializacji/deserializacji</li>
<li>Pola zgodne ze schematem API</li>
<li>
<p>Metody pomocnicze (np. factory methods, builders)</p>
</li>
<li>
<p><strong>Klasy klienckie API</strong>:</p>
</li>
<li>Metody odpowiadające operacjom API</li>
<li>Enkapsulacja szczegółów technicznych (nagłówki, serializacja)</li>
<li>Obsługa autentykacji</li>
<li>
<p>Obsługa rutynowych walidacji</p>
</li>
<li>
<p><strong>Przykładowa implementacja abstrakcji</strong>:</p>
</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="c1">// Model danych</span>
<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserDTO</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">id</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">firstName</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">lastName</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">email</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">roles</span><span class="p">;</span>

    <span class="c1">// Factory method dla typowych przypadków</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">UserDTO</span> <span class="nf">createDefault</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">UserDTO</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
            <span class="p">.</span><span class="na">firstName</span><span class="p">(</span><span class="s">&quot;jan&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="na">lastName</span><span class="p">(</span><span class="s">&quot;Kowalski&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="na">email</span><span class="p">(</span><span class="s">&quot;jan.kowalski@example.com&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="na">roles</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;USER&quot;</span><span class="p">))</span>
            <span class="p">.</span><span class="na">build</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Klient API</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserApiClient</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">BASE_PATH</span> <span class="o">=</span> <span class="s">&quot;/api/users&quot;</span><span class="p">;</span>

    <span class="kd">public</span> <span class="n">UserDTO</span> <span class="nf">createUser</span><span class="p">(</span><span class="n">UserDTO</span> <span class="n">user</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">RestAssured</span>
            <span class="p">.</span><span class="na">given</span><span class="p">()</span>
                <span class="p">.</span><span class="na">contentType</span><span class="p">(</span><span class="n">ContentType</span><span class="p">.</span><span class="na">JSON</span><span class="p">)</span>
                <span class="p">.</span><span class="na">body</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
            <span class="p">.</span><span class="na">when</span><span class="p">()</span>
                <span class="p">.</span><span class="na">post</span><span class="p">(</span><span class="n">BASE_PATH</span><span class="p">)</span>
            <span class="p">.</span><span class="na">then</span><span class="p">()</span>
                <span class="p">.</span><span class="na">statusCode</span><span class="p">(</span><span class="mi">201</span><span class="p">)</span>
                <span class="p">.</span><span class="na">extract</span><span class="p">().</span><span class="na">as</span><span class="p">(</span><span class="n">UserDTO</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="n">UserDTO</span> <span class="nf">getUserById</span><span class="p">(</span><span class="n">String</span> <span class="n">id</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">RestAssured</span>
            <span class="p">.</span><span class="na">given</span><span class="p">()</span>
                <span class="p">.</span><span class="na">pathParam</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">,</span> <span class="n">id</span><span class="p">)</span>
            <span class="p">.</span><span class="na">when</span><span class="p">()</span>
                <span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">BASE_PATH</span> <span class="o">+</span> <span class="s">&quot;/{id}&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="na">then</span><span class="p">()</span>
                <span class="p">.</span><span class="na">statusCode</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
                <span class="p">.</span><span class="na">extract</span><span class="p">().</span><span class="na">as</span><span class="p">(</span><span class="n">UserDTO</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="n">UserDTO</span> <span class="nf">updateUser</span><span class="p">(</span><span class="n">String</span> <span class="n">id</span><span class="p">,</span> <span class="n">UserDTO</span> <span class="n">user</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">RestAssured</span>
            <span class="p">.</span><span class="na">given</span><span class="p">()</span>
                <span class="p">.</span><span class="na">pathParam</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">,</span> <span class="n">id</span><span class="p">)</span>
                <span class="p">.</span><span class="na">contentType</span><span class="p">(</span><span class="n">ContentType</span><span class="p">.</span><span class="na">JSON</span><span class="p">)</span>
                <span class="p">.</span><span class="na">body</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
            <span class="p">.</span><span class="na">when</span><span class="p">()</span>
                <span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">BASE_PATH</span> <span class="o">+</span> <span class="s">&quot;/{id}&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="na">then</span><span class="p">()</span>
                <span class="p">.</span><span class="na">statusCode</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
                <span class="p">.</span><span class="na">extract</span><span class="p">().</span><span class="na">as</span><span class="p">(</span><span class="n">UserDTO</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">deleteUser</span><span class="p">(</span><span class="n">String</span> <span class="n">id</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">RestAssured</span>
            <span class="p">.</span><span class="na">given</span><span class="p">()</span>
                <span class="p">.</span><span class="na">pathParam</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">,</span> <span class="n">id</span><span class="p">)</span>
            <span class="p">.</span><span class="na">when</span><span class="p">()</span>
                <span class="p">.</span><span class="na">delete</span><span class="p">(</span><span class="n">BASE_PATH</span> <span class="o">+</span> <span class="s">&quot;/{id}&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="na">then</span><span class="p">()</span>
                <span class="p">.</span><span class="na">statusCode</span><span class="p">(</span><span class="mi">204</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h2>4.4. Implementacja testów</h2>
<p>Implementacja testów to proces przekształcania zaprojektowanych przypadków testowych w faktyczny kod testowy. Ten etap
wymaga zastosowania dobrych praktyk programistycznych, aby zapewnić, że testy będą skuteczne, niezawodne i łatwe w
utrzymaniu.</p>
<h3>Zasady implementacji testów:</h3>
<ol>
<li><strong>Struktura i organizacja kodu</strong>:
   *Logiczny podział kodu testowego na pakiety/moduły</li>
<li>Konsekwentne nazewnictwo klas i metod testowych</li>
<li>Grupowanie powiązanych testów</li>
<li>Hierarchia dziedziczenia dla wspólnej konfiguracji</li>
<li><strong>Standardy kodowania</strong>:</li>
<li>Zgodność z konwencjami języka i frameworka</li>
<li>Konsekwentne formatowanie kodu</li>
<li>Czytelny i samodokumentujący się kod</li>
<li>Odpowiednie komentarze dla złożonych scenariuszy</li>
<li><strong>Zasada AAA (Arrange-Act-Assert)</strong>:</li>
<li><strong>Arrange</strong>: przygotowanie stanu początkowego i danych testowych</li>
<li><strong>Act</strong>: wykonanie testowanej operacji</li>
<li><strong>Assert</strong>: weryfikacja wyników i stanu</li>
<li><strong>Separacja odpowiedzialności</strong>:</li>
<li>Oddzielenie logiki testowej od konfiguracji</li>
<li>Oddzielenie danych testowych od kodu testowego</li>
<li>Wykorzystanie wcześniej zaprojektowanych abstrakcji (Page Objects, klasy klienckie API)</li>
</ol>
<h3>Implementacja testów UI z Selenide:</h3>
<div class="codehilite"><pre><span></span><code><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;Login functionality tests&quot;</span><span class="p">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LoginTests</span> <span class="kd">extends</span> <span class="n">BaseTest</span> <span class="p">{</span>

    <span class="kd">private</span> <span class="n">LoginPage</span> <span class="n">loginPage</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">HomePage</span> <span class="n">homePage</span><span class="p">;</span>

    <span class="nd">@BeforeEach</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setUp</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Arrange</span>
        <span class="n">loginPage</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LoginPage</span><span class="p">();</span>
        <span class="n">loginPage</span><span class="p">.</span><span class="na">open</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="nd">@Test</span>
    <span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;User can login with valid credentials&quot;</span><span class="p">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">userCanLoginWithValidCredentials</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Act</span>
        <span class="n">homePage</span> <span class="o">=</span> <span class="n">loginPage</span><span class="p">.</span><span class="na">loginAs</span><span class="p">(</span><span class="s">&quot;validuser&quot;</span><span class="p">,</span> <span class="s">&quot;validpassword&quot;</span><span class="p">);</span>

        <span class="c1">// Assert</span>
        <span class="n">homePage</span><span class="p">.</span><span class="na">getUserInfoPanel</span><span class="p">().</span><span class="na">shouldHave</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s">&quot;Welcome, Valid User&quot;</span><span class="p">));</span>
        <span class="n">homePage</span><span class="p">.</span><span class="na">getNavigationMenu</span><span class="p">().</span><span class="na">shouldBe</span><span class="p">(</span><span class="n">visible</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nd">@Test</span>
    <span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;System shows error message for invalid credentials&quot;</span><span class="p">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">systemShowsErrorForInvalidCredentials</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Act</span>
        <span class="n">loginPage</span><span class="p">.</span><span class="na">loginExpectingError</span><span class="p">(</span><span class="s">&quot;invaliduser&quot;</span><span class="p">,</span> <span class="s">&quot;invalidpassword&quot;</span><span class="p">);</span>

        <span class="c1">// Assert</span>
        <span class="n">loginPage</span><span class="p">.</span><span class="na">getErrorMessage</span><span class="p">()</span>
            <span class="p">.</span><span class="na">shouldBe</span><span class="p">(</span><span class="n">visible</span><span class="p">)</span>
            <span class="p">.</span><span class="na">shouldHave</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s">&quot;Invalid username or password&quot;</span><span class="p">));</span>
        <span class="n">loginPage</span><span class="p">.</span><span class="na">getUsernameField</span><span class="p">().</span><span class="na">shouldHave</span><span class="p">(</span><span class="n">cssClass</span><span class="p">(</span><span class="s">&quot;input-error&quot;</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="nd">@Test</span>
    <span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;Password field masks user input&quot;</span><span class="p">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">passwordFieldMasksUserInput</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Act</span>
        <span class="n">loginPage</span><span class="p">.</span><span class="na">getPasswordField</span><span class="p">().</span><span class="na">setValue</span><span class="p">(</span><span class="s">&quot;testpassword&quot;</span><span class="p">);</span>

        <span class="c1">// Assert</span>
        <span class="n">loginPage</span><span class="p">.</span><span class="na">getPasswordField</span><span class="p">().</span><span class="na">shouldHave</span><span class="p">(</span><span class="n">attribute</span><span class="p">(</span><span class="s">&quot;type&quot;</span><span class="p">,</span> <span class="s">&quot;password&quot;</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="nd">@Test</span>
    <span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;User can reset password&quot;</span><span class="p">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">userCanResetPassword</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Act</span>
        <span class="n">PasswordResetPage</span> <span class="n">resetPage</span> <span class="o">=</span> <span class="n">loginPage</span><span class="p">.</span><span class="na">clickForgotPassword</span><span class="p">();</span>

        <span class="c1">// Assert</span>
        <span class="n">resetPage</span><span class="p">.</span><span class="na">getPageTitle</span><span class="p">().</span><span class="na">shouldHave</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s">&quot;Reset Your Password&quot;</span><span class="p">));</span>
        <span class="n">resetPage</span><span class="p">.</span><span class="na">getEmailField</span><span class="p">().</span><span class="na">shouldBe</span><span class="p">(</span><span class="n">visible</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3>Implementacja testów API z Rest Assured:</h3>
<div class="codehilite"><pre><span></span><code><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;User API integration tests&quot;</span><span class="p">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserApiTests</span> <span class="kd">extends</span> <span class="n">BaseApiTest</span> <span class="p">{</span>

    <span class="kd">private</span> <span class="n">UserApiClient</span> <span class="n">userApiClient</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">testUserId</span><span class="p">;</span>

    <span class="nd">@BeforeEach</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setUp</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Arrange</span>
        <span class="n">userApiClient</span> <span class="o">=</span> <span class="k">new</span> <span class="n">UserApiClient</span><span class="p">();</span>
        <span class="c1">// Przygotowanie danych testowych lub czyste środowisko</span>
        <span class="n">cleanupTestUsers</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="nd">@AfterEach</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">tearDown</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Cleanup</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">testUserId</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">try</span> <span class="p">{</span>
                <span class="n">userApiClient</span><span class="p">.</span><span class="na">deleteUser</span><span class="p">(</span><span class="n">testUserId</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">// Ignoruj błędy podczas czyszczenia</span>
                <span class="n">logger</span><span class="p">.</span><span class="na">warn</span><span class="p">(</span><span class="s">&quot;Error during test cleanup: &quot;</span> <span class="o">+</span> <span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">());</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nd">@Test</span>
    <span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;Can create a new user&quot;</span><span class="p">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">canCreateNewUser</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Arrange</span>
        <span class="n">UserDTO</span> <span class="n">newUser</span> <span class="o">=</span> <span class="n">UserDTO</span><span class="p">.</span><span class="na">createDefault</span><span class="p">();</span>

        <span class="c1">// Act</span>
        <span class="n">UserDTO</span> <span class="n">createdUser</span> <span class="o">=</span> <span class="n">userApiClient</span><span class="p">.</span><span class="na">createUser</span><span class="p">(</span><span class="n">newUser</span><span class="p">);</span>
        <span class="n">testUserId</span> <span class="o">=</span> <span class="n">createdUser</span><span class="p">.</span><span class="na">getId</span><span class="p">();</span>

        <span class="c1">// Assert</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">createdUser</span><span class="p">.</span><span class="na">getId</span><span class="p">()).</span><span class="na">isNotNull</span><span class="p">();</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">createdUser</span><span class="p">.</span><span class="na">getEmail</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">newUser</span><span class="p">.</span><span class="na">getEmail</span><span class="p">());</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">createdUser</span><span class="p">.</span><span class="na">getRoles</span><span class="p">()).</span><span class="na">containsExactlyElementsOf</span><span class="p">(</span><span class="n">newUser</span><span class="p">.</span><span class="na">getRoles</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="nd">@Test</span>
    <span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;Can retrieve user by ID&quot;</span><span class="p">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">canRetrieveUserById</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Arrange</span>
        <span class="n">UserDTO</span> <span class="n">newUser</span> <span class="o">=</span> <span class="n">UserDTO</span><span class="p">.</span><span class="na">createDefault</span><span class="p">();</span>
        <span class="n">UserDTO</span> <span class="n">createdUser</span> <span class="o">=</span> <span class="n">userApiClient</span><span class="p">.</span><span class="na">createUser</span><span class="p">(</span><span class="n">newUser</span><span class="p">);</span>
        <span class="n">testUserId</span> <span class="o">=</span> <span class="n">createdUser</span><span class="p">.</span><span class="na">getId</span><span class="p">();</span>

        <span class="c1">// Act</span>
        <span class="n">UserDTO</span> <span class="n">retrievedUser</span> <span class="o">=</span> <span class="n">userApiClient</span><span class="p">.</span><span class="na">getUserById</span><span class="p">(</span><span class="n">testUserId</span><span class="p">);</span>

        <span class="c1">// Assert</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">retrievedUser</span><span class="p">).</span><span class="na">isNotNull</span><span class="p">();</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">retrievedUser</span><span class="p">.</span><span class="na">getId</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">testUserId</span><span class="p">);</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">retrievedUser</span><span class="p">.</span><span class="na">getFirstName</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">newUser</span><span class="p">.</span><span class="na">getFirstName</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="nd">@Test</span>
    <span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;Cannot create user with invalid email&quot;</span><span class="p">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">cannotCreateUserWithInvalidEmail</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Arrange</span>
        <span class="n">UserDTO</span> <span class="n">invalidUser</span> <span class="o">=</span> <span class="n">UserDTO</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
            <span class="p">.</span><span class="na">firstName</span><span class="p">(</span><span class="s">&quot;Jan&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="na">lastName</span><span class="p">(</span><span class="s">&quot;Kowalski&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="na">email</span><span class="p">(</span><span class="s">&quot;invalid-email&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="na">roles</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;USER&quot;</span><span class="p">))</span>
            <span class="p">.</span><span class="na">build</span><span class="p">();</span>

        <span class="c1">// Act &amp; Assert</span>
        <span class="n">ValidationErrorResponse</span> <span class="n">errorResponse</span> <span class="o">=</span> <span class="n">RestAssured</span>
            <span class="p">.</span><span class="na">given</span><span class="p">()</span>
                <span class="p">.</span><span class="na">contentType</span><span class="p">(</span><span class="n">ContentType</span><span class="p">.</span><span class="na">JSON</span><span class="p">)</span>
                <span class="p">.</span><span class="na">body</span><span class="p">(</span><span class="n">invalidUser</span><span class="p">)</span>
            <span class="p">.</span><span class="na">when</span><span class="p">()</span>
                <span class="p">.</span><span class="na">post</span><span class="p">(</span><span class="s">&quot;/api/users&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="na">then</span><span class="p">()</span>
                <span class="p">.</span><span class="na">statusCode</span><span class="p">(</span><span class="mi">400</span><span class="p">)</span>
                <span class="p">.</span><span class="na">extract</span><span class="p">().</span><span class="na">as</span><span class="p">(</span><span class="n">ValidationErrorResponse</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>

        <span class="n">assertThat</span><span class="p">(</span><span class="n">errorResponse</span><span class="p">.</span><span class="na">getErrors</span><span class="p">())</span>
            <span class="p">.</span><span class="na">anyMatch</span><span class="p">(</span><span class="n">error</span> <span class="o">-&gt;</span> <span class="n">error</span><span class="p">.</span><span class="na">getField</span><span class="p">().</span><span class="na">equals</span><span class="p">(</span><span class="s">&quot;email&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> 
                     <span class="n">error</span><span class="p">.</span><span class="na">getMessage</span><span class="p">().</span><span class="na">contains</span><span class="p">(</span><span class="s">&quot;valid email&quot;</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="nd">@Test</span>
    <span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;Can update existing user&quot;</span><span class="p">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">canUpdateExistingUser</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Arrange</span>
        <span class="n">UserDTO</span> <span class="n">newUser</span> <span class="o">=</span> <span class="n">UserDTO</span><span class="p">.</span><span class="na">createDefault</span><span class="p">();</span>
        <span class="n">UserDTO</span> <span class="n">createdUser</span> <span class="o">=</span> <span class="n">userApiClient</span><span class="p">.</span><span class="na">createUser</span><span class="p">(</span><span class="n">newUser</span><span class="p">);</span>
        <span class="n">testUserId</span> <span class="o">=</span> <span class="n">createdUser</span><span class="p">.</span><span class="na">getId</span><span class="p">();</span>

        <span class="n">UserDTO</span> <span class="n">updatedData</span> <span class="o">=</span> <span class="n">UserDTO</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
            <span class="p">.</span><span class="na">firstName</span><span class="p">(</span><span class="s">&quot;Updated&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="na">lastName</span><span class="p">(</span><span class="s">&quot;User&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="na">email</span><span class="p">(</span><span class="s">&quot;updated.user@example.com&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="na">roles</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;USER&quot;</span><span class="p">,</span> <span class="s">&quot;ADMIN&quot;</span><span class="p">))</span>
            <span class="p">.</span><span class="na">build</span><span class="p">();</span>

        <span class="c1">// Act</span>
        <span class="n">UserDTO</span> <span class="n">updatedUser</span> <span class="o">=</span> <span class="n">userApiClient</span><span class="p">.</span><span class="na">updateUser</span><span class="p">(</span><span class="n">testUserId</span><span class="p">,</span> <span class="n">updatedData</span><span class="p">);</span>

        <span class="c1">// Assert</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">updatedUser</span><span class="p">.</span><span class="na">getFirstName</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;Updated&quot;</span><span class="p">);</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">updatedUser</span><span class="p">.</span><span class="na">getLastName</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;User&quot;</span><span class="p">);</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">updatedUser</span><span class="p">.</span><span class="na">getEmail</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;updated.user@example.com&quot;</span><span class="p">);</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">updatedUser</span><span class="p">.</span><span class="na">getRoles</span><span class="p">()).</span><span class="na">contains</span><span class="p">(</span><span class="s">&quot;ADMIN&quot;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3>Zaawansowane techniki implementacji:</h3>
<ol>
<li><strong>Parametryzacja testów</strong>:</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="nd">@ParameterizedTest</span>
<span class="nd">@CsvSource</span><span class="p">({</span>
    <span class="s">&quot;Chrome, 1920x1080&quot;</span><span class="p">,</span>
    <span class="s">&quot;Firefox, 1366x768&quot;</span><span class="p">,</span>
    <span class="s">&quot;Edge, 1600x900&quot;</span>
<span class="p">})</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">loginShouldWorkOnDifferentBrowsers</span><span class="p">(</span><span class="n">String</span> <span class="n">browser</span><span class="p">,</span> <span class="n">String</span> <span class="n">resolution</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Konfiguracja specyficzna dla przeglądarki</span>
    <span class="n">configureTest</span><span class="p">(</span><span class="n">browser</span><span class="p">,</span> <span class="n">resolution</span><span class="p">);</span>

    <span class="c1">// Test logowania</span>
    <span class="n">loginPage</span><span class="p">.</span><span class="na">open</span><span class="p">();</span>
    <span class="n">homePage</span> <span class="o">=</span> <span class="n">loginPage</span><span class="p">.</span><span class="na">loginAs</span><span class="p">(</span><span class="s">&quot;validuser&quot;</span><span class="p">,</span> <span class="s">&quot;validpassword&quot;</span><span class="p">);</span>

    <span class="c1">// Asercje</span>
    <span class="n">homePage</span><span class="p">.</span><span class="na">getUserInfoPanel</span><span class="p">().</span><span class="na">shouldBe</span><span class="p">(</span><span class="n">visible</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<ol>
<li><strong>Obsługa danych zależnych od środowiska</strong>:</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">canCreateUserInDifferentEnvironments</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Odczyt konfiguracji środowiska</span>
    <span class="n">String</span> <span class="n">environment</span> <span class="o">=</span> <span class="n">getEnvironmentConfig</span><span class="p">();</span>
    <span class="n">UserDTO</span> <span class="n">userData</span> <span class="o">=</span> <span class="n">TestDataFactory</span><span class="p">.</span><span class="na">createUserForEnvironment</span><span class="p">(</span><span class="n">environment</span><span class="p">);</span>

    <span class="c1">// Wykonanie testu</span>
    <span class="n">UserDTO</span> <span class="n">createdUser</span> <span class="o">=</span> <span class="n">userApiClient</span><span class="p">.</span><span class="na">createUser</span><span class="p">(</span><span class="n">userData</span><span class="p">);</span>

    <span class="c1">// Asercje specyficzne dla środowiska</span>
    <span class="k">if</span> <span class="p">(</span><span class="s">&quot;prod&quot;</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">environment</span><span class="p">))</span> <span class="p">{</span>
        <span class="c1">// Dodatkowe weryfikacje dla produkcji</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">createdUser</span><span class="p">.</span><span class="na">getVerificationStatus</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;PENDING&quot;</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// Weryfikacje dla środowisk testowych</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">createdUser</span><span class="p">.</span><span class="na">getVerificationStatus</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;AUTO_VERIFIED&quot;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<ol>
<li><strong>Obsługa asynchroniczności</strong>:</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">orderShouldBeProcessedAsynchronously</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Utworzenie zamówienia</span>
    <span class="n">OrderDTO</span> <span class="n">order</span> <span class="o">=</span> <span class="n">orderApiClient</span><span class="p">.</span><span class="na">createOrder</span><span class="p">(</span><span class="n">TestDataFactory</span><span class="p">.</span><span class="na">createOrder</span><span class="p">());</span>

    <span class="c1">// Oczekiwanie na przetworzenie asynchroniczne</span>
    <span class="n">Awaitility</span><span class="p">.</span><span class="na">await</span><span class="p">()</span>
        <span class="p">.</span><span class="na">atMost</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="n">TimeUnit</span><span class="p">.</span><span class="na">SECONDS</span><span class="p">)</span>
        <span class="p">.</span><span class="na">pollInterval</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">TimeUnit</span><span class="p">.</span><span class="na">SECONDS</span><span class="p">)</span>
        <span class="p">.</span><span class="na">until</span><span class="p">(()</span> <span class="o">-&gt;</span> <span class="p">{</span>
            <span class="n">OrderDTO</span> <span class="n">currentStatus</span> <span class="o">=</span> <span class="n">orderApiClient</span><span class="p">.</span><span class="na">getOrderById</span><span class="p">(</span><span class="n">order</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span>
            <span class="k">return</span> <span class="s">&quot;PROCESSED&quot;</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">currentStatus</span><span class="p">.</span><span class="na">getStatus</span><span class="p">());</span>
        <span class="p">});</span>

    <span class="c1">// Weryfikacja finalnego stanu</span>
    <span class="n">OrderDTO</span> <span class="n">processedOrder</span> <span class="o">=</span> <span class="n">orderApiClient</span><span class="p">.</span><span class="na">getOrderById</span><span class="p">(</span><span class="n">order</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span>
    <span class="n">assertThat</span><span class="p">(</span><span class="n">processedOrder</span><span class="p">.</span><span class="na">getStatus</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;PROCESSED&quot;</span><span class="p">);</span>
    <span class="n">assertThat</span><span class="p">(</span><span class="n">processedOrder</span><span class="p">.</span><span class="na">getProcessingTime</span><span class="p">()).</span><span class="na">isGreaterThan</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<ol>
<li><strong>Obsługa testów wymagających specjalnych uprawnień</strong>:</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="nd">@Test</span>
<span class="nd">@WithMockUser</span><span class="p">(</span><span class="n">roles</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;ADMIN&quot;</span><span class="p">})</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">adminCanAccessRestrictedContent</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Wykonanie akcji wymagającej uprawnień administratora</span>
    <span class="n">AdminDashboardPage</span> <span class="n">adminPage</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AdminDashboardPage</span><span class="p">();</span>
    <span class="n">adminPage</span><span class="p">.</span><span class="na">open</span><span class="p">();</span>

    <span class="c1">// Weryfikacja dostępu</span>
    <span class="n">adminPage</span><span class="p">.</span><span class="na">getUserManagementPanel</span><span class="p">().</span><span class="na">shouldBe</span><span class="p">(</span><span class="n">visible</span><span class="p">);</span>
    <span class="n">adminPage</span><span class="p">.</span><span class="na">getSystemConfigurationPanel</span><span class="p">().</span><span class="na">shouldBe</span><span class="p">(</span><span class="n">visible</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<h2>4.5. Weryfikacja i utrzymanie testów</h2>
<p>Weryfikacja i utrzymanie testów to ciągły proces zapewniający, że zautomatyzowane testy pozostają efektywne, niezawodne
i aktualne w miarę ewolucji testowanej aplikacji. Jest to krytyczny aspekt automatyzacji testów, często pochłaniający
znaczącą część całkowitego nakładu pracy.</p>
<h3>Weryfikacja testów automatycznych:</h3>
<ol>
<li><strong>Podstawowe kryteria weryfikacji</strong>:</li>
<li><strong>Dokładność</strong>: Test powinien prawidłowo weryfikować implementowaną funkcjonalność</li>
<li><strong>Niezawodność</strong>: Test powinien dawać spójne wyniki przy tych samych warunkach</li>
<li><strong>Wydajność</strong>: Test powinien wykonywać się w rozsądnym czasie</li>
<li><strong>Czytelność</strong>: Kod testu powinien być zrozumiały dla innych członków zespołu</li>
<li>
<p><strong>Utrzymywalność</strong>: Test powinien być łatwy do aktualizacji po zmianach w aplikacji</p>
</li>
<li>
<p><strong>Proces weryfikacji testów</strong>:</p>
</li>
<li><strong>Code review</strong>: Przegląd kodu testowego przez innych członków zespołu</li>
<li><strong>Test testów</strong>: Weryfikacja, że test wykrywa błędy, gdy są wprowadzane (np. negative testing)</li>
<li><strong>Kontrolowane uruchomienia</strong>: Sprawdzanie zachowania testów w różnych środowiskach</li>
<li><strong>Analiza stabilności</strong>: Wielokrotne uruchamianie testów w celu wykrycia flakiness</li>
<li>
<p><strong>Peer validation</strong>: Weryfikacja przez drugiego testera, czy test pokrywa wszystkie wymagania</p>
</li>
<li>
<p><strong>Weryfikacja testów UI</strong>:</p>
</li>
<li>Sprawdzenie, czy testy Selenium/Selenide poprawnie odzwierciedlają interakcje użytkownika</li>
<li>Weryfikacja mechanizmów synchronizacji i oczekiwania</li>
<li>Kontrola nad stanem przeglądarki i sesji użytkownika</li>
<li>
<p>Walidacja asercji i punktów weryfikacji</p>
</li>
<li>
<p><strong>Weryfikacja testów API</strong>:</p>
</li>
<li>Sprawdzenie pokrycia wszystkich ważnych ścieżek i parametrów</li>
<li>Weryfikacja poprawności schematów walidacji</li>
<li>Kontrola nad przygotowaniem i czyszczeniem danych testowych</li>
<li>Walidacja obsługi błędów i przypadków granicznych</li>
</ol>
<h3>Utrzymanie testów automatycznych:</h3>
<ol>
<li><strong>Monitorowanie zdrowia testów</strong>:</li>
<li>Śledzenie wskaźnika przechodzenia testów (pass rate)</li>
<li>Identyfikacja niestabilnych testów (flaky tests)</li>
<li>Monitorowanie czasu wykonania</li>
<li>
<p>Analiza trendów porażek testów</p>
</li>
<li>
<p><strong>Proces refaktoryzacji testów</strong>:</p>
</li>
<li>Regularne przeglądy i udoskonalanie kodu testowego</li>
<li>Eliminacja duplikacji w testach</li>
<li>Aktualizacja lokalizatorów elementów UI</li>
<li>Optymalizacja wydajności testów</li>
<li>
<p>Aplikowanie najnowszych wzorców i dobrych praktyk</p>
</li>
<li>
<p><strong>Aktualizacja testów po zmianach w aplikacji</strong>:</p>
</li>
<li>Systematyczny przegląd i aktualizacja testów po każdej znaczącej zmianie</li>
<li>Utrzymanie synchronizacji między specyfikacją, dokumentacją a testami</li>
<li>Weryfikacja aktualności danych testowych</li>
<li>
<p>Dostosowanie testów do nowych funkcji i przepływów</p>
</li>
<li>
<p><strong>Zarządzanie problemami z testami</strong>:</p>
</li>
<li>Procesy zgłaszania i śledzenia problemów z testami</li>
<li>Priorytetyzacja napraw testów</li>
<li>Analiza głównych przyczyn niestabilności</li>
<li>Dokumentacja znanych problemów i obejść</li>
</ol>
<h3>Strategie obsługi niestabilnych testów (flaky tests):</h3>
<ol>
<li><strong>Identyfikacja i klasyfikacja</strong>:</li>
<li>Systematyczne gromadzenie danych o niestabilnych testach</li>
<li>Analiza wzorców niestabilności (sporadyczna, cykliczna, środowiskowa)</li>
<li>Klasyfikacja według przyczyn niestabilności</li>
<li>
<p>Ocena wpływu na ogólną wiarygodność zestawu testów</p>
</li>
<li>
<p><strong>Techniki stabilizacji testów UI</strong>:</p>
</li>
<li>
<p>Implementacja inteligentnych mechanizmów oczekiwania</p>
</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="c1">// Zamiast:</span>
<span class="n">Thread</span><span class="p">.</span><span class="na">sleep</span><span class="p">(</span><span class="mi">2000</span><span class="p">);</span>

<span class="c1">// użyj::</span>
<span class="n">$</span><span class="p">(</span><span class="s">&quot;#loadingIndicator&quot;</span><span class="p">).</span><span class="na">shouldBe</span><span class="p">(</span><span class="n">disappear</span><span class="p">,</span> <span class="n">Duration</span><span class="p">.</span><span class="na">ofSeconds</span><span class="p">(</span><span class="mi">10</span><span class="p">));</span>
<span class="n">$</span><span class="p">(</span><span class="s">&quot;#content&quot;</span><span class="p">).</span><span class="na">shouldBe</span><span class="p">(</span><span class="n">visible</span><span class="p">);</span>
</code></pre></div>

<ul>
<li>Stosowanie bardziej niezawodnych lokalizatorów</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="c1">// Zamiast:</span>
<span class="n">$</span><span class="p">(</span><span class="s">&quot;div.user-list div:nth-child(3)&quot;</span><span class="p">);</span>

<span class="c1">// Lepsze rozwiązanie:</span>
<span class="n">$</span><span class="p">(</span><span class="s">&quot;div.user-list&quot;</span><span class="p">).</span><span class="na">find</span><span class="p">(</span><span class="n">byText</span><span class="p">(</span><span class="s">&quot;John Kowalski&quot;</span><span class="p">));</span>
</code></pre></div>

<ul>
<li>Implementacja mechanizmów retry</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="nd">@Test</span>
<span class="nd">@Retries</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="c1">// Ponów test do 3 razy w przypadku awarii</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">flakySynchronizationTest</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Test code</span>
<span class="p">}</span>
</code></pre></div>

<ul>
<li>Izolacja stanu testowego</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="nd">@BeforeEach</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">ensureCleanState</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Czyszczenie stanu, resetowanie danych, itp.</span>
    <span class="n">clearBrowserState</span><span class="p">();</span>
    <span class="n">loginWithFreshUser</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>

<ol>
<li>
<p><strong>Techniki stabilizacji testów API</strong>:</p>
</li>
<li>
<p>Implementacja mechanizmów idempotentności</p>
</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="nd">@BeforeEach</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">ensureTestEntityExists</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Sprawdź, czy encja już istnieje, w przeciwnym razie utwórz</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">entityExists</span><span class="p">(</span><span class="n">TEST_ENTITY_ID</span><span class="p">))</span> <span class="p">{</span>
        <span class="n">createEntity</span><span class="p">(</span><span class="n">TEST_ENTITY_ID</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<ul>
<li>Obsługa Race Condition</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="c1">// Zamiast oczekiwać natychmiastowych wyników</span>
<span class="n">OrderDTO</span> <span class="n">order</span> <span class="o">=</span> <span class="n">orderApiClient</span><span class="p">.</span><span class="na">createOrder</span><span class="p">(</span><span class="n">newOrder</span><span class="p">);</span>
<span class="n">assertThat</span><span class="p">(</span><span class="n">order</span><span class="p">.</span><span class="na">getStatus</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;PROCESSED&quot;</span><span class="p">);</span> <span class="c1">// Może zawieść!</span>

<span class="c1">// Lepsze rozwiązanie z oczekiwaniem</span>
<span class="n">OrderDTO</span> <span class="n">createdOrder</span> <span class="o">=</span> <span class="n">orderApiClient</span><span class="p">.</span><span class="na">createOrder</span><span class="p">(</span><span class="n">newOrder</span><span class="p">);</span>
<span class="n">await</span><span class="p">().</span><span class="na">atMost</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">SECONDS</span><span class="p">).</span><span class="na">until</span><span class="p">(()</span> <span class="o">-&gt;</span> <span class="p">{</span>
    <span class="n">OrderDTO</span> <span class="n">current</span> <span class="o">=</span> <span class="n">orderApiClient</span><span class="p">.</span><span class="na">getOrderById</span><span class="p">(</span><span class="n">createdOrder</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span>
    <span class="k">return</span> <span class="s">&quot;PROCESSED&quot;</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">current</span><span class="p">.</span><span class="na">getStatus</span><span class="p">());</span>
<span class="p">});</span>
</code></pre></div>

<ul>
<li>Izolacja od zależności zewnętrznych</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="c1">// Użycie mocków dla niepewnych zewnętrznych zależności</span>
<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">testWithMockedExternalDependency</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Skonfiguruj mock zewnętrznego API</span>
    <span class="n">wireMockServer</span><span class="p">.</span><span class="na">stubFor</span><span class="p">(</span><span class="n">post</span><span class="p">(</span><span class="n">urlEqualTo</span><span class="p">(</span><span class="s">&quot;/external/api&quot;</span><span class="p">))</span>
        <span class="p">.</span><span class="na">willReturn</span><span class="p">(</span><span class="n">aResponse</span><span class="p">()</span>
            <span class="p">.</span><span class="na">withStatus</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
            <span class="p">.</span><span class="na">withBody</span><span class="p">(</span><span class="s">&quot;{\&quot;result\&quot;: \&quot;success\&quot;}&quot;</span><span class="p">)));</span>

    <span class="c1">// Test używający zamockowanego API</span>
    <span class="n">assertThat</span><span class="p">(</span><span class="n">ourService</span><span class="p">.</span><span class="na">processWithExternalDependency</span><span class="p">()).</span><span class="na">isSuccessful</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>

<ol>
<li>
<p><strong>Zarządzanie nienaprawialnymi testami</strong>:</p>
</li>
<li>
<p>Kwarantanna dla niestabilnych testów</p>
</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="nd">@Tag</span><span class="p">(</span><span class="s">&quot;flaky&quot;</span><span class="p">)</span> <span class="c1">// Oznaczenie testu jako niestabilnego</span>
<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">knownFlakyTest</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Test code</span>
<span class="p">}</span>
<span class="c1">// W konfiguracji uruchomienia:</span>
<span class="c1">// mvn test -Dgroups=!flaky // Wykluczenie niestabilnych testów z głównego przebiegu</span>
</code></pre></div>

<ul>
<li>Dokumentacja znanych problemów</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * This test may fail intermittently due to network latency issues with the third-party API.</span>
<span class="cm"> * Issue tracked in JIRA-1234.</span>
<span class="cm"> * Workaround: Retry the test up to 3 times with 5-second intervals.</span>
<span class="cm"> */</span>
<span class="nd">@Test</span>
<span class="nd">@Retries</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">testWithKnownNetworkIssues</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Test code</span>
<span class="p">}</span>
</code></pre></div>

<ul>
<li>Priorytetyzacja napraw</li>
</ul>
<div class="codehilite"><pre><span></span><code>Kategorie priorytetów napraw:
P0: Krytyczne testy mające wpływ na główne funkcjonalności - naprawić natychmiast
P1: Ważne testy biznesowe - naprawić w bieżącym sprincie
P2: Testy pomocnicze - naprawić w ciągu 2 sprintów
P3: Testy niekrytyczne - rozważyć refaktoryzację lub usunięcie
</code></pre></div>

<h3>Dokumentacja i dzielenie się wiedzą:</h3>
<ol>
<li><strong>Dokumentacja frameworka testowego</strong>:</li>
<li>Opis architektury i głównych komponentów</li>
<li>Przewodniki dla nowych członków zespołu</li>
<li>Standardy i konwencje kodowania</li>
<li>Rozwiązania typowych problemów</li>
<li><strong>Dokumentacja konkretnych testów</strong>:</li>
<li>Mapowanie testów do wymagań biznesowych</li>
<li>Opis scenariuszy testowych i ich celów</li>
<li>Dokumentacja znanych ograniczeń i założeń</li>
<li>Instrukcje uruchamiania i interpretacji wyników</li>
<li><strong>Rozpowszechnianie dobrych praktyk</strong>:</li>
<li>Wewnętrzne warsztaty i szkolenia</li>
<li>Biblioteki przykładów i wzorców</li>
<li>Regularne spotkania przeglądowe</li>
<li>Współpraca między zespołami automatyzacji</li>
</ol>
<h3>Strategie ciągłego doskonalenia:</h3>
<ol>
<li><strong>Regularne przeglądy jakości testów</strong>:</li>
<li>Sesje analizy metryk testowych</li>
<li>Weryfikacja skuteczności testów w wykrywaniu defektów</li>
<li>Ocena utrzymywalności i stabilności testów</li>
<li>Identyfikacja możliwości optymalizacji</li>
<li><strong>Wprowadzanie nowych technologii i podejść</strong>:</li>
<li>Ewaluacja nowych narzędzi i frameworków</li>
<li>Testowanie pilotażowe nowych rozwiązań</li>
<li>Zbieranie informacji zwrotnej i analiza korzyści</li>
<li>Planowanie migracji i aktualizacji</li>
<li><strong>Dostosowanie strategii do ewolucji aplikacji</strong>:</li>
<li>Dostosowanie zakresu automatyzacji do zmieniających się priorytetów</li>
<li>Rewaluacja ryzyka biznesowego i technicznego</li>
<li>Równoważenie wysiłków między tworzeniem nowych testów a utrzymaniem istniejących</li>
<li>Dostosowanie metodyki do nowych wzorców architektonicznych</li>
</ol>
<p>Skuteczna weryfikacja i utrzymanie testów automatycznych wymaga systematycznego podejścia, odpowiednich procesów i
narzędzi, a także stałego zaangażowania zespołu. Jest to inwestycja, która zwraca się w postaci bardziej niezawodnych
testów, szybszej identyfikacji defektów i zwiększonej efektywności procesu testowania.</p>
<h1>5. Architektura frameworka testowego</h1>
<h2>5.1. Page Object Model dla testów UI</h2>
<p>Page Object Model (POM) to wzorzec projektowy stosowany w automatyzacji testów UI, który tworzy warstwę abstrakcji
oddzielającą logikę testową od szczegółów implementacji interfejsu użytkownika. Jest to kluczowy element architektury
frameworka testowego, zapewniający utrzymywalność, czytelność i skalowalność testów UI.</p>
<h3>Główne zasady Page Object Model:</h3>
<ol>
<li><strong>Enkapsulacja elementów strony</strong>:</li>
<li>Każda strona lub komponent UI reprezentowany jest przez oddzielną klasę</li>
<li>Selektory i lokalizatory elementów są zdefiniowane tylko w jednym miejscu</li>
<li>
<p>Szczegóły techniczne implementacji UI są ukryte przed testami</p>
</li>
<li>
<p><strong>Rozdzielenie odpowiedzialności</strong>:</p>
</li>
<li>Klasy Page Object reprezentują strukturę UI i dostępne akcje</li>
<li>Testy wykorzystują Page Objects do interakcji z UI</li>
<li>
<p>Logika weryfikacji jest oddzielona od manipulacji elementami</p>
</li>
<li>
<p><strong>Reprezentacja przepływów biznesowych</strong>:</p>
</li>
<li>Metody w Page Objects odzwierciedlają akcje użytkownika</li>
<li>Nawigacja między stronami zwraca obiekty reprezentujące docelowe strony</li>
<li>Interfejs Page Object powinien używać terminologii biznesowej (języka domeny)</li>
</ol>
<h3>Implementacja POM z wykorzystaniem Selenide:</h3>
<h4>Struktura hierarchiczna Page Objects:</h4>
<div class="codehilite"><pre><span></span><code>src/test/java/com/company/pageobjects/
├── base/
│   ├── BasePage.java             // Abstrakcyjna klasa bazowa dla wszystkich stron
│   ├── BaseComponent.java        // Abstrakcyjna klasa bazowa dla komponentów
│   └── PageFactory.java          // Fabryka tworząca instancje Page Objects
├── pages/
│   ├── LoginPage.java            // Konkretna strona logowania
│   ├── DashboardPage.java        // Strona głównego panelu
│   ├── ProductPage.java          // Strona produktu
│   └── CheckoutPage.java         // Strona koszyka/zamówienia
└── components/
    ├── NavigationMenu.java       // Komponent menu nawigacyjnego
    ├── SearchBar.java            // Komponent wyszukiwarki
    ├── UserInfoPanel.java        // Panel informacji o użytkowniku
    └── ProductTile.java          // Pojedynczy kafelek produktu
</code></pre></div>

<h4>Przykładowa implementacja klasy bazowej:</h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * Abstrakcyjna klasa bazowa dla wszystkich Page Objects.</span>
<span class="cm"> * Zawiera wspólną funkcjonalność i właściwości wszystkich stron aplikacji.</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">BasePage</span> <span class="p">{</span>

    <span class="kd">protected</span> <span class="n">SelenideElement</span> <span class="n">pageRoot</span><span class="p">;</span> <span class="c1">// Główny element identyfikujący stronę</span>

    <span class="cm">/**</span>
<span class="cm">     * Weryfikuje, czy strona jest załadowana i gotowa do interakcji.</span>
<span class="cm">     * Każda konkretna strona implementuje własną logikę weryfikacji.</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">abstract</span> <span class="kt">boolean</span> <span class="nf">isPageLoaded</span><span class="p">();</span>

    <span class="cm">/**</span>
<span class="cm">     * Metoda do oczekiwania na załadowanie strony.</span>
<span class="cm">     * @param timeout Maksymalny czas oczekiwania w sekundach</span>
<span class="cm">     * @return Ten sam obiekt strony (fluent interface)</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="n">BasePage</span> <span class="nf">waitForPageToLoad</span><span class="p">(</span><span class="kt">int</span> <span class="n">timeout</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Implementacja oczekiwania specyficzna dla projektu</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="n">await</span><span class="p">().</span><span class="na">atMost</span><span class="p">(</span><span class="n">timeout</span><span class="p">,</span> <span class="n">TimeUnit</span><span class="p">.</span><span class="na">SECONDS</span><span class="p">)</span>
                   <span class="p">.</span><span class="na">pollInterval</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="n">TimeUnit</span><span class="p">.</span><span class="na">MILLISECONDS</span><span class="p">)</span>
                   <span class="p">.</span><span class="na">until</span><span class="p">(</span><span class="k">this</span><span class="p">::</span><span class="n">isPageLoaded</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">fail</span><span class="p">(</span><span class="s">&quot;Page did not load within &quot;</span> <span class="o">+</span> <span class="n">timeout</span> <span class="o">+</span> <span class="s">&quot; seconds: &quot;</span> <span class="o">+</span> <span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">());</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Wykonuje zrzut ekranu aktualnej strony.</span>
<span class="cm">     * @param fileName Nazwa pliku zrzutu ekranu</span>
<span class="cm">     * @return Ten sam obiekt strony (fluent interface)</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="n">BasePage</span> <span class="nf">takeScreenshot</span><span class="p">(</span><span class="n">String</span> <span class="n">fileName</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">Selenide</span><span class="p">.</span><span class="na">screenshot</span><span class="p">(</span><span class="n">fileName</span><span class="p">);</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Metoda do nawigacji do strony głównej, dostępna dla wszystkich stron.</span>
<span class="cm">     * @return Nowy obiekt reprezentujący stronę główną</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="n">DashboardPage</span> <span class="nf">navigateToHome</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">$</span><span class="p">(</span><span class="s">&quot;.home-link&quot;</span><span class="p">).</span><span class="na">click</span><span class="p">();</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">DashboardPage</span><span class="p">().</span><span class="na">waitForPageToLoad</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// Wspólne metody nawigacyjne i pomocnicze...</span>
<span class="p">}</span>
</code></pre></div>

<h4>Przykładowa implementacja konkretnej strony:</h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * Page Object reprezentujący stronę logowania.</span>
<span class="cm"> * Zawiera wszystkie elementy i akcje specyficzne dla tej strony.</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LoginPage</span> <span class="kd">extends</span> <span class="n">BasePage</span> <span class="p">{</span>

    <span class="c1">// Lokalizatory elementów</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">SelenideElement</span> <span class="n">usernameField</span> <span class="o">=</span> <span class="n">$</span><span class="p">(</span><span class="s">&quot;#username&quot;</span><span class="p">);</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">SelenideElement</span> <span class="n">passwordField</span> <span class="o">=</span> <span class="n">$</span><span class="p">(</span><span class="s">&quot;#password&quot;</span><span class="p">);</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">SelenideElement</span> <span class="n">loginButton</span> <span class="o">=</span> <span class="n">$</span><span class="p">(</span><span class="s">&quot;#login-button&quot;</span><span class="p">);</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">SelenideElement</span> <span class="n">errorMessage</span> <span class="o">=</span> <span class="n">$</span><span class="p">(</span><span class="s">&quot;.error-message&quot;</span><span class="p">);</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">SelenideElement</span> <span class="n">forgotPasswordLink</span> <span class="o">=</span> <span class="n">$</span><span class="p">(</span><span class="s">&quot;#forgot-password&quot;</span><span class="p">);</span>

    <span class="cm">/**</span>
<span class="cm">     * Konstruktor inicjalizujący stronę.</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="nf">LoginPage</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="na">pageRoot</span> <span class="o">=</span> <span class="n">$</span><span class="p">(</span><span class="s">&quot;.login-container&quot;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Otwiera stronę logowania.</span>
<span class="cm">     * @return Ten sam obiekt LoginPage (fluent interface)</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="n">LoginPage</span> <span class="nf">open</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">Selenide</span><span class="p">.</span><span class="na">open</span><span class="p">(</span><span class="s">&quot;/login&quot;</span><span class="p">);</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Sprawdza, czy strona logowania jest załadowana.</span>
<span class="cm">     * @return true jeśli strona jest załadowana, false w przeciwnym razie</span>
<span class="cm">     */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isPageLoaded</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">pageRoot</span><span class="p">.</span><span class="na">isDisplayed</span><span class="p">()</span> <span class="o">&amp;&amp;</span> 
               <span class="n">usernameField</span><span class="p">.</span><span class="na">isDisplayed</span><span class="p">()</span> <span class="o">&amp;&amp;</span> 
               <span class="n">loginButton</span><span class="p">.</span><span class="na">isDisplayed</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Wykonuje logowanie z podanymi danymi.</span>
<span class="cm">     * @param username Nazwa użytkownika</span>
<span class="cm">     * @param password Hasło</span>
<span class="cm">     * @return Obiekt DashboardPage jeśli logowanie się powiodło</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="n">DashboardPage</span> <span class="nf">loginAs</span><span class="p">(</span><span class="n">String</span> <span class="n">username</span><span class="p">,</span> <span class="n">String</span> <span class="n">password</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">usernameField</span><span class="p">.</span><span class="na">setValue</span><span class="p">(</span><span class="n">username</span><span class="p">);</span>
        <span class="n">passwordField</span><span class="p">.</span><span class="na">setValue</span><span class="p">(</span><span class="n">password</span><span class="p">);</span>
        <span class="n">loginButton</span><span class="p">.</span><span class="na">click</span><span class="p">();</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">DashboardPage</span><span class="p">().</span><span class="na">waitForPageToLoad</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Wykonuje próbę logowania oczekując błędu.</span>
<span class="cm">     * @param username Nazwa użytkownika</span>
<span class="cm">     * @param password Hasło</span>
<span class="cm">     * @return Ten sam obiekt LoginPage (fluent interface)</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="n">LoginPage</span> <span class="nf">loginExpectingError</span><span class="p">(</span><span class="n">String</span> <span class="n">username</span><span class="p">,</span> <span class="n">String</span> <span class="n">password</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">usernameField</span><span class="p">.</span><span class="na">setValue</span><span class="p">(</span><span class="n">username</span><span class="p">);</span>
        <span class="n">passwordField</span><span class="p">.</span><span class="na">setValue</span><span class="p">(</span><span class="n">password</span><span class="p">);</span>
        <span class="n">loginButton</span><span class="p">.</span><span class="na">click</span><span class="p">();</span>
        <span class="n">errorMessage</span><span class="p">.</span><span class="na">shouldBe</span><span class="p">(</span><span class="n">visible</span><span class="p">,</span> <span class="n">Duration</span><span class="p">.</span><span class="na">ofSeconds</span><span class="p">(</span><span class="mi">2</span><span class="p">));</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Przechodzi do strony resetowania hasła.</span>
<span class="cm">     * @return Obiekt PasswordResetPage</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="n">PasswordResetPage</span> <span class="nf">clickForgotPassword</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">forgotPasswordLink</span><span class="p">.</span><span class="na">click</span><span class="p">();</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">PasswordResetPage</span><span class="p">().</span><span class="na">waitForPageToLoad</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// Gettery dla elementów, które mogą być używane w asercjach</span>
    <span class="kd">public</span> <span class="n">SelenideElement</span> <span class="nf">getUsernameField</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">usernameField</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="n">SelenideElement</span> <span class="nf">getPasswordField</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">passwordField</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="n">SelenideElement</span> <span class="nf">getErrorMessage</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">errorMessage</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h4>Przykładowa implementacja komponentu wielokrotnego użytku:</h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * Komponent reprezentujący panel nawigacyjny dostępny na wielu stronach.</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">NavigationMenu</span> <span class="kd">extends</span> <span class="n">BaseComponent</span> <span class="p">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="n">SelenideElement</span> <span class="n">rootElement</span><span class="p">;</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="n">SelenideElement</span> <span class="n">productsLink</span><span class="p">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">SelenideElement</span> <span class="n">ordersLink</span><span class="p">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">SelenideElement</span> <span class="n">accountLink</span><span class="p">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">SelenideElement</span> <span class="n">logoutButton</span><span class="p">;</span>

    <span class="cm">/**</span>
<span class="cm">     * Konstruktor przyjmujący element nadrzędny komponentu.</span>
<span class="cm">     * @param rootElement Element nadrzędny dla komponentu</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="nf">NavigationMenu</span><span class="p">(</span><span class="n">SelenideElement</span> <span class="n">rootElement</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="na">rootElement</span> <span class="o">=</span> <span class="n">rootElement</span><span class="p">;</span>

        <span class="c1">// Inicjalizacja elementów w kontekście</span>
        <span class="k">this</span><span class="p">.</span><span class="na">productsLink</span> <span class="o">=</span> <span class="n">rootElement</span><span class="p">.</span><span class="na">$</span><span class="p">(</span><span class="s">&quot;[data-test=&#39;products-link&#39;]&quot;</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="na">ordersLink</span> <span class="o">=</span> <span class="n">rootElement</span><span class="p">.</span><span class="na">$</span><span class="p">(</span><span class="s">&quot;[data-test=&#39;orders-link&#39;]&quot;</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="na">accountLink</span> <span class="o">=</span> <span class="n">rootElement</span><span class="p">.</span><span class="na">$</span><span class="p">(</span><span class="s">&quot;[data-test=&#39;account-link&#39;]&quot;</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="na">logoutButton</span> <span class="o">=</span> <span class="n">rootElement</span><span class="p">.</span><span class="na">$</span><span class="p">(</span><span class="s">&quot;[data-test=&#39;logout-button&#39;]&quot;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Alternatywny konstruktor tworzący komponent od globalnego selektora.</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="nf">NavigationMenu</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">(</span><span class="n">$</span><span class="p">(</span><span class="s">&quot;.main-navigation&quot;</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Przejście do strony produktów.</span>
<span class="cm">     * @return Obiekt ProductsPage</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="n">ProductsPage</span> <span class="nf">navigateToProducts</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">productsLink</span><span class="p">.</span><span class="na">click</span><span class="p">();</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">ProductsPage</span><span class="p">().</span><span class="na">waitForPageToLoad</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Przejście do strony zamówień.</span>
<span class="cm">     * @return Obiekt OrdersPage</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="n">OrdersPage</span> <span class="nf">navigateToOrders</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">ordersLink</span><span class="p">.</span><span class="na">click</span><span class="p">();</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">OrdersPage</span><span class="p">().</span><span class="na">waitForPageToLoad</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Przejście do strony konta użytkownika.</span>
<span class="cm">     * @return Obiekt AccountPage</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="n">AccountPage</span> <span class="nf">navigateToAccount</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">accountLink</span><span class="p">.</span><span class="na">click</span><span class="p">();</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">AccountPage</span><span class="p">().</span><span class="na">waitForPageToLoad</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Wylogowanie użytkownika.</span>
<span class="cm">     * @return Obiekt LoginPage</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="n">LoginPage</span> <span class="nf">logout</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">logoutButton</span><span class="p">.</span><span class="na">click</span><span class="p">();</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">LoginPage</span><span class="p">().</span><span class="na">waitForPageToLoad</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Sprawdza, czy nawigacja jest widoczna.</span>
<span class="cm">     * @return true jeśli nawigacja jest widoczna</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isVisible</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">rootElement</span><span class="p">.</span><span class="na">isDisplayed</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h4>Organizacja testów korzystających z POM:</h4>
<div class="codehilite"><pre><span></span><code><span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;Testy funkcjonalności koszyka zakupowego&quot;</span><span class="p">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ShoppingCartTests</span> <span class="kd">extends</span> <span class="n">BaseTest</span> <span class="p">{</span>

    <span class="kd">private</span> <span class="n">LoginPage</span> <span class="n">loginPage</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">DashboardPage</span> <span class="n">dashboardPage</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">ProductsPage</span> <span class="n">productsPage</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">CartPage</span> <span class="n">cartPage</span><span class="p">;</span>

    <span class="nd">@BeforeEach</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setUp</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Inicjalizacja stron</span>
        <span class="n">loginPage</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LoginPage</span><span class="p">();</span>

        <span class="c1">// Przygotowanie stanu - zalogowany użytkownik</span>
        <span class="n">loginPage</span><span class="p">.</span><span class="na">open</span><span class="p">();</span>
        <span class="n">dashboardPage</span> <span class="o">=</span> <span class="n">loginPage</span><span class="p">.</span><span class="na">loginAs</span><span class="p">(</span><span class="s">&quot;testuser&quot;</span><span class="p">,</span> <span class="s">&quot;testpassword&quot;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nd">@Test</span>
    <span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;Użytkownik może dodać produkt do koszyka&quot;</span><span class="p">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">userCanAddProductToCart</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Nawigacja do produktów</span>
        <span class="n">productsPage</span> <span class="o">=</span> <span class="n">dashboardPage</span><span class="p">.</span><span class="na">getNavigationMenu</span><span class="p">().</span><span class="na">navigateToProducts</span><span class="p">();</span>

        <span class="c1">// Dodanie produktu do koszyka</span>
        <span class="n">String</span> <span class="n">productName</span> <span class="o">=</span> <span class="s">&quot;Test Product&quot;</span><span class="p">;</span>
        <span class="n">productsPage</span><span class="p">.</span><span class="na">addProductToCart</span><span class="p">(</span><span class="n">productName</span><span class="p">);</span>

        <span class="c1">// Weryfikacja powiadomienia</span>
        <span class="n">productsPage</span><span class="p">.</span><span class="na">getNotification</span><span class="p">().</span><span class="na">shouldHave</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s">&quot;Added to cart&quot;</span><span class="p">));</span>

        <span class="c1">// Przejście do koszyka</span>
        <span class="n">cartPage</span> <span class="o">=</span> <span class="n">productsPage</span><span class="p">.</span><span class="na">openCart</span><span class="p">();</span>

        <span class="c1">// Weryfikacja zawartości koszyka</span>
        <span class="n">cartPage</span><span class="p">.</span><span class="na">getCartItems</span><span class="p">().</span><span class="na">shouldHave</span><span class="p">(</span><span class="n">size</span><span class="p">(</span><span class="mi">1</span><span class="p">));</span>
        <span class="n">cartPage</span><span class="p">.</span><span class="na">getCartItem</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="na">shouldHave</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="n">productName</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="nd">@Test</span>
    <span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;Użytkownik może usunąć produkt z koszyka&quot;</span><span class="p">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">userCanRemoveProductFromCart</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Nawigacja do produktów</span>
        <span class="n">productsPage</span> <span class="o">=</span> <span class="n">dashboardPage</span><span class="p">.</span><span class="na">getNavigationMenu</span><span class="p">().</span><span class="na">navigateToProducts</span><span class="p">();</span>

        <span class="c1">// Dodanie produktu</span>
        <span class="n">productsPage</span><span class="p">.</span><span class="na">addProductToCart</span><span class="p">(</span><span class="s">&quot;Test Product&quot;</span><span class="p">);</span>

        <span class="c1">// Przejście do koszyka</span>
        <span class="n">cartPage</span> <span class="o">=</span> <span class="n">productsPage</span><span class="p">.</span><span class="na">openCart</span><span class="p">();</span>

        <span class="c1">// Weryfikacja początkowej zawartości</span>
        <span class="n">cartPage</span><span class="p">.</span><span class="na">getCartItems</span><span class="p">().</span><span class="na">shouldHave</span><span class="p">(</span><span class="n">size</span><span class="p">(</span><span class="mi">1</span><span class="p">));</span>

        <span class="c1">// Usunięcie produktu</span>
        <span class="n">cartPage</span><span class="p">.</span><span class="na">removeItemFromCart</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

        <span class="c1">// Weryfikacja pustego koszyka</span>
        <span class="n">cartPage</span><span class="p">.</span><span class="na">getEmptyCartMessage</span><span class="p">().</span><span class="na">shouldBe</span><span class="p">(</span><span class="n">visible</span><span class="p">)</span>
                <span class="p">.</span><span class="na">shouldHave</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s">&quot;Your cart is empty&quot;</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3>Korzyści z zastosowania Page Object Model:</h3>
<ol>
<li><strong>Utrzymywalność</strong>:</li>
<li>Zmiany w UI wymagają aktualizacji tylko w jednym miejscu</li>
<li>Modularna struktura ułatwia dodawanie nowych funkcjonalności</li>
<li>Jasna separacja odpowiedzialności między warstwami</li>
<li><strong>Czytelność i zrozumiałość</strong>:</li>
<li>Testy odzwierciedlają działania użytkownika, a nie techniczne szczegóły</li>
<li>Kod jest samodokumentujący się, używając terminologii biznesowej</li>
<li>Łatwiejsza onboarding nowych członków zespołu</li>
<li><strong>Wielokrotne wykorzystanie kodu</strong>:</li>
<li>Komponenty UI mogą być używane w wielu testach</li>
<li>Wspólne wzorce interakcji są zaimplementowane tylko raz</li>
<li>Reużywalność powoduje szybsze tworzenie nowych testów</li>
<li><strong>Łatwiejsza adaptacja do zmian</strong>:</li>
<li>Zmiany w UI mają minimalny wpływ na testy</li>
<li>Możliwość łatwej integracji z nowymi technologiami lub frameworkami</li>
<li>Elastyczność w konfiguracji testów dla różnych środowisk</li>
</ol>
<h2>5.2. Struktura testów API</h2>
<p>Struktura testów API jest kluczowym elementem architektury frameworka testowego, zapewniającym organizację,
utrzymywalność i efektywność testów interfejsów programistycznych. Dobrze zaprojektowana struktura umożliwia szybkie
tworzenie nowych testów, ułatwia utrzymanie istniejących oraz zapewnia przejrzystość i zrozumiałość dla całego zespołu.</p>
<h3>Główne komponenty struktury testów API:</h3>
<ol>
<li><strong>Modele danych (DTOs)</strong>:</li>
<li>Obiekty reprezentujące struktury danych używane w API</li>
<li>Mapowanie JSON/XML na obiekty Javy</li>
<li>
<p>Walidatory i konwertery formatów</p>
</li>
<li>
<p><strong>Klienty API</strong>:</p>
</li>
<li>Abstrakcja nad Rest Assured dla poszczególnych zasobów/endpointów </li>
<li>Enkapsulacja szczegółów technicznych komunikacji </li>
<li>
<p>Metody odzwierciedlające operacje biznesowe</p>
</li>
<li>
<p><strong>Specyfikacje API</strong>:</p>
</li>
<li>Definicje wspólnych elementów żądań (headers, auth)</li>
<li>Konfiguracja bazowa dla różnych typów zapytań </li>
<li>
<p>Szablony dla często używanych wzorców</p>
</li>
<li>
<p><strong>Warstwa testów</strong>:</p>
</li>
<li>Konkretne przypadki testowe korzystające z klientów API </li>
<li>Konfiguracja środowiska i danych testowych </li>
<li>Asercje i weryfikacje biznesowe</li>
</ol>
<h3>Przykładowa struktura katalogów dla testów API:</h3>
<div class="codehilite"><pre><span></span><code><span class="nv">src</span><span class="o">/</span><span class="nv">test</span><span class="o">/</span><span class="nv">java</span><span class="o">/</span><span class="nv">com</span><span class="o">/</span><span class="nv">company</span><span class="o">/</span><span class="nv">api</span><span class="o">/</span>
├── <span class="nv">config</span><span class="o">/</span>
│   ├── <span class="nv">ApiConfig</span>.<span class="nv">java</span>               <span class="o">//</span> <span class="nv">Konfiguracja</span> <span class="nv">API</span> <span class="ss">(</span><span class="nv">URL</span>, <span class="nb">timeout</span><span class="ss">)</span>
│   ├── <span class="nv">AuthConfig</span>.<span class="nv">java</span>              <span class="o">//</span> <span class="nv">Konfiguracja</span> <span class="nv">autentykacji</span>
│   └── <span class="nv">EnvironmentConfig</span>.<span class="nv">java</span>       <span class="o">//</span> <span class="nv">Konfiguracja</span> <span class="nv">dla</span> <span class="nv">r</span>óż<span class="nv">nych</span> ś<span class="nv">rodowisk</span>
├── <span class="nv">model</span><span class="o">/</span>
│   ├── <span class="nv">request</span><span class="o">/</span>
│   │   ├── <span class="nv">UserCreateRequest</span>.<span class="nv">java</span>   <span class="o">//</span> <span class="nv">DTO</span> <span class="nv">dla</span> żą<span class="nv">dania</span> <span class="nv">utworzenia</span> <span class="nv">u</span>ż<span class="nv">ytkownika</span>
│   │   └── <span class="nv">ProductSearchRequest</span>.<span class="nv">java</span> <span class="o">//</span> <span class="nv">DTO</span> <span class="nv">dla</span> <span class="nv">wyszukiwania</span> <span class="nv">produkt</span>ó<span class="nv">w</span>
│   ├── <span class="nv">response</span><span class="o">/</span>
│   │   ├── <span class="nv">UserResponse</span>.<span class="nv">java</span>        <span class="o">//</span> <span class="nv">DTO</span> <span class="nv">dla</span> <span class="nv">odpowiedzi</span> <span class="nv">z</span> <span class="nv">danymi</span> <span class="nv">u</span>ż<span class="nv">ytkownika</span>
│   │   └── <span class="nv">ErrorResponse</span>.<span class="nv">java</span>       <span class="o">//</span> <span class="nv">DTO</span> <span class="nv">dla</span> <span class="nv">odpowiedzi</span> <span class="nv">b</span>łę<span class="nv">d</span>ó<span class="nv">w</span>
│   └── <span class="nv">common</span><span class="o">/</span>
│       ├── <span class="nv">Address</span>.<span class="nv">java</span>             <span class="o">//</span> <span class="nv">Wsp</span>ół<span class="nv">dzielone</span> <span class="nv">modele</span> <span class="nv">danych</span>
│       └── <span class="nv">PaymentDetails</span>.<span class="nv">java</span>      <span class="o">//</span> <span class="nv">Wsp</span>ół<span class="nv">dzielone</span> <span class="nv">modele</span> <span class="nv">danych</span>
├── <span class="nv">client</span><span class="o">/</span>
│   ├── <span class="nv">BaseApiClient</span>.<span class="nv">java</span>           <span class="o">//</span> <span class="nv">Abstrakcyjna</span> <span class="nv">klasa</span> <span class="nv">bazowa</span> <span class="nv">dla</span> <span class="nv">klient</span>ó<span class="nv">w</span>
│   ├── <span class="nv">UserApiClient</span>.<span class="nv">java</span>           <span class="o">//</span> <span class="nv">Klient</span> <span class="nv">API</span> <span class="nv">dla</span> <span class="nv">zasobu</span> <span class="nv">u</span>ż<span class="nv">ytkownik</span>ó<span class="nv">w</span>
│   ├── <span class="nv">ProductApiClient</span>.<span class="nv">java</span>        <span class="o">//</span> <span class="nv">Klient</span> <span class="nv">API</span> <span class="nv">dla</span> <span class="nv">zasobu</span> <span class="nv">produkt</span>ó<span class="nv">w</span>
│   └── <span class="nv">OrderApiClient</span>.<span class="nv">java</span>          <span class="o">//</span> <span class="nv">Klient</span> <span class="nv">API</span> <span class="nv">dla</span> <span class="nv">zasobu</span> <span class="nv">zam</span>ó<span class="nv">wie</span>ń
├── <span class="nv">spec</span><span class="o">/</span>
│   ├── <span class="nv">CommonRequestSpecs</span>.<span class="nv">java</span>      <span class="o">//</span> <span class="nv">Wsp</span>ó<span class="nv">lne</span> <span class="nv">specyfikacje</span> żą<span class="nv">da</span>ń
│   ├── <span class="nv">CommonResponseSpecs</span>.<span class="nv">java</span>     <span class="o">//</span> <span class="nv">Wsp</span>ó<span class="nv">lne</span> <span class="nv">specyfikacje</span> <span class="nv">odpowiedzi</span>
│   └── <span class="nv">AuthenticationSpecs</span>.<span class="nv">java</span>     <span class="o">//</span> <span class="nv">Specyfikacje</span> <span class="nv">zwi</span>ą<span class="nv">zane</span> <span class="nv">z</span> <span class="nv">autentykacj</span>ą
├── <span class="nv">test</span><span class="o">/</span>
│   ├── <span class="nv">user</span><span class="o">/</span>
│   │   ├── <span class="nv">UserCreationTests</span>.<span class="nv">java</span>   <span class="o">//</span> <span class="nv">Testy</span> <span class="nv">tworzenia</span> <span class="nv">u</span>ż<span class="nv">ytkownik</span>ó<span class="nv">w</span>
│   │   └── <span class="nv">UserAuthenticationTests</span>.<span class="nv">java</span> <span class="o">//</span> <span class="nv">Testy</span> <span class="nv">logowania</span><span class="o">/</span><span class="nv">autoryzacji</span>
│   ├── <span class="nv">product</span><span class="o">/</span>
│   │   ├── <span class="nv">ProductSearchTests</span>.<span class="nv">java</span>  <span class="o">//</span> <span class="nv">Testy</span> <span class="nv">wyszukiwania</span> <span class="nv">produkt</span>ó<span class="nv">w</span>
│   │   └── <span class="nv">ProductCatalogTests</span>.<span class="nv">java</span> <span class="o">//</span> <span class="nv">Testy</span> <span class="nv">katalogu</span> <span class="nv">produkt</span>ó<span class="nv">w</span>
│   └── <span class="nv">order</span><span class="o">/</span>
│       ├── <span class="nv">OrderCreationTests</span>.<span class="nv">java</span>  <span class="o">//</span> <span class="nv">Testy</span> <span class="nv">tworzenia</span> <span class="nv">zam</span>ó<span class="nv">wie</span>ń
│       └── <span class="nv">OrderProcessingTests</span>.<span class="nv">java</span> <span class="o">//</span> <span class="nv">Testy</span> <span class="nv">przetwarzania</span> <span class="nv">zam</span>ó<span class="nv">wie</span>ń
└── <span class="nv">util</span><span class="o">/</span>
    ├── <span class="nv">JsonSchemaValidator</span>.<span class="nv">java</span>     <span class="o">//</span> <span class="nv">Narz</span>ę<span class="nv">dzia</span> <span class="k">do</span> <span class="nv">walidacji</span> <span class="nv">schemat</span>ó<span class="nv">w</span>
    ├── <span class="nv">ApiTestDataGenerator</span>.<span class="nv">java</span>    <span class="o">//</span> <span class="nv">Generator</span> <span class="nv">danych</span> <span class="nv">testowych</span>
    └── <span class="nv">ResponseExtractor</span>.<span class="nv">java</span>       <span class="o">//</span> <span class="nv">Narz</span>ę<span class="nv">dzia</span> <span class="k">do</span> <span class="nv">ekstrakcji</span> <span class="nv">danych</span> <span class="nv">z</span> <span class="nv">odpowiedzi</span>
</code></pre></div>

<h3>Implementacja poszczególnych komponentów:</h3>
<h4>Klasa konfiguracyjna API:</h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * Centralna konfiguracja dla testów API.</span>
<span class="cm"> * Dostarcza parametry zależne od środowiska i wspólne ustawienia.</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ApiConfig</span> <span class="p">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">DEFAULT_BASE_URL</span> <span class="o">=</span> <span class="s">&quot;https://api.example.com&quot;</span><span class="p">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">DEFAULT_TIMEOUT</span> <span class="o">=</span> <span class="mi">10000</span><span class="p">;</span> <span class="c1">// ms</span>

    <span class="cm">/**</span>
<span class="cm">     * Zwraca bazowy URL API dla aktualnego środowiska.</span>
<span class="cm">     * @return String z bazowym URL</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">getBaseUrl</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">System</span><span class="p">.</span><span class="na">getProperty</span><span class="p">(</span><span class="s">&quot;api.baseUrl&quot;</span><span class="p">,</span> <span class="n">DEFAULT_BASE_URL</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Zwraca timeout dla żądań HTTP.</span>
<span class="cm">     * @return Timeout w milisekundach</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">getTimeout</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">Integer</span><span class="p">.</span><span class="na">parseInt</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">getProperty</span><span class="p">(</span><span class="s">&quot;api.timeout&quot;</span><span class="p">,</span> 
                                <span class="n">String</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">DEFAULT_TIMEOUT</span><span class="p">)));</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Inicjalizuje konfigurację RestAssured.</span>
<span class="cm">     * Powinno być wywołane przed uruchomieniem testów.</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">initRestAssured</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">RestAssured</span><span class="p">.</span><span class="na">baseURI</span> <span class="o">=</span> <span class="n">getBaseUrl</span><span class="p">();</span>
        <span class="n">RestAssured</span><span class="p">.</span><span class="na">config</span> <span class="o">=</span> <span class="n">RestAssuredConfig</span><span class="p">.</span><span class="na">config</span><span class="p">()</span>
            <span class="p">.</span><span class="na">httpClient</span><span class="p">(</span><span class="n">HttpClientConfig</span><span class="p">.</span><span class="na">httpClientConfig</span><span class="p">()</span>
                <span class="p">.</span><span class="na">setParam</span><span class="p">(</span><span class="s">&quot;http.socket.timeout&quot;</span><span class="p">,</span> <span class="n">getTimeout</span><span class="p">())</span>
                <span class="p">.</span><span class="na">setParam</span><span class="p">(</span><span class="s">&quot;http.connection.timeout&quot;</span><span class="p">,</span> <span class="n">getTimeout</span><span class="p">()));</span>

        <span class="c1">// Konfiguracja logowania (ostrożnie z danymi wrażliwymi!)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">isDebugMode</span><span class="p">())</span> <span class="p">{</span>
            <span class="n">RestAssured</span><span class="p">.</span><span class="na">filters</span><span class="p">(</span><span class="k">new</span> <span class="n">RequestLoggingFilter</span><span class="p">(),</span> <span class="k">new</span> <span class="n">ResponseLoggingFilter</span><span class="p">());</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Sprawdza, czy włączony jest tryb debug.</span>
<span class="cm">     * @return true jeśli tryb debug jest włączony</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">isDebugMode</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">Boolean</span><span class="p">.</span><span class="na">parseBoolean</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">getProperty</span><span class="p">(</span><span class="s">&quot;api.debug&quot;</span><span class="p">,</span> <span class="s">&quot;false&quot;</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h4>Przykładowy model danych (DTO):</h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * Data Transfer Object reprezentujący żądanie utworzenia użytkownika.</span>
<span class="cm"> */</span>
<span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@AllArgsConstructor</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserCreateRequest</span> <span class="p">{</span>

    <span class="nd">@NotNull</span><span class="p">(</span><span class="n">message</span> <span class="o">=</span> <span class="s">&quot;First name is required&quot;</span><span class="p">)</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">firstName</span><span class="p">;</span>

    <span class="nd">@NotNull</span><span class="p">(</span><span class="n">message</span> <span class="o">=</span> <span class="s">&quot;Last name is required&quot;</span><span class="p">)</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">lastName</span><span class="p">;</span>

    <span class="nd">@Email</span><span class="p">(</span><span class="n">message</span> <span class="o">=</span> <span class="s">&quot;Must be a valid email address&quot;</span><span class="p">)</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">email</span><span class="p">;</span>

    <span class="nd">@NotNull</span><span class="p">(</span><span class="n">message</span> <span class="o">=</span> <span class="s">&quot;Password is required&quot;</span><span class="p">)</span>
    <span class="nd">@Size</span><span class="p">(</span><span class="n">min</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="s">&quot;Password must be at least 8 characters&quot;</span><span class="p">)</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">password</span><span class="p">;</span>

    <span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">roles</span><span class="p">;</span>

    <span class="cm">/**</span>
<span class="cm">     * Factory method tworzący przykładowego użytkownika.</span>
<span class="cm">     * @return Przykładowy obiekt żądania</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">UserCreateRequest</span> <span class="nf">createDefault</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">UserCreateRequest</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
            <span class="p">.</span><span class="na">firstName</span><span class="p">(</span><span class="s">&quot;John&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="na">lastName</span><span class="p">(</span><span class="s">&quot;Kowalski&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="na">email</span><span class="p">(</span><span class="s">&quot;john.Kowalski@example.com&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="na">password</span><span class="p">(</span><span class="s">&quot;Password123!&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="na">roles</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;USER&quot;</span><span class="p">))</span>
            <span class="p">.</span><span class="na">build</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * DTO reprezentujący odpowiedź z danymi użytkownika.</span>
<span class="cm"> */</span>
<span class="nd">@Data</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@AllArgsConstructor</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserResponse</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">id</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">firstName</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">lastName</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">email</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">roles</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">Date</span> <span class="n">createdAt</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">Date</span> <span class="n">updatedAt</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<h4>Bazowy klient API:</h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * Bazowa klasa dla wszystkich klientów API.</span>
<span class="cm"> * Dostarcza wspólną funkcjonalność i konfigurację.</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">BaseApiClient</span> <span class="p">{</span>

    <span class="kd">protected</span> <span class="kd">final</span> <span class="n">RequestSpecification</span> <span class="n">baseSpec</span><span class="p">;</span>

    <span class="cm">/**</span>
<span class="cm">     * Konstruktor inicjalizujący bazową specyfikację.</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="nf">BaseApiClient</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="na">baseSpec</span> <span class="o">=</span> <span class="n">RestAssured</span><span class="p">.</span><span class="na">given</span><span class="p">()</span>
            <span class="p">.</span><span class="na">contentType</span><span class="p">(</span><span class="n">ContentType</span><span class="p">.</span><span class="na">JSON</span><span class="p">)</span>
            <span class="p">.</span><span class="na">accept</span><span class="p">(</span><span class="n">ContentType</span><span class="p">.</span><span class="na">JSON</span><span class="p">)</span>
            <span class="p">.</span><span class="na">config</span><span class="p">(</span><span class="n">RestAssuredConfig</span><span class="p">.</span><span class="na">config</span><span class="p">()</span>
                <span class="p">.</span><span class="na">objectMapperConfig</span><span class="p">(</span><span class="k">new</span> <span class="n">ObjectMapperConfig</span><span class="p">()</span>
                    <span class="p">.</span><span class="na">jackson2ObjectMapperFactory</span><span class="p">((</span><span class="n">cls</span><span class="p">,</span> <span class="n">charset</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">{</span>
                        <span class="n">ObjectMapper</span> <span class="n">mapper</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ObjectMapper</span><span class="p">();</span>
                        <span class="n">mapper</span><span class="p">.</span><span class="na">registerModule</span><span class="p">(</span><span class="k">new</span> <span class="n">JavaTimeModule</span><span class="p">());</span>
                        <span class="n">mapper</span><span class="p">.</span><span class="na">disable</span><span class="p">(</span><span class="n">SerializationFeature</span><span class="p">.</span><span class="na">WRITE_DATES_AS_TIMESTAMPS</span><span class="p">);</span>
                        <span class="n">mapper</span><span class="p">.</span><span class="na">setSerializationInclusion</span><span class="p">(</span><span class="n">JsonInclude</span><span class="p">.</span><span class="na">Include</span><span class="p">.</span><span class="na">NON_NULL</span><span class="p">);</span>
                        <span class="k">return</span> <span class="n">mapper</span><span class="p">;</span>
                    <span class="p">})))</span>
            <span class="p">.</span><span class="na">log</span><span class="p">().</span><span class="na">ifValidationFails</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Dodaje autentykację do specyfikacji.</span>
<span class="cm">     * @param token Token autentykacji</span>
<span class="cm">     * @return RequestSpecification z dodaną autentykacją</span>
<span class="cm">     */</span>
    <span class="kd">protected</span> <span class="n">RequestSpecification</span> <span class="nf">withAuth</span><span class="p">(</span><span class="n">String</span> <span class="n">token</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">baseSpec</span><span class="p">.</span><span class="na">header</span><span class="p">(</span><span class="s">&quot;Authorization&quot;</span><span class="p">,</span> <span class="s">&quot;Bearer &quot;</span> <span class="o">+</span> <span class="n">token</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Loguje błąd odpowiedzi HTTP dla lepszej diagnostyki.</span>
<span class="cm">     * @param response Odpowiedź do zalogowania</span>
<span class="cm">     */</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">logErrorResponse</span><span class="p">(</span><span class="n">Response</span> <span class="n">response</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="na">statusCode</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="mi">400</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">log</span><span class="p">.</span><span class="na">error</span><span class="p">(</span><span class="s">&quot;API Error: Status {}, Body: {}&quot;</span><span class="p">,</span> 
                     <span class="n">response</span><span class="p">.</span><span class="na">statusCode</span><span class="p">(),</span> <span class="n">response</span><span class="p">.</span><span class="na">body</span><span class="p">().</span><span class="na">asString</span><span class="p">());</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Przetwarza odpowiedź na określony typ.</span>
<span class="cm">     * @param response Odpowiedź HTTP</span>
<span class="cm">     * @param clazz Klasa docelowa</span>
<span class="cm">     * @param &lt;T&gt; Typ docelowy</span>
<span class="cm">     * @return Obiekt określonego typu</span>
<span class="cm">     */</span>
    <span class="kd">protected</span> <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">T</span> <span class="nf">processResponse</span><span class="p">(</span><span class="n">Response</span> <span class="n">response</span><span class="p">,</span> <span class="n">Class</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">clazz</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="na">statusCode</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="mi">400</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">logErrorResponse</span><span class="p">(</span><span class="n">response</span><span class="p">);</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="n">ApiException</span><span class="p">(</span><span class="s">&quot;API request failed with status: &quot;</span> <span class="o">+</span> <span class="n">response</span><span class="p">.</span><span class="na">statusCode</span><span class="p">());</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">response</span><span class="p">.</span><span class="na">as</span><span class="p">(</span><span class="n">clazz</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h4>Konkretna implementacja klienta API:</h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * Klient API dla zasobu użytkowników.</span>
<span class="cm"> * Enkapsuluje operacje CRUD i inne akcje związane z użytkownikami.</span>
<span class="cm"> */</span>
<span class="nd">@Slf4j</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserApiClient</span> <span class="kd">extends</span> <span class="n">BaseApiClient</span> <span class="p">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">USERS_PATH</span> <span class="o">=</span> <span class="s">&quot;/api/users&quot;</span><span class="p">;</span>

    <span class="cm">/**</span>
<span class="cm">     * Tworzy nowego użytkownika.</span>
<span class="cm">     * @param request Dane nowego użytkownika</span>
<span class="cm">     * @return Utworzony użytkownik</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="n">UserResponse</span> <span class="nf">createUser</span><span class="p">(</span><span class="n">UserCreateRequest</span> <span class="n">request</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">log</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;Creating user with email: {}&quot;</span><span class="p">,</span> <span class="n">request</span><span class="p">.</span><span class="na">getEmail</span><span class="p">());</span>

        <span class="n">Response</span> <span class="n">response</span> <span class="o">=</span> <span class="n">baseSpec</span>
            <span class="p">.</span><span class="na">body</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
            <span class="p">.</span><span class="na">when</span><span class="p">()</span>
            <span class="p">.</span><span class="na">post</span><span class="p">(</span><span class="n">USERS_PATH</span><span class="p">);</span>

        <span class="k">return</span> <span class="n">processResponse</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">UserResponse</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Pobiera użytkownika po ID.</span>
<span class="cm">     * @param userId ID użytkownika</span>
<span class="cm">     * @return Dane użytkownika</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="n">UserResponse</span> <span class="nf">getUserById</span><span class="p">(</span><span class="n">String</span> <span class="n">userId</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">log</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;Fetching user with ID: {}&quot;</span><span class="p">,</span> <span class="n">userId</span><span class="p">);</span>

        <span class="n">Response</span> <span class="n">response</span> <span class="o">=</span> <span class="n">baseSpec</span>
            <span class="p">.</span><span class="na">pathParam</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">,</span> <span class="n">userId</span><span class="p">)</span>
            <span class="p">.</span><span class="na">when</span><span class="p">()</span>
            <span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">USERS_PATH</span> <span class="o">+</span> <span class="s">&quot;/{id}&quot;</span><span class="p">);</span>

        <span class="k">return</span> <span class="n">processResponse</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">UserResponse</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Aktualizuje dane użytkownika.</span>
<span class="cm">     * @param userId ID użytkownika</span>
<span class="cm">     * @param request Dane do aktualizacji</span>
<span class="cm">     * @return Zaktualizowany użytkownik</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="n">UserResponse</span> <span class="nf">updateUser</span><span class="p">(</span><span class="n">String</span> <span class="n">userId</span><span class="p">,</span> <span class="n">UserCreateRequest</span> <span class="n">request</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">log</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;Updating user with ID: {}&quot;</span><span class="p">,</span> <span class="n">userId</span><span class="p">);</span>

        <span class="n">Response</span> <span class="n">response</span> <span class="o">=</span> <span class="n">baseSpec</span>
            <span class="p">.</span><span class="na">pathParam</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">,</span> <span class="n">userId</span><span class="p">)</span>
            <span class="p">.</span><span class="na">body</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
            <span class="p">.</span><span class="na">when</span><span class="p">()</span>
            <span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">USERS_PATH</span> <span class="o">+</span> <span class="s">&quot;/{id}&quot;</span><span class="p">);</span>

        <span class="k">return</span> <span class="n">processResponse</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">UserResponse</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Usuwa użytkownika.</span>
<span class="cm">     * @param userId ID użytkownika do usunięcia</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">deleteUser</span><span class="p">(</span><span class="n">String</span> <span class="n">userId</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">log</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;Deleting user with ID: {}&quot;</span><span class="p">,</span> <span class="n">userId</span><span class="p">);</span>

        <span class="n">Response</span> <span class="n">response</span> <span class="o">=</span> <span class="n">baseSpec</span>
            <span class="p">.</span><span class="na">pathParam</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">,</span> <span class="n">userId</span><span class="p">)</span>
            <span class="p">.</span><span class="na">when</span><span class="p">()</span>
            <span class="p">.</span><span class="na">delete</span><span class="p">(</span><span class="n">USERS_PATH</span> <span class="o">+</span> <span class="s">&quot;/{id}&quot;</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="na">statusCode</span><span class="p">()</span> <span class="o">!=</span> <span class="mi">204</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">logErrorResponse</span><span class="p">(</span><span class="n">response</span><span class="p">);</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="n">ApiException</span><span class="p">(</span><span class="s">&quot;Failed to delete user: &quot;</span> <span class="o">+</span> <span class="n">userId</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Wyszukuje użytkowników według kryteriów.</span>
<span class="cm">     * @param searchParams Parametry wyszukiwania</span>
<span class="cm">     * @return Lista znalezionych użytkowników</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">UserResponse</span><span class="o">&gt;</span> <span class="nf">searchUsers</span><span class="p">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">searchParams</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">log</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;Searching users with criteria: {}&quot;</span><span class="p">,</span> <span class="n">searchParams</span><span class="p">);</span>

        <span class="n">Response</span> <span class="n">response</span> <span class="o">=</span> <span class="n">baseSpec</span>
            <span class="p">.</span><span class="na">queryParams</span><span class="p">(</span><span class="n">searchParams</span><span class="p">)</span>
            <span class="p">.</span><span class="na">when</span><span class="p">()</span>
            <span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">USERS_PATH</span><span class="p">);</span>

        <span class="k">return</span> <span class="n">Arrays</span><span class="p">.</span><span class="na">asList</span><span class="p">(</span><span class="n">processResponse</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">UserResponse</span><span class="o">[]</span><span class="p">.</span><span class="na">class</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Autentykuje użytkownika i zwraca token.</span>
<span class="cm">     * @param email Email użytkownika</span>
<span class="cm">     * @param password Hasło</span>
<span class="cm">     * @return Token autentykacji</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">authenticateUser</span><span class="p">(</span><span class="n">String</span> <span class="n">email</span><span class="p">,</span> <span class="n">String</span> <span class="n">password</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">log</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;Authenticating user: {}&quot;</span><span class="p">,</span> <span class="n">email</span><span class="p">);</span>

        <span class="n">AuthRequest</span> <span class="n">authRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AuthRequest</span><span class="p">(</span><span class="n">email</span><span class="p">,</span> <span class="n">password</span><span class="p">);</span>

        <span class="n">Response</span> <span class="n">response</span> <span class="o">=</span> <span class="n">baseSpec</span>
            <span class="p">.</span><span class="na">body</span><span class="p">(</span><span class="n">authRequest</span><span class="p">)</span>
            <span class="p">.</span><span class="na">when</span><span class="p">()</span>
            <span class="p">.</span><span class="na">post</span><span class="p">(</span><span class="s">&quot;/api/auth/login&quot;</span><span class="p">);</span>

        <span class="n">AuthResponse</span> <span class="n">authResponse</span> <span class="o">=</span> <span class="n">processResponse</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">AuthResponse</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">authResponse</span><span class="p">.</span><span class="na">getToken</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h4>Przykład specyfikacji wspólnych:</h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * Wspólne specyfikacje żądań używane w testach API.</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CommonRequestSpecs</span> <span class="p">{</span>

    <span class="cm">/**</span>
<span class="cm">     * Podstawowa specyfikacja dla żądań JSON.</span>
<span class="cm">     * @return RequestSpecification z typowymi ustawieniami</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">RequestSpecification</span> <span class="nf">jsonRequestSpec</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">RequestSpecBuilder</span><span class="p">()</span>
            <span class="p">.</span><span class="na">setContentType</span><span class="p">(</span><span class="n">ContentType</span><span class="p">.</span><span class="na">JSON</span><span class="p">)</span>
            <span class="p">.</span><span class="na">setAccept</span><span class="p">(</span><span class="n">ContentType</span><span class="p">.</span><span class="na">JSON</span><span class="p">)</span>
            <span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="n">LogDetail</span><span class="p">.</span><span class="na">ALL</span><span class="p">)</span>
            <span class="p">.</span><span class="na">build</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Specyfikacja z podstawową autentykacją.</span>
<span class="cm">     * @param username Nazwa użytkownika</span>
<span class="cm">     * @param password Hasło</span>
<span class="cm">     * @return RequestSpecification z autentykacją</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">RequestSpecification</span> <span class="nf">basicAuthSpec</span><span class="p">(</span><span class="n">String</span> <span class="n">username</span><span class="p">,</span> <span class="n">String</span> <span class="n">password</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">RequestSpecBuilder</span><span class="p">()</span>
            <span class="p">.</span><span class="na">addRequestSpecification</span><span class="p">(</span><span class="n">jsonRequestSpec</span><span class="p">())</span>
            <span class="p">.</span><span class="na">setAuth</span><span class="p">(</span><span class="n">RestAssured</span><span class="p">.</span><span class="na">basic</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">))</span>
            <span class="p">.</span><span class="na">build</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Specyfikacja z autentykacją OAuth2/Bearer.</span>
<span class="cm">     * @param token Token autoryzacyjny</span>
<span class="cm">     * @return RequestSpecification z autentykacją</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">RequestSpecification</span> <span class="nf">oauthSpec</span><span class="p">(</span><span class="n">String</span> <span class="n">token</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">RequestSpecBuilder</span><span class="p">()</span>
            <span class="p">.</span><span class="na">addRequestSpecification</span><span class="p">(</span><span class="n">jsonRequestSpec</span><span class="p">())</span>
            <span class="p">.</span><span class="na">addHeader</span><span class="p">(</span><span class="s">&quot;Authorization&quot;</span><span class="p">,</span> <span class="s">&quot;Bearer &quot;</span> <span class="o">+</span> <span class="n">token</span><span class="p">)</span>
            <span class="p">.</span><span class="na">build</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Specyfikacja dla żądań z paginacją.</span>
<span class="cm">     * @param page Numer strony</span>
<span class="cm">     * @param size Rozmiar strony</span>
<span class="cm">     * @return RequestSpecification z parametrami paginacji</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">RequestSpecification</span> <span class="nf">paginationSpec</span><span class="p">(</span><span class="kt">int</span> <span class="n">page</span><span class="p">,</span> <span class="kt">int</span> <span class="n">size</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">RequestSpecBuilder</span><span class="p">()</span>
            <span class="p">.</span><span class="na">addRequestSpecification</span><span class="p">(</span><span class="n">jsonRequestSpec</span><span class="p">())</span>
            <span class="p">.</span><span class="na">addQueryParam</span><span class="p">(</span><span class="s">&quot;page&quot;</span><span class="p">,</span> <span class="n">page</span><span class="p">)</span>
            <span class="p">.</span><span class="na">addQueryParam</span><span class="p">(</span><span class="s">&quot;size&quot;</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span>
            <span class="p">.</span><span class="na">build</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * Wspólne specyfikacje odpowiedzi używane w testach API.</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CommonResponseSpecs</span> <span class="p">{</span>

    <span class="cm">/**</span>
<span class="cm">     * Specyfikacja dla pomyślnych odpowiedzi.</span>
<span class="cm">     * @return ResponseSpecification weryfikujące sukces</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">ResponseSpecification</span> <span class="nf">successResponse</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">ResponseSpecBuilder</span><span class="p">()</span>
            <span class="p">.</span><span class="na">expectStatusCode</span><span class="p">(</span><span class="n">anyOf</span><span class="p">(</span><span class="n">is</span><span class="p">(</span><span class="mi">200</span><span class="p">),</span> <span class="n">is</span><span class="p">(</span><span class="mi">201</span><span class="p">),</span> <span class="n">is</span><span class="p">(</span><span class="mi">204</span><span class="p">)))</span>
            <span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="n">LogDetail</span><span class="p">.</span><span class="na">ALL</span><span class="p">)</span>
            <span class="p">.</span><span class="na">build</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Specyfikacja dla odpowiedzi z błędem walidacji.</span>
<span class="cm">     * @return ResponseSpecification weryfikujące błąd walidacji</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">ResponseSpecification</span> <span class="nf">validationErrorResponse</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">ResponseSpecBuilder</span><span class="p">()</span>
            <span class="p">.</span><span class="na">expectStatusCode</span><span class="p">(</span><span class="mi">400</span><span class="p">)</span>
            <span class="p">.</span><span class="na">expectContentType</span><span class="p">(</span><span class="n">ContentType</span><span class="p">.</span><span class="na">JSON</span><span class="p">)</span>
            <span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="n">LogDetail</span><span class="p">.</span><span class="na">ALL</span><span class="p">)</span>
            <span class="p">.</span><span class="na">build</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Specyfikacja dla odpowiedzi o nieautoryzowanym dostępie.</span>
<span class="cm">     * @return ResponseSpecification weryfikujące błąd autoryzacji</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">ResponseSpecification</span> <span class="nf">unauthorizedResponse</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">ResponseSpecBuilder</span><span class="p">()</span>
            <span class="p">.</span><span class="na">expectStatusCode</span><span class="p">(</span><span class="n">anyOf</span><span class="p">(</span><span class="n">is</span><span class="p">(</span><span class="mi">401</span><span class="p">),</span> <span class="n">is</span><span class="p">(</span><span class="mi">403</span><span class="p">)))</span>
            <span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="n">LogDetail</span><span class="p">.</span><span class="na">ALL</span><span class="p">)</span>
            <span class="p">.</span><span class="na">build</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="o">/**</span>
     <span class="o">*</span> <span class="n">Specyfikacja</span> <span class="n">dla</span> <span class="n">odpow</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code>    <span class="cm">/**</span>
<span class="cm">     * Specyfikacja dla odpowiedzi o nieautoryzowanym dostępie.</span>
<span class="cm">     * @return ResponseSpecification weryfikujące błąd autoryzacji</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">ResponseSpecification</span> <span class="nf">unauthorizedResponse</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">ResponseSpecBuilder</span><span class="p">()</span>
            <span class="p">.</span><span class="na">expectStatusCode</span><span class="p">(</span><span class="n">anyOf</span><span class="p">(</span><span class="n">is</span><span class="p">(</span><span class="mi">401</span><span class="p">),</span> <span class="n">is</span><span class="p">(</span><span class="mi">403</span><span class="p">)))</span>
            <span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="n">LogDetail</span><span class="p">.</span><span class="na">ALL</span><span class="p">)</span>
            <span class="p">.</span><span class="na">build</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Specyfikacja dla odpowiedzi &quot;nie znaleziono&quot;.</span>
<span class="cm">     * @return ResponseSpecification weryfikujące 404</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">ResponseSpecification</span> <span class="nf">notFoundResponse</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">ResponseSpecBuilder</span><span class="p">()</span>
            <span class="p">.</span><span class="na">expectStatusCode</span><span class="p">(</span><span class="mi">404</span><span class="p">)</span>
            <span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="n">LogDetail</span><span class="p">.</span><span class="na">ALL</span><span class="p">)</span>
            <span class="p">.</span><span class="na">build</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Specyfikacja weryfikująca zgodność ze schematem JSON.</span>
<span class="cm">     * @param schemaPath Ścieżka do pliku schematu JSON</span>
<span class="cm">     * @return ResponseSpecification weryfikujące schemat JSON</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">ResponseSpecification</span> <span class="nf">matchesJsonSchema</span><span class="p">(</span><span class="n">String</span> <span class="n">schemaPath</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">ResponseSpecBuilder</span><span class="p">()</span>
            <span class="p">.</span><span class="na">expectBody</span><span class="p">(</span><span class="n">matchesJsonSchemaInClasspath</span><span class="p">(</span><span class="n">schemaPath</span><span class="p">))</span>
            <span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="n">LogDetail</span><span class="p">.</span><span class="na">ALL</span><span class="p">)</span>
            <span class="p">.</span><span class="na">build</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h4>Przykładowa implementacja testu API:</h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * Testy funkcjonalności zarządzania użytkownikami.</span>
<span class="cm"> */</span>
<span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;User Management API Tests&quot;</span><span class="p">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserManagementTests</span> <span class="kd">extends</span> <span class="n">BaseApiTest</span> <span class="p">{</span>

    <span class="kd">private</span> <span class="n">UserApiClient</span> <span class="n">userApiClient</span><span class="p">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">testUserId</span><span class="p">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">userIdsToCleanup</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>

    <span class="nd">@BeforeEach</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setUp</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">userApiClient</span> <span class="o">=</span> <span class="k">new</span> <span class="n">UserApiClient</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="nd">@AfterEach</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">cleanup</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Usunięcie testowych użytkowników po teście</span>
        <span class="n">userIdsToCleanup</span><span class="p">.</span><span class="na">forEach</span><span class="p">(</span><span class="n">id</span> <span class="o">-&gt;</span> <span class="p">{</span>
            <span class="k">try</span> <span class="p">{</span>
                <span class="n">userApiClient</span><span class="p">.</span><span class="na">deleteUser</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">log</span><span class="p">.</span><span class="na">warn</span><span class="p">(</span><span class="s">&quot;Could not delete test user {}: {}&quot;</span><span class="p">,</span> <span class="n">id</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">());</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">}</span>

    <span class="nd">@Test</span>
    <span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;Should create a new user with valid data&quot;</span><span class="p">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">shouldCreateNewUserWithValidData</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Arrange</span>
        <span class="n">UserCreateRequest</span> <span class="n">newUser</span> <span class="o">=</span> <span class="n">UserCreateRequest</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
            <span class="p">.</span><span class="na">firstName</span><span class="p">(</span><span class="s">&quot;John&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="na">lastName</span><span class="p">(</span><span class="s">&quot;Kowalski&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="na">email</span><span class="p">(</span><span class="s">&quot;john.Kowalski.&quot;</span> <span class="o">+</span> <span class="n">UUID</span><span class="p">.</span><span class="na">randomUUID</span><span class="p">().</span><span class="na">toString</span><span class="p">()</span> <span class="o">+</span> <span class="s">&quot;@example.com&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="na">password</span><span class="p">(</span><span class="s">&quot;SecurePass123!&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="na">roles</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;USER&quot;</span><span class="p">))</span>
            <span class="p">.</span><span class="na">build</span><span class="p">();</span>

        <span class="c1">// Act</span>
        <span class="n">UserResponse</span> <span class="n">createdUser</span> <span class="o">=</span> <span class="n">userApiClient</span><span class="p">.</span><span class="na">createUser</span><span class="p">(</span><span class="n">newUser</span><span class="p">);</span>
        <span class="n">userIdsToCleanup</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">createdUser</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span>

        <span class="c1">// Assert</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">createdUser</span><span class="p">).</span><span class="na">isNotNull</span><span class="p">();</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">createdUser</span><span class="p">.</span><span class="na">getId</span><span class="p">()).</span><span class="na">isNotEmpty</span><span class="p">();</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">createdUser</span><span class="p">.</span><span class="na">getEmail</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">newUser</span><span class="p">.</span><span class="na">getEmail</span><span class="p">());</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">createdUser</span><span class="p">.</span><span class="na">getFirstName</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">newUser</span><span class="p">.</span><span class="na">getFirstName</span><span class="p">());</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">createdUser</span><span class="p">.</span><span class="na">getLastName</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">newUser</span><span class="p">.</span><span class="na">getLastName</span><span class="p">());</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">createdUser</span><span class="p">.</span><span class="na">getRoles</span><span class="p">()).</span><span class="na">containsExactlyElementsOf</span><span class="p">(</span><span class="n">newUser</span><span class="p">.</span><span class="na">getRoles</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="nd">@Test</span>
    <span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;Should return 400 when creating user with invalid email&quot;</span><span class="p">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">shouldReturn400WhenCreatingUserWithInvalidEmail</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Arrange</span>
        <span class="n">UserCreateRequest</span> <span class="n">invalidUser</span> <span class="o">=</span> <span class="n">UserCreateRequest</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
            <span class="p">.</span><span class="na">firstName</span><span class="p">(</span><span class="s">&quot;John&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="na">lastName</span><span class="p">(</span><span class="s">&quot;Kowalski&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="na">email</span><span class="p">(</span><span class="s">&quot;invalid-email&quot;</span><span class="p">)</span> <span class="c1">// Niepoprawny format email</span>
            <span class="p">.</span><span class="na">password</span><span class="p">(</span><span class="s">&quot;SecurePass123!&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="na">roles</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;USER&quot;</span><span class="p">))</span>
            <span class="p">.</span><span class="na">build</span><span class="p">();</span>

        <span class="c1">// Act &amp; Assert</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="n">userApiClient</span><span class="p">.</span><span class="na">createUser</span><span class="p">(</span><span class="n">invalidUser</span><span class="p">);</span>
            <span class="n">fail</span><span class="p">(</span><span class="s">&quot;Expected an ApiException to be thrown&quot;</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">ApiException</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">assertThat</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">()).</span><span class="na">contains</span><span class="p">(</span><span class="s">&quot;400&quot;</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nd">@Test</span>
    <span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;Should update existing user&quot;</span><span class="p">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">shouldUpdateExistingUser</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Arrange - create a user first</span>
        <span class="n">UserCreateRequest</span> <span class="n">initialUser</span> <span class="o">=</span> <span class="n">UserCreateRequest</span><span class="p">.</span><span class="na">createDefault</span><span class="p">();</span>
        <span class="n">UserResponse</span> <span class="n">createdUser</span> <span class="o">=</span> <span class="n">userApiClient</span><span class="p">.</span><span class="na">createUser</span><span class="p">(</span><span class="n">initialUser</span><span class="p">);</span>
        <span class="n">userIdsToCleanup</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">createdUser</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span>

        <span class="c1">// Define update data</span>
        <span class="n">UserCreateRequest</span> <span class="n">updateData</span> <span class="o">=</span> <span class="n">UserCreateRequest</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
            <span class="p">.</span><span class="na">firstName</span><span class="p">(</span><span class="s">&quot;Updated&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="na">lastName</span><span class="p">(</span><span class="s">&quot;User&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="na">email</span><span class="p">(</span><span class="s">&quot;updated.&quot;</span> <span class="o">+</span> <span class="n">UUID</span><span class="p">.</span><span class="na">randomUUID</span><span class="p">().</span><span class="na">toString</span><span class="p">()</span> <span class="o">+</span> <span class="s">&quot;@example.com&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="na">password</span><span class="p">(</span><span class="s">&quot;NewPassword123!&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="na">roles</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;USER&quot;</span><span class="p">,</span> <span class="s">&quot;ADMIN&quot;</span><span class="p">))</span>
            <span class="p">.</span><span class="na">build</span><span class="p">();</span>

        <span class="c1">// Act</span>
        <span class="n">UserResponse</span> <span class="n">updatedUser</span> <span class="o">=</span> <span class="n">userApiClient</span><span class="p">.</span><span class="na">updateUser</span><span class="p">(</span><span class="n">createdUser</span><span class="p">.</span><span class="na">getId</span><span class="p">(),</span> <span class="n">updateData</span><span class="p">);</span>

        <span class="c1">// Assert</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">updatedUser</span><span class="p">).</span><span class="na">isNotNull</span><span class="p">();</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">updatedUser</span><span class="p">.</span><span class="na">getId</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">createdUser</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">updatedUser</span><span class="p">.</span><span class="na">getFirstName</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">updateData</span><span class="p">.</span><span class="na">getFirstName</span><span class="p">());</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">updatedUser</span><span class="p">.</span><span class="na">getLastName</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">updateData</span><span class="p">.</span><span class="na">getLastName</span><span class="p">());</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">updatedUser</span><span class="p">.</span><span class="na">getEmail</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">updateData</span><span class="p">.</span><span class="na">getEmail</span><span class="p">());</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">updatedUser</span><span class="p">.</span><span class="na">getRoles</span><span class="p">()).</span><span class="na">containsExactlyInAnyOrderElementsOf</span><span class="p">(</span><span class="n">updateData</span><span class="p">.</span><span class="na">getRoles</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="nd">@Test</span>
    <span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;Should delete user&quot;</span><span class="p">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">shouldDeleteUser</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Arrange - create a user first</span>
        <span class="n">UserCreateRequest</span> <span class="n">user</span> <span class="o">=</span> <span class="n">UserCreateRequest</span><span class="p">.</span><span class="na">createDefault</span><span class="p">();</span>
        <span class="n">UserResponse</span> <span class="n">createdUser</span> <span class="o">=</span> <span class="n">userApiClient</span><span class="p">.</span><span class="na">createUser</span><span class="p">(</span><span class="n">user</span><span class="p">);</span>
        <span class="n">String</span> <span class="n">userId</span> <span class="o">=</span> <span class="n">createdUser</span><span class="p">.</span><span class="na">getId</span><span class="p">();</span>

        <span class="c1">// Act</span>
        <span class="n">userApiClient</span><span class="p">.</span><span class="na">deleteUser</span><span class="p">(</span><span class="n">userId</span><span class="p">);</span>

        <span class="c1">// Assert - verify the user is not found</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="n">userApiClient</span><span class="p">.</span><span class="na">getUserById</span><span class="p">(</span><span class="n">userId</span><span class="p">);</span>
            <span class="n">fail</span><span class="p">(</span><span class="s">&quot;Expected an ApiException as user should be deleted&quot;</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">ApiException</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">assertThat</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">()).</span><span class="na">contains</span><span class="p">(</span><span class="s">&quot;404&quot;</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nd">@Test</span>
    <span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;Should find users by search criteria&quot;</span><span class="p">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">shouldFindUsersBySearchCriteria</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Arrange - create users with specific data</span>
        <span class="n">String</span> <span class="n">uniqueLastName</span> <span class="o">=</span> <span class="s">&quot;Searcher&quot;</span> <span class="o">+</span> <span class="n">UUID</span><span class="p">.</span><span class="na">randomUUID</span><span class="p">().</span><span class="na">toString</span><span class="p">().</span><span class="na">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">);</span>

        <span class="n">UserCreateRequest</span> <span class="n">user1</span> <span class="o">=</span> <span class="n">UserCreateRequest</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
            <span class="p">.</span><span class="na">firstName</span><span class="p">(</span><span class="s">&quot;John&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="na">lastName</span><span class="p">(</span><span class="n">uniqueLastName</span><span class="p">)</span>
            <span class="p">.</span><span class="na">email</span><span class="p">(</span><span class="s">&quot;john.&quot;</span> <span class="o">+</span> <span class="n">UUID</span><span class="p">.</span><span class="na">randomUUID</span><span class="p">().</span><span class="na">toString</span><span class="p">()</span> <span class="o">+</span> <span class="s">&quot;@example.com&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="na">password</span><span class="p">(</span><span class="s">&quot;Password123!&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="na">roles</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;USER&quot;</span><span class="p">))</span>
            <span class="p">.</span><span class="na">build</span><span class="p">();</span>

        <span class="n">UserCreateRequest</span> <span class="n">user2</span> <span class="o">=</span> <span class="n">UserCreateRequest</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
            <span class="p">.</span><span class="na">firstName</span><span class="p">(</span><span class="s">&quot;Jane&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="na">lastName</span><span class="p">(</span><span class="n">uniqueLastName</span><span class="p">)</span>
            <span class="p">.</span><span class="na">email</span><span class="p">(</span><span class="s">&quot;jane.&quot;</span> <span class="o">+</span> <span class="n">UUID</span><span class="p">.</span><span class="na">randomUUID</span><span class="p">().</span><span class="na">toString</span><span class="p">()</span> <span class="o">+</span> <span class="s">&quot;@example.com&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="na">password</span><span class="p">(</span><span class="s">&quot;Password123!&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="na">roles</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;USER&quot;</span><span class="p">))</span>
            <span class="p">.</span><span class="na">build</span><span class="p">();</span>

        <span class="n">UserResponse</span> <span class="n">createdUser1</span> <span class="o">=</span> <span class="n">userApiClient</span><span class="p">.</span><span class="na">createUser</span><span class="p">(</span><span class="n">user1</span><span class="p">);</span>
        <span class="n">UserResponse</span> <span class="n">createdUser2</span> <span class="o">=</span> <span class="n">userApiClient</span><span class="p">.</span><span class="na">createUser</span><span class="p">(</span><span class="n">user2</span><span class="p">);</span>
        <span class="n">userIdsToCleanup</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">createdUser1</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span>
        <span class="n">userIdsToCleanup</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">createdUser2</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span>

        <span class="c1">// Act</span>
        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">searchParams</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;</span><span class="p">();</span>
        <span class="n">searchParams</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;lastName&quot;</span><span class="p">,</span> <span class="n">uniqueLastName</span><span class="p">);</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">UserResponse</span><span class="o">&gt;</span> <span class="n">foundUsers</span> <span class="o">=</span> <span class="n">userApiClient</span><span class="p">.</span><span class="na">searchUsers</span><span class="p">(</span><span class="n">searchParams</span><span class="p">);</span>

        <span class="c1">// Assert</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">foundUsers</span><span class="p">).</span><span class="na">isNotNull</span><span class="p">().</span><span class="na">hasSize</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">foundUsers</span><span class="p">.</span><span class="na">stream</span><span class="p">().</span><span class="na">map</span><span class="p">(</span><span class="n">UserResponse</span><span class="p">::</span><span class="n">getLastName</span><span class="p">))</span>
            <span class="p">.</span><span class="na">allMatch</span><span class="p">(</span><span class="n">lastName</span> <span class="o">-&gt;</span> <span class="n">lastName</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">uniqueLastName</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3>Korzyści struktury testów API:</h3>
<ol>
<li><strong>Abstrakcja i enkapsulacja</strong>:</li>
<li>Ukrycie szczegółów technicznych komunikacji HTTP</li>
<li>Centralizacja logiki interakcji z API</li>
<li>
<p>Spójna obsługa błędów i wyjątków</p>
</li>
<li>
<p><strong>Utrzymywalność i skalowalność</strong>:</p>
</li>
<li>Modułowa struktura ułatwiająca rozbudowę</li>
<li>Wielokrotne wykorzystanie komponentów</li>
<li>
<p>Centralizacja konfiguracji i wspólnych elementów</p>
</li>
<li>
<p><strong>Przejrzystość i czytelność</strong>:</p>
</li>
<li>Testy odzwierciedlające operacje biznesowe, a nie techniczne</li>
<li>Spójna terminologia i nazewnictwo</li>
<li>
<p>Czytelna organizacja kodu odpowiadająca strukturze API</p>
</li>
<li>
<p><strong>Elastyczność i adaptowalność</strong>:</p>
</li>
<li>Łatwa aktualizacja przy zmianach w API</li>
<li>Możliwość rozszerzenia o nowe funkcjonalności</li>
<li>Konfiguracja dla różnych środowisk testowych</li>
</ol>
<h2>5.3. Separacja kodu testowego od danych testowych</h2>
<p>Separacja kodu testowego od danych testowych to fundamentalna zasada projektowania frameworka testowego, która znacząco
zwiększa utrzymywalność, czytelność i efektywność testów automatycznych. Podejście to polega na wyraźnym oddzieleniu
logiki testów od danych wejściowych i oczekiwanych wyników.</p>
<h3>Kluczowe aspekty separacji kodu od danych:</h3>
<ol>
<li>
<p><strong>Centralizacja danych testowych</strong>:</p>
</li>
<li>
<p>Dane testowe przechowywane w dedykowanych repozytoriach</p>
</li>
<li>Oddzielenie danych od implementacji testów</li>
<li>
<p>Możliwość wielokrotnego wykorzystania tych samych danych</p>
</li>
<li>
<p><strong>Zewnętrzne źródła danych</strong>:</p>
</li>
<li>
<p>Pliki JSON/XML/CSV zawierające dane testowe</p>
</li>
<li>Bazy danych testowych</li>
<li>
<p>Usługi dostarczające dane testowe</p>
</li>
<li>
<p><strong>Parametryzacja testów</strong>:</p>
</li>
<li>
<p>Uruchamianie tych samych testów z różnymi zestawami danych</p>
</li>
<li>Dynamiczne pobieranie danych w czasie wykonania</li>
<li>
<p>Czytelne raportowanie z informacją o wykorzystanych danych</p>
</li>
<li>
<p><strong>Generatory danych testowych</strong>:</p>
</li>
<li>
<p>Programowe tworzenie danych syntetycznych</p>
</li>
<li>Fabryki obiektów testowych</li>
<li>Randomizacja danych dla zwiększenia pokrycia testowego</li>
</ol>
<h3>Implementacja separacji danych dla testów UI:</h3>
<h4>Podejście z wykorzystaniem plików zewnętrznych:</h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * Klasa odpowiedzialna za ładowanie i zarządzanie danymi testowymi z plików JSON.</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestDataLoader</span> <span class="p">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">ObjectMapper</span> <span class="n">objectMapper</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ObjectMapper</span><span class="p">();</span>

    <span class="cm">/**</span>
<span class="cm">     * Ładuje dane testowe z pliku JSON.</span>
<span class="cm">     * @param filePath Ścieżka do pliku z danymi</span>
<span class="cm">     * @param clazz Klasa docelowa</span>
<span class="cm">     * @param &lt;T&gt; Typ danych</span>
<span class="cm">     * @return Obiekt zawierający dane testowe</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">T</span> <span class="nf">loadFromJson</span><span class="p">(</span><span class="n">String</span> <span class="n">filePath</span><span class="p">,</span> <span class="n">Class</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">clazz</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="n">InputStream</span> <span class="n">is</span> <span class="o">=</span> <span class="n">TestDataLoader</span><span class="p">.</span><span class="na">class</span><span class="p">.</span><span class="na">getResourceAsStream</span><span class="p">(</span><span class="n">filePath</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">is</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;File not found: &quot;</span> <span class="o">+</span> <span class="n">filePath</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="n">objectMapper</span><span class="p">.</span><span class="na">readValue</span><span class="p">(</span><span class="n">is</span><span class="p">,</span> <span class="n">clazz</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">IOException</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="n">RuntimeException</span><span class="p">(</span><span class="s">&quot;Failed to load test data from &quot;</span> <span class="o">+</span> <span class="n">filePath</span><span class="p">,</span> <span class="n">e</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Ładuje kolekcję danych testowych z pliku JSON.</span>
<span class="cm">     * @param filePath Ścieżka do pliku z danymi</span>
<span class="cm">     * @param elementClass Klasa elementów kolekcji</span>
<span class="cm">     * @param &lt;T&gt; Typ elementów</span>
<span class="cm">     * @return Lista obiektów danych testowych</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="nf">loadListFromJson</span><span class="p">(</span><span class="n">String</span> <span class="n">filePath</span><span class="p">,</span> <span class="n">Class</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">elementClass</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="n">InputStream</span> <span class="n">is</span> <span class="o">=</span> <span class="n">TestDataLoader</span><span class="p">.</span><span class="na">class</span><span class="p">.</span><span class="na">getResourceAsStream</span><span class="p">(</span><span class="n">filePath</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">is</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;File not found: &quot;</span> <span class="o">+</span> <span class="n">filePath</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="n">JavaType</span> <span class="n">type</span> <span class="o">=</span> <span class="n">objectMapper</span><span class="p">.</span><span class="na">getTypeFactory</span><span class="p">()</span>
                <span class="p">.</span><span class="na">constructCollectionType</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">class</span><span class="p">,</span> <span class="n">elementClass</span><span class="p">);</span>
            <span class="k">return</span> <span class="n">objectMapper</span><span class="p">.</span><span class="na">readValue</span><span class="p">(</span><span class="n">is</span><span class="p">,</span> <span class="n">type</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">IOException</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="n">RuntimeException</span><span class="p">(</span><span class="s">&quot;Failed to load test data list from &quot;</span> <span class="o">+</span> <span class="n">filePath</span><span class="p">,</span> <span class="n">e</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Ładuje dane testowe z pliku CSV.</span>
<span class="cm">     * @param filePath Ścieżka do pliku CSV</span>
<span class="cm">     * @return Lista map reprezentujących wiersze CSV</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">String</span><span class="o">&gt;&gt;</span> <span class="nf">loadFromCsv</span><span class="p">(</span><span class="n">String</span> <span class="n">filePath</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="n">InputStream</span> <span class="n">is</span> <span class="o">=</span> <span class="n">TestDataLoader</span><span class="p">.</span><span class="na">class</span><span class="p">.</span><span class="na">getResourceAsStream</span><span class="p">(</span><span class="n">filePath</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">is</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;File not found: &quot;</span> <span class="o">+</span> <span class="n">filePath</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="n">CsvReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CsvReader</span><span class="p">();</span>
            <span class="n">reader</span><span class="p">.</span><span class="na">setContainsHeader</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
            <span class="k">return</span> <span class="n">reader</span><span class="p">.</span><span class="na">read</span><span class="p">(</span><span class="n">is</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="n">RuntimeException</span><span class="p">(</span><span class="s">&quot;Failed to load CSV data from &quot;</span> <span class="o">+</span> <span class="n">filePath</span><span class="p">,</span> <span class="n">e</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h4>Organizacja danych testowych w plikach:</h4>
<div class="codehilite"><pre><span></span><code>src/test/resources/test-data/
├── ui/
│   ├── login/
│   │   ├── valid-users.json
│   │   └── invalid-users.json
│   ├── products/
│   │   ├── product-catalog.json
│   │   └── product-details.json
│   └── checkout/
│       ├── payment-methods.json
│       └── shipping-options.json
└── api/
    ├── user/
    │   ├── create-user-requests.json
    │   └── user-responses.json
    ├── product/
    │   ├── product-requests.json
    │   └── product-responses.json
    └── order/
        ├── order-requests.json
        └── order-responses.json
</code></pre></div>

<h4>Przykładowy plik JSON z danymi testowymi:</h4>
<div class="codehilite"><pre><span></span><code><span class="err">//</span><span class="w"> </span><span class="err">valid</span><span class="mi">-</span><span class="err">users.jso</span><span class="kc">n</span><span class="w"></span>
<span class="p">[</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;username&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;standard_user&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;password&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;secret_sauce&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;firstName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;John&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;lastName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Kowalski&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;expectedRole&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;STANDARD&quot;</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;username&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;admin_user&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;password&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;admin123&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;firstName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Admin&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;lastName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;User&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;expectedRole&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ADMIN&quot;</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;username&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;locked_out_user&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;password&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;secret_sauce&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;firstName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Locked&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;lastName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;User&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;expectedRole&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;LOCKED&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;expectError&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;errorMessage&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;This user has been locked out.&quot;</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">]</span><span class="w"></span>
</code></pre></div>

<h4>Wykorzystanie zewnętrznych danych w testach UI:</h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * Testy funkcjonalności logowania z wykorzystaniem zewnętrznych danych testowych.</span>
<span class="cm"> */</span>
<span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;Login Functionality Tests&quot;</span><span class="p">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LoginTests</span> <span class="kd">extends</span> <span class="n">BaseTest</span> <span class="p">{</span>

    <span class="kd">private</span> <span class="n">LoginPage</span> <span class="n">loginPage</span><span class="p">;</span>

    <span class="nd">@BeforeEach</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setUp</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">loginPage</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LoginPage</span><span class="p">();</span>
        <span class="n">loginPage</span><span class="p">.</span><span class="na">open</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Test z parametrami z pliku JSON.</span>
<span class="cm">     * Każdy rekord w pliku JSON generuje oddzielny przypadek testowy.</span>
<span class="cm">     */</span>
    <span class="nd">@ParameterizedTest</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;User login: {0}&quot;</span><span class="p">)</span>
    <span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;User can log in with valid credentials&quot;</span><span class="p">)</span>
    <span class="nd">@MethodSource</span><span class="p">(</span><span class="s">&quot;provideValidUsers&quot;</span><span class="p">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">userCanLoginWithValidCredentials</span><span class="p">(</span><span class="n">UserTestData</span> <span class="n">userData</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Test tylko dla użytkowników bez oczekiwanego błędu</span>
        <span class="n">assumeFalse</span><span class="p">(</span><span class="n">userData</span><span class="p">.</span><span class="na">isExpectError</span><span class="p">());</span>

        <span class="c1">// Wykonanie logowania</span>
        <span class="n">DashboardPage</span> <span class="n">dashboardPage</span> <span class="o">=</span> <span class="n">loginPage</span><span class="p">.</span><span class="na">loginAs</span><span class="p">(</span>
            <span class="n">userData</span><span class="p">.</span><span class="na">getUsername</span><span class="p">(),</span> 
            <span class="n">userData</span><span class="p">.</span><span class="na">getPassword</span><span class="p">()</span>
        <span class="p">);</span>

        <span class="c1">// Weryfikacja</span>
        <span class="n">dashboardPage</span><span class="p">.</span><span class="na">getUserInfoPanel</span><span class="p">()</span>
            <span class="p">.</span><span class="na">shouldBe</span><span class="p">(</span><span class="n">visible</span><span class="p">)</span>
            <span class="p">.</span><span class="na">shouldHave</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="n">userData</span><span class="p">.</span><span class="na">getFirstName</span><span class="p">()));</span>

        <span class="c1">// Dodatkowa weryfikacja roli jeśli określona</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">userData</span><span class="p">.</span><span class="na">getExpectedRole</span><span class="p">()</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="s">&quot;ADMIN&quot;</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">userData</span><span class="p">.</span><span class="na">getExpectedRole</span><span class="p">()))</span> <span class="p">{</span>
                <span class="n">dashboardPage</span><span class="p">.</span><span class="na">getAdminPanel</span><span class="p">().</span><span class="na">shouldBe</span><span class="p">(</span><span class="n">visible</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="n">dashboardPage</span><span class="p">.</span><span class="na">getAdminPanel</span><span class="p">().</span><span class="na">shouldNotBe</span><span class="p">(</span><span class="n">visible</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Test dla przypadków błędnego logowania.</span>
<span class="cm">     */</span>
    <span class="nd">@ParameterizedTest</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;Error login: {0}&quot;</span><span class="p">)</span>
    <span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;System shows error for invalid login attempts&quot;</span><span class="p">)</span>
    <span class="nd">@MethodSource</span><span class="p">(</span><span class="s">&quot;provideInvalidUsers&quot;</span><span class="p">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">systemShowsErrorForInvalidLogin</span><span class="p">(</span><span class="n">UserTestData</span> <span class="n">userData</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Test tylko dla użytkowników z oczekiwanym błędem</span>
        <span class="n">assumeTrue</span><span class="p">(</span><span class="n">userData</span><span class="p">.</span><span class="na">isExpectError</span><span class="p">());</span>

        <span class="c1">// Próba logowania</span>
        <span class="n">loginPage</span><span class="p">.</span><span class="na">loginExpectingError</span><span class="p">(</span>
            <span class="n">userData</span><span class="p">.</span><span class="na">getUsername</span><span class="p">(),</span> 
            <span class="n">userData</span><span class="p">.</span><span class="na">getPassword</span><span class="p">()</span>
        <span class="p">);</span>

        <span class="c1">// Weryfikacja komunikatu błędu</span>
        <span class="n">loginPage</span><span class="p">.</span><span class="na">getErrorMessage</span><span class="p">()</span>
            <span class="p">.</span><span class="na">shouldBe</span><span class="p">(</span><span class="n">visible</span><span class="p">);</span>

        <span class="c1">// Weryfikacja szczegółowego komunikatu jeśli określony</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">userData</span><span class="p">.</span><span class="na">getErrorMessage</span><span class="p">()</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">loginPage</span><span class="p">.</span><span class="na">getErrorMessage</span><span class="p">()</span>
                <span class="p">.</span><span class="na">shouldHave</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="n">userData</span><span class="p">.</span><span class="na">getErrorMessage</span><span class="p">()));</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Dostawca danych dla testów poprawnego logowania.</span>
<span class="cm">     * @return Strumień danych testowych</span>
<span class="cm">     */</span>
    <span class="kd">static</span> <span class="n">Stream</span><span class="o">&lt;</span><span class="n">UserTestData</span><span class="o">&gt;</span> <span class="nf">provideValidUsers</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">UserTestData</span><span class="o">&gt;</span> <span class="n">users</span> <span class="o">=</span> <span class="n">TestDataLoader</span><span class="p">.</span><span class="na">loadListFromJson</span><span class="p">(</span>
            <span class="s">&quot;/test-data/ui/login/valid-users.json&quot;</span><span class="p">,</span> 
            <span class="n">UserTestData</span><span class="p">.</span><span class="na">class</span>
        <span class="p">);</span>
        <span class="k">return</span> <span class="n">users</span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
            <span class="p">.</span><span class="na">filter</span><span class="p">(</span><span class="n">user</span> <span class="o">-&gt;</span> <span class="o">!</span><span class="n">user</span><span class="p">.</span><span class="na">isExpectError</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Dostawca danych dla testów niepoprawnego logowania.</span>
<span class="cm">     * @return Strumień danych testowych</span>
<span class="cm">     */</span>
    <span class="kd">static</span> <span class="n">Stream</span><span class="o">&lt;</span><span class="n">UserTestData</span><span class="o">&gt;</span> <span class="nf">provideInvalidUsers</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">UserTestData</span><span class="o">&gt;</span> <span class="n">allUsers</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>

        <span class="c1">// Załaduj użytkowników z pliku valid-users.json którzy mają flagę expectError</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">UserTestData</span><span class="o">&gt;</span> <span class="n">validUsersWithErrors</span> <span class="o">=</span> <span class="n">TestDataLoader</span><span class="p">.</span><span class="na">loadListFromJson</span><span class="p">(</span>
            <span class="s">&quot;/test-data/ui/login/valid-users.json&quot;</span><span class="p">,</span> 
            <span class="n">UserTestData</span><span class="p">.</span><span class="na">class</span>
        <span class="p">).</span><span class="na">stream</span><span class="p">()</span>
        <span class="p">.</span><span class="na">filter</span><span class="p">(</span><span class="n">UserTestData</span><span class="p">::</span><span class="n">isExpectError</span><span class="p">)</span>
        <span class="p">.</span><span class="na">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="na">toList</span><span class="p">());</span>

        <span class="c1">// Załaduj użytkowników z pliku invalid-users.json</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">UserTestData</span><span class="o">&gt;</span> <span class="n">invalidUsers</span> <span class="o">=</span> <span class="n">TestDataLoader</span><span class="p">.</span><span class="na">loadListFromJson</span><span class="p">(</span>
            <span class="s">&quot;/test-data/ui/login/invalid-users.json&quot;</span><span class="p">,</span> 
            <span class="n">UserTestData</span><span class="p">.</span><span class="na">class</span>
        <span class="p">);</span>

        <span class="n">allUsers</span><span class="p">.</span><span class="na">addAll</span><span class="p">(</span><span class="n">validUsersWithErrors</span><span class="p">);</span>
        <span class="n">allUsers</span><span class="p">.</span><span class="na">addAll</span><span class="p">(</span><span class="n">invalidUsers</span><span class="p">);</span>

        <span class="k">return</span> <span class="n">allUsers</span><span class="p">.</span><span class="na">stream</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Klasa reprezentująca dane testowe użytkownika.</span>
<span class="cm">     */</span>
    <span class="nd">@Data</span>
    <span class="nd">@NoArgsConstructor</span>
    <span class="nd">@AllArgsConstructor</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">UserTestData</span> <span class="p">{</span>
        <span class="kd">private</span> <span class="n">String</span> <span class="n">username</span><span class="p">;</span>
        <span class="kd">private</span> <span class="n">String</span> <span class="n">password</span><span class="p">;</span>
        <span class="kd">private</span> <span class="n">String</span> <span class="n">firstName</span><span class="p">;</span>
        <span class="kd">private</span> <span class="n">String</span> <span class="n">lastName</span><span class="p">;</span>
        <span class="kd">private</span> <span class="n">String</span> <span class="n">expectedRole</span><span class="p">;</span>
        <span class="kd">private</span> <span class="kt">boolean</span> <span class="n">expectError</span><span class="p">;</span>
        <span class="kd">private</span> <span class="n">String</span> <span class="n">errorMessage</span><span class="p">;</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="n">username</span> <span class="o">+</span> <span class="p">(</span><span class="n">expectError</span> <span class="o">?</span> <span class="s">&quot; (error expected)&quot;</span> <span class="p">:</span> <span class="s">&quot;&quot;</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3>Implementacja separacji danych dla testów API:</h3>
<h4>Fabryki danych testowych:</h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * Fabryka generująca dane testowe dla testów API.</span>
<span class="cm"> * Centralizuje logikę tworzenia obiektów testowych.</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ApiTestDataFactory</span> <span class="p">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Faker</span> <span class="n">faker</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Faker</span><span class="p">();</span>

    <span class="cm">/**</span>
<span class="cm">     * Generuje dane dla utworzenia nowego użytkownika.</span>
<span class="cm">     * @return Obiekt żądania utworzenia użytkownika</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">UserCreateRequest</span> <span class="nf">createRandomUser</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">UserCreateRequest</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
            <span class="p">.</span><span class="na">firstName</span><span class="p">(</span><span class="n">faker</span><span class="p">.</span><span class="na">name</span><span class="p">().</span><span class="na">firstName</span><span class="p">())</span>
            <span class="p">.</span><span class="na">lastName</span><span class="p">(</span><span class="n">faker</span><span class="p">.</span><span class="na">name</span><span class="p">().</span><span class="na">lastName</span><span class="p">())</span>
            <span class="p">.</span><span class="na">email</span><span class="p">(</span><span class="n">faker</span><span class="p">.</span><span class="na">internet</span><span class="p">().</span><span class="na">emailAddress</span><span class="p">())</span>
            <span class="p">.</span><span class="na">password</span><span class="p">(</span><span class="n">faker</span><span class="p">.</span><span class="na">internet</span><span class="p">().</span><span class="na">password</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="kc">true</span><span class="p">))</span>
            <span class="p">.</span><span class="na">roles</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;USER&quot;</span><span class="p">))</span>
            <span class="p">.</span><span class="na">build</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Generuje dane dla użytkownika z określoną rolą.</span>
<span class="cm">     * @param role Rola użytkownika</span>
<span class="cm">     * @return Obiekt żądania utworzenia użytkownika</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">UserCreateRequest</span> <span class="nf">createUserWithRole</span><span class="p">(</span><span class="n">String</span> <span class="n">role</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">UserCreateRequest</span> <span class="n">user</span> <span class="o">=</span> <span class="n">createRandomUser</span><span class="p">();</span>
        <span class="n">user</span><span class="p">.</span><span class="na">setRoles</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">role</span><span class="p">));</span>
        <span class="k">return</span> <span class="n">user</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Generuje dane dla zamówienia.</span>
<span class="cm">     * @return Obiekt żądania utworzenia zamówienia</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">OrderCreateRequest</span> <span class="nf">createRandomOrder</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">OrderItem</span><span class="o">&gt;</span> <span class="n">items</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>

        <span class="c1">// Dodaj 1-5 losowych produktów</span>
        <span class="kt">int</span> <span class="n">itemCount</span> <span class="o">=</span> <span class="n">faker</span><span class="p">.</span><span class="na">number</span><span class="p">().</span><span class="na">numberBetween</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">itemCount</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">items</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">OrderItem</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
                <span class="p">.</span><span class="na">productId</span><span class="p">(</span><span class="n">UUID</span><span class="p">.</span><span class="na">randomUUID</span><span class="p">().</span><span class="na">toString</span><span class="p">())</span>
                <span class="p">.</span><span class="na">quantity</span><span class="p">(</span><span class="n">faker</span><span class="p">.</span><span class="na">number</span><span class="p">().</span><span class="na">numberBetween</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
                <span class="p">.</span><span class="na">unitPrice</span><span class="p">(</span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">faker</span><span class="p">.</span><span class="na">number</span><span class="p">().</span><span class="na">randomDouble</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)))</span>
                <span class="p">.</span><span class="na">build</span><span class="p">());</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">OrderCreateRequest</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
            <span class="p">.</span><span class="na">customerName</span><span class="p">(</span><span class="n">faker</span><span class="p">.</span><span class="na">name</span><span class="p">().</span><span class="na">fullName</span><span class="p">())</span>
            <span class="p">.</span><span class="na">customerEmail</span><span class="p">(</span><span class="n">faker</span><span class="p">.</span><span class="na">internet</span><span class="p">().</span><span class="na">emailAddress</span><span class="p">())</span>
            <span class="p">.</span><span class="na">shippingAddress</span><span class="p">(</span><span class="n">createRandomAddress</span><span class="p">())</span>
            <span class="p">.</span><span class="na">billingAddress</span><span class="p">(</span><span class="n">createRandomAddress</span><span class="p">())</span>
            <span class="p">.</span><span class="na">paymentMethod</span><span class="p">(</span><span class="s">&quot;CREDIT_CARD&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="na">items</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
            <span class="p">.</span><span class="na">build</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Generuje losowy adres.</span>
<span class="cm">     * @return Obiekt adresu</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">Address</span> <span class="nf">createRandomAddress</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">Address</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
            <span class="p">.</span><span class="na">street</span><span class="p">(</span><span class="n">faker</span><span class="p">.</span><span class="na">address</span><span class="p">().</span><span class="na">streetAddress</span><span class="p">())</span>
            <span class="p">.</span><span class="na">city</span><span class="p">(</span><span class="n">faker</span><span class="p">.</span><span class="na">address</span><span class="p">().</span><span class="na">city</span><span class="p">())</span>
            <span class="p">.</span><span class="na">state</span><span class="p">(</span><span class="n">faker</span><span class="p">.</span><span class="na">address</span><span class="p">().</span><span class="na">state</span><span class="p">())</span>
            <span class="p">.</span><span class="na">postalCode</span><span class="p">(</span><span class="n">faker</span><span class="p">.</span><span class="na">address</span><span class="p">().</span><span class="na">zipCode</span><span class="p">())</span>
            <span class="p">.</span><span class="na">country</span><span class="p">(</span><span class="n">faker</span><span class="p">.</span><span class="na">address</span><span class="p">().</span><span class="na">country</span><span class="p">())</span>
            <span class="p">.</span><span class="na">build</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Ładuje dane testowe z pliku JSON i modyfikuje pola w celu zapewnienia unikalności.</span>
<span class="cm">     * @param filePath Ścieżka do pliku</span>
<span class="cm">     * @return Zmodyfikowany obiekt żądania</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">UserCreateRequest</span> <span class="nf">loadAndModifyUserData</span><span class="p">(</span><span class="n">String</span> <span class="n">filePath</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">UserCreateRequest</span> <span class="n">template</span> <span class="o">=</span> <span class="n">TestDataLoader</span><span class="p">.</span><span class="na">loadFromJson</span><span class="p">(</span><span class="n">filePath</span><span class="p">,</span> <span class="n">UserCreateRequest</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>

        <span class="c1">// Modyfikacja pól zapewniająca unikalność</span>
        <span class="n">String</span> <span class="n">uniqueSuffix</span> <span class="o">=</span> <span class="n">UUID</span><span class="p">.</span><span class="na">randomUUID</span><span class="p">().</span><span class="na">toString</span><span class="p">().</span><span class="na">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">);</span>
        <span class="n">template</span><span class="p">.</span><span class="na">setEmail</span><span class="p">(</span><span class="n">template</span><span class="p">.</span><span class="na">getEmail</span><span class="p">().</span><span class="na">replace</span><span class="p">(</span><span class="s">&quot;@&quot;</span><span class="p">,</span> <span class="s">&quot;.&quot;</span> <span class="o">+</span> <span class="n">uniqueSuffix</span> <span class="o">+</span> <span class="s">&quot;@&quot;</span><span class="p">));</span>

        <span class="k">return</span> <span class="n">template</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h4>Parametryzacja testów API:</h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * Przykład testów API z separacją kodu i danych.</span>
<span class="cm"> */</span>
<span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;Product API Tests&quot;</span><span class="p">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ProductApiTests</span> <span class="kd">extends</span> <span class="n">BaseApiTest</span> <span class="p">{</span>

    <span class="kd">private</span> <span class="n">ProductApiClient</span> <span class="n">productApiClient</span><span class="p">;</span>

    <span class="nd">@BeforeEach</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setUp</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">productApiClient</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ProductApiClient</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Test parametryzowany z danymi z pliku CSV.</span>
<span class="cm">     */</span>
    <span class="nd">@ParameterizedTest</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;Product search with category: {0}, minPrice: {1}, maxPrice: {2}&quot;</span><span class="p">)</span>
    <span class="nd">@CsvFileSource</span><span class="p">(</span><span class="n">resources</span> <span class="o">=</span> <span class="s">&quot;/test-data/api/product/search-criteria.csv&quot;</span><span class="p">,</span> 
                  <span class="n">numLinesToSkip</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="c1">// Pomiń nagłówek</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">shouldFilterProductsBySearchCriteria</span><span class="p">(</span><span class="n">String</span> <span class="n">category</span><span class="p">,</span> 
                                                   <span class="n">BigDecimal</span> <span class="n">minPrice</span><span class="p">,</span> 
                                                   <span class="n">BigDecimal</span> <span class="n">maxPrice</span><span class="p">,</span>
                                                   <span class="kt">int</span> <span class="n">expectedMinResults</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Arrange</span>
        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">searchParams</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;</span><span class="p">();</span>
        <span class="n">searchParams</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;category&quot;</span><span class="p">,</span> <span class="n">category</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">minPrice</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">searchParams</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;minPrice&quot;</span><span class="p">,</span> <span class="n">minPrice</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">maxPrice</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">searchParams</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;maxPrice&quot;</span><span class="p">,</span> <span class="n">maxPrice</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="c1">// Act</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">ProductResponse</span><span class="o">&gt;</span> <span class="n">results</span> <span class="o">=</span> <span class="n">productApiClient</span><span class="p">.</span><span class="na">searchProducts</span><span class="p">(</span><span class="n">searchParams</span><span class="p">);</span>

        <span class="c1">// Assert</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">results</span><span class="p">).</span><span class="na">isNotNull</span><span class="p">();</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">results</span><span class="p">.</span><span class="na">size</span><span class="p">()).</span><span class="na">isGreaterThanOrEqualTo</span><span class="p">(</span><span class="n">expectedMinResults</span><span class="p">);</span>

        <span class="k">for</span> <span class="p">(</span><span class="n">ProductResponse</span> <span class="n">product</span> <span class="p">:</span> <span class="n">results</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// Verify category filter</span>
            <span class="n">assertThat</span><span class="p">(</span><span class="n">product</span><span class="p">.</span><span class="na">getCategory</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">category</span><span class="p">);</span>

            <span class="c1">// Verify price range if specified</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">minPrice</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">assertThat</span><span class="p">(</span><span class="n">product</span><span class="p">.</span><span class="na">getPrice</span><span class="p">()).</span><span class="na">isGreaterThanOrEqualTo</span><span class="p">(</span><span class="n">minPrice</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">maxPrice</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">assertThat</span><span class="p">(</span><span class="n">product</span><span class="p">.</span><span class="na">getPrice</span><span class="p">()).</span><span class="na">isLessThanOrEqualTo</span><span class="p">(</span><span class="n">maxPrice</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Test wykorzystujący dane z pliku JSON.</span>
<span class="cm">     */</span>
    <span class="nd">@Test</span>
    <span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;Should create product with valid data&quot;</span><span class="p">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">shouldCreateProductWithValidData</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Arrange - load base data from JSON</span>
        <span class="n">ProductCreateRequest</span> <span class="n">productData</span> <span class="o">=</span> <span class="n">TestDataLoader</span><span class="p">.</span><span class="na">loadFromJson</span><span class="p">(</span>
            <span class="s">&quot;/test-data/api/product/valid-product.json&quot;</span><span class="p">,</span> 
            <span class="n">ProductCreateRequest</span><span class="p">.</span><span class="na">class</span>
        <span class="p">);</span>

        <span class="c1">// Modify to ensure uniqueness</span>
        <span class="n">String</span> <span class="n">uniqueSuffix</span> <span class="o">=</span> <span class="n">UUID</span><span class="p">.</span><span class="na">randomUUID</span><span class="p">().</span><span class="na">toString</span><span class="p">().</span><span class="na">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">);</span>
        <span class="n">productData</span><span class="p">.</span><span class="na">setName</span><span class="p">(</span><span class="n">productData</span><span class="p">.</span><span class="na">getName</span><span class="p">()</span> <span class="o">+</span> <span class="s">&quot; &quot;</span> <span class="o">+</span> <span class="n">uniqueSuffix</span><span class="p">);</span>
        <span class="n">productData</span><span class="p">.</span><span class="na">setSku</span><span class="p">(</span><span class="s">&quot;SKU-&quot;</span> <span class="o">+</span> <span class="n">uniqueSuffix</span><span class="p">);</span>

        <span class="c1">// Act</span>
        <span class="n">ProductResponse</span> <span class="n">createdProduct</span> <span class="o">=</span> <span class="n">productApiClient</span><span class="p">.</span><span class="na">createProduct</span><span class="p">(</span><span class="n">productData</span><span class="p">);</span>

        <span class="c1">// Assert</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">createdProduct</span><span class="p">).</span><span class="na">isNotNull</span><span class="p">();</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">createdProduct</span><span class="p">.</span><span class="na">getId</span><span class="p">()).</span><span class="na">isNotEmpty</span><span class="p">();</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">createdProduct</span><span class="p">.</span><span class="na">getName</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">productData</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">createdProduct</span><span class="p">.</span><span class="na">getSku</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">productData</span><span class="p">.</span><span class="na">getSku</span><span class="p">());</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">createdProduct</span><span class="p">.</span><span class="na">getPrice</span><span class="p">()).</span><span class="na">isEqualByComparingTo</span><span class="p">(</span><span class="n">productData</span><span class="p">.</span><span class="na">getPrice</span><span class="p">());</span>

        <span class="c1">// Cleanup</span>
        <span class="n">productApiClient</span><span class="p">.</span><span class="na">deleteProduct</span><span class="p">(</span><span class="n">createdProduct</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Test wykorzystujący generator danych.</span>
<span class="cm">     */</span>
    <span class="nd">@Test</span>
    <span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;Should update product fields&quot;</span><span class="p">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">shouldUpdateProductFields</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Arrange - create a product using generator</span>
        <span class="n">ProductCreateRequest</span> <span class="n">initialProduct</span> <span class="o">=</span> <span class="n">ProductTestDataFactory</span><span class="p">.</span><span class="na">createRandomProduct</span><span class="p">();</span>
        <span class="n">ProductResponse</span> <span class="n">createdProduct</span> <span class="o">=</span> <span class="n">productApiClient</span><span class="p">.</span><span class="na">createProduct</span><span class="p">(</span><span class="n">initialProduct</span><span class="p">);</span>

        <span class="c1">// Prepare update data</span>
        <span class="n">ProductUpdateRequest</span> <span class="n">updateData</span> <span class="o">=</span> <span class="n">ProductUpdateRequest</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
            <span class="p">.</span><span class="na">name</span><span class="p">(</span><span class="s">&quot;Updated &quot;</span> <span class="o">+</span> <span class="n">initialProduct</span><span class="p">.</span><span class="na">getName</span><span class="p">())</span>
            <span class="p">.</span><span class="na">description</span><span class="p">(</span><span class="s">&quot;Updated description&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="na">price</span><span class="p">(</span><span class="n">initialProduct</span><span class="p">.</span><span class="na">getPrice</span><span class="p">().</span><span class="na">multiply</span><span class="p">(</span><span class="n">BigDecimal</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="mf">1.1</span><span class="p">)))</span> <span class="c1">// 10% increase</span>
            <span class="p">.</span><span class="na">build</span><span class="p">();</span>

        <span class="c1">// Act</span>
        <span class="n">ProductResponse</span> <span class="n">updatedProduct</span> <span class="o">=</span> <span class="n">productApiClient</span><span class="p">.</span><span class="na">updateProduct</span><span class="p">(</span>
            <span class="n">createdProduct</span><span class="p">.</span><span class="na">getId</span><span class="p">(),</span> 
            <span class="n">updateData</span>
        <span class="p">);</span>

        <span class="c1">// Assert</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">updatedProduct</span><span class="p">).</span><span class="na">isNotNull</span><span class="p">();</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">updatedProduct</span><span class="p">.</span><span class="na">getId</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">createdProduct</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">updatedProduct</span><span class="p">.</span><span class="na">getName</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">updateData</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">updatedProduct</span><span class="p">.</span><span class="na">getDescription</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">updateData</span><span class="p">.</span><span class="na">getDescription</span><span class="p">());</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">updatedProduct</span><span class="p">.</span><span class="na">getPrice</span><span class="p">()).</span><span class="na">isEqualByComparingTo</span><span class="p">(</span><span class="n">updateData</span><span class="p">.</span><span class="na">getPrice</span><span class="p">());</span>

        <span class="c1">// Verify that unmodified fields remain the same</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">updatedProduct</span><span class="p">.</span><span class="na">getSku</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">createdProduct</span><span class="p">.</span><span class="na">getSku</span><span class="p">());</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">updatedProduct</span><span class="p">.</span><span class="na">getCategory</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="n">createdProduct</span><span class="p">.</span><span class="na">getCategory</span><span class="p">());</span>

        <span class="c1">// Cleanup</span>
        <span class="n">productApiClient</span><span class="p">.</span><span class="na">deleteProduct</span><span class="p">(</span><span class="n">updatedProduct</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3>Korzyści separacji kodu od danych:</h3>
<ol>
<li>
<p><strong>Zwiększona utrzymywalność</strong>:</p>
</li>
<li>
<p>Zmiany w danych testowych nie wymagają modyfikacji kodu</p>
</li>
<li>Łatwiejsze zarządzanie różnymi zestawami danych dla różnych środowisk</li>
<li>
<p>Mniej duplikacji kodu przez wielokrotne wykorzystanie logiki testowej</p>
</li>
<li>
<p><strong>Lepsza czytelność i organizacja</strong>:</p>
</li>
<li>
<p>Przejrzysta struktura z wyraźnym podziałem odpowiedzialności</p>
</li>
<li>Łatwiejsza nawigacja i zrozumienie testów</li>
<li>
<p>Bardziej deklaratywny charakter testów</p>
</li>
<li>
<p><strong>Większe pokrycie testowe</strong>:</p>
</li>
<li>
<p>Łatwe rozszerzanie pokrycia przez dodawanie nowych zestawów danych</p>
</li>
<li>Parametryzacja testów zwiększająca różnorodność scenariuszy</li>
<li>
<p>Efektywne testowanie przypadków brzegowych</p>
</li>
<li>
<p><strong>Efektywność procesu testowego</strong>:</p>
</li>
<li>
<p>Szybsze tworzenie nowych testów</p>
</li>
<li>Łatwiejsza adaptacja do zmian w testowanej aplikacji</li>
<li>
<p>Możliwość równoległej pracy nad kodem i danymi testowymi</p>
</li>
<li>
<p><strong>Elastyczność i skalowalność</strong>:</p>
</li>
<li>
<p>Łatwe dostosowanie testów do różnych środowisk</p>
</li>
<li>Mniejsze bariery wejścia dla nowych członków zespołu</li>
<li>Możliwość zarządzania dużymi zbiorami danych testowych</li>
</ol>
<h2>5.4. Projektowanie pod kątem utrzymywalności</h2>
<p>Projektowanie frameworka testowego pod kątem utrzymywalności to strategiczne podejście zapewniające, że testy
automatyczne pozostaną efektywne, niezawodne i łatwe do aktualizacji w miarę ewolucji aplikacji. Jest to kluczowy aspekt
architektury, który bezpośrednio wpływa na długoterminową wartość inwestycji w automatyzację.</p>
<h3>Kluczowe zasady projektowania pod kątem utrzymywalności:</h3>
<ol>
<li>
<p><strong>Abstrakcja i enkapsulacja</strong>:</p>
<ul>
<li>Ukrywanie szczegółów implementacyjnych za odpowiednimi interfejsami</li>
<li>Ograniczenie zależności między komponentami</li>
<li>Izolacja zmian w jednym miejscu</li>
</ul>
</li>
<li>
<p><strong>Modularność i kompozycja</strong>:</p>
<ul>
<li>Podział frameworka na niezależne, współpracujące moduły</li>
<li>Unikanie monolitycznych struktur</li>
<li>Możliwość wymiany komponentów bez wpływu na resztę systemu</li>
</ul>
</li>
<li>
<p><strong>Separacja odpowiedzialności</strong>:</p>
<ul>
<li>Każdy komponent ma jasno zdefiniowany zakres działań</li>
<li>Unikanie klas/metod o wielu różnych funkcjach</li>
<li>Stosowanie wzorców projektowych odpowiednich dla domeny testów</li>
</ul>
</li>
<li>
<p><strong>Spójne standardy i konwencje</strong>:</p>
<ul>
<li>Jednolite nazewnictwo klas, metod, zmiennych</li>
<li>Konsekwentna struktura projektów i pakietów</li>
<li>Dokumentacja kodu i komponentów</li>
<li>Wspólne podejście do obsługi błędów i wyjątków</li>
</ul>
</li>
<li>
<p><strong>Adaptacyjność do zmian</strong>:</p>
<ul>
<li>Elastyczne struktury danych i interfejsy</li>
<li>Minimalizacja "sztywnych" zależności</li>
<li>Strategie radzenia sobie ze zmianami w testowanej aplikacji</li>
</ul>
</li>
</ol>
<h3>Praktyczne techniki zwiększania utrzymywalności:</h3>
<h4>1. Wielowarstwowa architektura</h4>
<div class="codehilite"><pre><span></span><code>Framework Testowy
├── Core Layer (Core)
│   ├── Konfiguracja
│   ├── Zarządzanie sterownikami
│   └── Mechanizmy raportowania
├── Service Layer (Warstwa usług)
│   ├── Abstrakcje dla UI (Page Objects)
│   ├── Klienty API
│   └── Zarządzanie danymi
└── Test Layer (Warstwa testów)
    ├── Testy UI
    ├── Testy API
    └── Testy integracyjne
</code></pre></div>

<p>Ta struktura zapewnia, że:
    * Zmiany w Core Layer nie wpływają na testy
    * Aktualizacje UI wymagają zmian tylko w Service Layer
    * Warstwy komunikują się przez dobrze zdefiniowane interfejsy</p>
<h4>2. Implementacja wzorców projektowych</h4>
<p><strong>Wzorzec Factory (Fabryka)</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * Fabryka użytkowników odpowiedzialna za tworzenie różnych typów użytkowników</span>
<span class="cm"> * z odpowiednimi uprawnieniami w systemie.</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserFactory</span> <span class="p">{</span>

    <span class="cm">/**</span>
<span class="cm">     * Typ użytkownika określający poziom uprawnień.</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">enum</span> <span class="n">UserType</span> <span class="p">{</span>
        <span class="n">GUEST</span><span class="p">,</span>
        <span class="n">REGULAR</span><span class="p">,</span>
        <span class="n">MODERATOR</span><span class="p">,</span>
        <span class="n">ADMIN</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Tworzy użytkownika określonego typu z podanymi danymi.</span>
<span class="cm">     * </span>
<span class="cm">     * @param type typ użytkownika do utworzenia</span>
<span class="cm">     * @param username nazwa użytkownika</span>
<span class="cm">     * @param email adres email</span>
<span class="cm">     * @param password hasło</span>
<span class="cm">     * @return utworzony obiekt użytkownika z odpowiednimi uprawnieniami</span>
<span class="cm">     * @throws IllegalArgumentException jeśli podany typ użytkownika nie istnieje</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">User</span> <span class="nf">createUser</span><span class="p">(</span><span class="n">UserType</span> <span class="n">type</span><span class="p">,</span> <span class="n">String</span> <span class="n">username</span><span class="p">,</span> <span class="n">String</span> <span class="n">email</span><span class="p">,</span> <span class="n">String</span> <span class="n">password</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">switch</span> <span class="p">(</span><span class="n">type</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">case</span> <span class="n">GUEST</span><span class="p">:</span>
                <span class="k">return</span> <span class="k">new</span> <span class="n">GuestUser</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">password</span><span class="p">);</span>
            <span class="k">case</span> <span class="n">REGULAR</span><span class="p">:</span>
                <span class="k">return</span> <span class="k">new</span> <span class="n">RegularUser</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">password</span><span class="p">);</span>
            <span class="k">case</span> <span class="n">MODERATOR</span><span class="p">:</span>
                <span class="k">return</span> <span class="k">new</span> <span class="n">ModeratorUser</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">password</span><span class="p">);</span>
            <span class="k">case</span> <span class="n">ADMIN</span><span class="p">:</span>
                <span class="k">return</span> <span class="k">new</span> <span class="n">AdminUser</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">password</span><span class="p">);</span>
            <span class="k">default</span><span class="p">:</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;Nieznany typ użytkownika: &quot;</span> <span class="o">+</span> <span class="n">type</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Tworzy użytkownika gościa z domyślnymi uprawnieniami.</span>
<span class="cm">     * </span>
<span class="cm">     * @param username nazwa użytkownika</span>
<span class="cm">     * @param email adres email</span>
<span class="cm">     * @return utworzony obiekt użytkownika gościa</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">User</span> <span class="nf">createGuestUser</span><span class="p">(</span><span class="n">String</span> <span class="n">username</span><span class="p">,</span> <span class="n">String</span> <span class="n">email</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">createUser</span><span class="p">(</span><span class="n">UserType</span><span class="p">.</span><span class="na">GUEST</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="s">&quot;guest&quot;</span> <span class="o">+</span> <span class="n">System</span><span class="p">.</span><span class="na">currentTimeMillis</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Tworzy administratora systemu z pełnymi uprawnieniami.</span>
<span class="cm">     * </span>
<span class="cm">     * @param username nazwa użytkownika</span>
<span class="cm">     * @param email adres email</span>
<span class="cm">     * @param password silne hasło</span>
<span class="cm">     * @return utworzony obiekt administratora</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">User</span> <span class="nf">createAdminUser</span><span class="p">(</span><span class="n">String</span> <span class="n">username</span><span class="p">,</span> <span class="n">String</span> <span class="n">email</span><span class="p">,</span> <span class="n">String</span> <span class="n">password</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">createUser</span><span class="p">(</span><span class="n">UserType</span><span class="p">.</span><span class="na">ADMIN</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">password</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Tworzy użytkownika na podstawie roli w systemie.</span>
<span class="cm">     * </span>
<span class="cm">     * @param role nazwa roli w systemie</span>
<span class="cm">     * @param username nazwa użytkownika</span>
<span class="cm">     * @param email adres email</span>
<span class="cm">     * @param password hasło</span>
<span class="cm">     * @return utworzony obiekt użytkownika o odpowiednim typie</span>
<span class="cm">     * @throws IllegalArgumentException jeśli podana rola nie jest obsługiwana</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">User</span> <span class="nf">createUserByRole</span><span class="p">(</span><span class="n">String</span> <span class="n">role</span><span class="p">,</span> <span class="n">String</span> <span class="n">username</span><span class="p">,</span> <span class="n">String</span> <span class="n">email</span><span class="p">,</span> <span class="n">String</span> <span class="n">password</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="n">UserType</span> <span class="n">type</span> <span class="o">=</span> <span class="n">UserType</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">role</span><span class="p">.</span><span class="na">toUpperCase</span><span class="p">());</span>
            <span class="k">return</span> <span class="n">createUser</span><span class="p">(</span><span class="n">type</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">password</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">IllegalArgumentException</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;Nieobsługiwana rola: &quot;</span> <span class="o">+</span> <span class="n">role</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * Przykładowy test sprawdzający uprawnienia różnych typów użytkowników.</span>
<span class="cm"> */</span>
<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">testUserPermissionsForDifferentRoles</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Utworzenie użytkowników różnych typów za pomocą fabryki</span>
    <span class="n">User</span> <span class="n">guestUser</span> <span class="o">=</span> <span class="n">UserFactory</span><span class="p">.</span><span class="na">createUser</span><span class="p">(</span><span class="n">UserFactory</span><span class="p">.</span><span class="na">UserType</span><span class="p">.</span><span class="na">GUEST</span><span class="p">,</span> <span class="s">&quot;guest&quot;</span><span class="p">,</span> <span class="s">&quot;guest@example.com&quot;</span><span class="p">,</span> <span class="s">&quot;pass123&quot;</span><span class="p">);</span>
    <span class="n">User</span> <span class="n">regularUser</span> <span class="o">=</span> <span class="n">UserFactory</span><span class="p">.</span><span class="na">createUser</span><span class="p">(</span><span class="n">UserFactory</span><span class="p">.</span><span class="na">UserType</span><span class="p">.</span><span class="na">REGULAR</span><span class="p">,</span> <span class="s">&quot;user&quot;</span><span class="p">,</span> <span class="s">&quot;user@example.com&quot;</span><span class="p">,</span> <span class="s">&quot;pass123&quot;</span><span class="p">);</span>
    <span class="n">User</span> <span class="n">moderatorUser</span> <span class="o">=</span> <span class="n">UserFactory</span><span class="p">.</span><span class="na">createUser</span><span class="p">(</span><span class="n">UserFactory</span><span class="p">.</span><span class="na">UserType</span><span class="p">.</span><span class="na">MODERATOR</span><span class="p">,</span> <span class="s">&quot;mod&quot;</span><span class="p">,</span> <span class="s">&quot;mod@example.com&quot;</span><span class="p">,</span> <span class="s">&quot;pass123&quot;</span><span class="p">);</span>
    <span class="n">User</span> <span class="n">adminUser</span> <span class="o">=</span> <span class="n">UserFactory</span><span class="p">.</span><span class="na">createUser</span><span class="p">(</span><span class="n">UserFactory</span><span class="p">.</span><span class="na">UserType</span><span class="p">.</span><span class="na">ADMIN</span><span class="p">,</span> <span class="s">&quot;admin&quot;</span><span class="p">,</span> <span class="s">&quot;admin@example.com&quot;</span><span class="p">,</span> <span class="s">&quot;pass123&quot;</span><span class="p">);</span>

    <span class="c1">// Skrócony sposób tworzenia gościa</span>
    <span class="n">User</span> <span class="n">anotherGuest</span> <span class="o">=</span> <span class="n">UserFactory</span><span class="p">.</span><span class="na">createGuestUser</span><span class="p">(</span><span class="s">&quot;visitor&quot;</span><span class="p">,</span> <span class="s">&quot;visitor@example.com&quot;</span><span class="p">);</span>

    <span class="c1">// Tworzenie użytkownika na podstawie nazwy roli</span>
    <span class="n">User</span> <span class="n">superAdmin</span> <span class="o">=</span> <span class="n">UserFactory</span><span class="p">.</span><span class="na">createUserByRole</span><span class="p">(</span><span class="s">&quot;ADMIN&quot;</span><span class="p">,</span> <span class="s">&quot;superadmin&quot;</span><span class="p">,</span> <span class="s">&quot;super@example.com&quot;</span><span class="p">,</span> <span class="s">&quot;strongPass!&quot;</span><span class="p">);</span>

    <span class="c1">// Test funkcjonalności systemu z różnymi użytkownikami</span>
    <span class="n">LoginPage</span> <span class="n">loginPage</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LoginPage</span><span class="p">();</span>

    <span class="c1">// Test jako gość</span>
    <span class="n">loginPage</span><span class="p">.</span><span class="na">loginAs</span><span class="p">(</span><span class="n">guestUser</span><span class="p">.</span><span class="na">getUsername</span><span class="p">(),</span> <span class="s">&quot;pass123&quot;</span><span class="p">);</span>
    <span class="n">assertFalse</span><span class="p">(</span><span class="s">&quot;Gość nie powinien mieć dostępu do panelu administratora&quot;</span><span class="p">,</span> <span class="n">dashboardPage</span><span class="p">.</span><span class="na">isAdminPanelVisible</span><span class="p">());</span>

    <span class="c1">// Test jako admin</span>
    <span class="n">loginPage</span><span class="p">.</span><span class="na">loginAs</span><span class="p">(</span><span class="n">adminUser</span><span class="p">.</span><span class="na">getUsername</span><span class="p">(),</span> <span class="s">&quot;pass123&quot;</span><span class="p">);</span>
    <span class="n">assertTrue</span><span class="p">(</span><span class="s">&quot;Administrator powinien mieć dostęp do panelu administratora&quot;</span><span class="p">,</span> <span class="n">dashboardPage</span><span class="p">.</span><span class="na">isAdminPanelVisible</span><span class="p">());</span>

    <span class="c1">// Test dynamicznego tworzenia użytkowników podczas testów</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">UserFactory</span><span class="p">.</span><span class="na">UserType</span> <span class="n">type</span> <span class="p">:</span> <span class="n">UserFactory</span><span class="p">.</span><span class="na">UserType</span><span class="p">.</span><span class="na">values</span><span class="p">())</span> <span class="p">{</span>
        <span class="n">User</span> <span class="n">testUser</span> <span class="o">=</span> <span class="n">UserFactory</span><span class="p">.</span><span class="na">createUser</span><span class="p">(</span><span class="n">type</span><span class="p">,</span> <span class="s">&quot;test_&quot;</span> <span class="o">+</span> <span class="n">type</span><span class="p">,</span> <span class="s">&quot;test_&quot;</span> <span class="o">+</span> <span class="n">type</span> <span class="o">+</span> <span class="s">&quot;@example.com&quot;</span><span class="p">,</span> <span class="s">&quot;testPass&quot;</span><span class="p">);</span>
        <span class="c1">// Wykonanie testów z użyciem wygenerowanego użytkownika...</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Wzorzec Builder (Budowniczy)</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * Builder do tworzenia złożonych obiektów testowych.</span>
<span class="cm"> * Umożliwia czytelne i elastyczne definiowanie danych testowych.</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">OrderBuilder</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">OrderRequest</span> <span class="n">order</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OrderRequest</span><span class="p">();</span>

    <span class="kd">public</span> <span class="n">OrderBuilder</span> <span class="nf">withCustomer</span><span class="p">(</span><span class="n">String</span> <span class="n">name</span><span class="p">,</span> <span class="n">String</span> <span class="n">email</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">order</span><span class="p">.</span><span class="na">setCustomerName</span><span class="p">(</span><span class="n">name</span><span class="p">);</span>
        <span class="n">order</span><span class="p">.</span><span class="na">setCustomerEmail</span><span class="p">(</span><span class="n">email</span><span class="p">);</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="n">OrderBuilder</span> <span class="nf">withShippingAddress</span><span class="p">(</span><span class="n">Address</span> <span class="n">address</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">order</span><span class="p">.</span><span class="na">setShippingAddress</span><span class="p">(</span><span class="n">address</span><span class="p">);</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="n">OrderBuilder</span> <span class="nf">withItem</span><span class="p">(</span><span class="n">String</span> <span class="n">productId</span><span class="p">,</span> <span class="kt">int</span> <span class="n">quantity</span><span class="p">,</span> <span class="n">BigDecimal</span> <span class="n">price</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">order</span><span class="p">.</span><span class="na">getItems</span><span class="p">()</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">order</span><span class="p">.</span><span class="na">setItems</span><span class="p">(</span><span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">());</span>
        <span class="p">}</span>

        <span class="n">OrderItem</span> <span class="n">item</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OrderItem</span><span class="p">();</span>
        <span class="n">item</span><span class="p">.</span><span class="na">setProductId</span><span class="p">(</span><span class="n">productId</span><span class="p">);</span>
        <span class="n">item</span><span class="p">.</span><span class="na">setQuantity</span><span class="p">(</span><span class="n">quantity</span><span class="p">);</span>
        <span class="n">item</span><span class="p">.</span><span class="na">setUnitPrice</span><span class="p">(</span><span class="n">price</span><span class="p">);</span>

        <span class="n">order</span><span class="p">.</span><span class="na">getItems</span><span class="p">().</span><span class="na">add</span><span class="p">(</span><span class="n">item</span><span class="p">);</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="n">OrderBuilder</span> <span class="nf">withPaymentMethod</span><span class="p">(</span><span class="n">String</span> <span class="n">method</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">order</span><span class="p">.</span><span class="na">setPaymentMethod</span><span class="p">(</span><span class="n">method</span><span class="p">);</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="n">OrderRequest</span> <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Walidacja kompletności zamówienia</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">order</span><span class="p">.</span><span class="na">getCustomerName</span><span class="p">()</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="n">order</span><span class="p">.</span><span class="na">getCustomerEmail</span><span class="p">()</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalStateException</span><span class="p">(</span><span class="s">&quot;Customer information is required&quot;</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">order</span><span class="p">.</span><span class="na">getItems</span><span class="p">()</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="n">order</span><span class="p">.</span><span class="na">getItems</span><span class="p">().</span><span class="na">isEmpty</span><span class="p">())</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalStateException</span><span class="p">(</span><span class="s">&quot;Order must contain at least one item&quot;</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">order</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Wykorzystanie w teście</span>
<span class="n">OrderRequest</span> <span class="n">testOrder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OrderBuilder</span><span class="p">()</span>
    <span class="p">.</span><span class="na">withCustomer</span><span class="p">(</span><span class="s">&quot;John Kowalski&quot;</span><span class="p">,</span> <span class="s">&quot;john.Kowalski@example.com&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="na">withShippingAddress</span><span class="p">(</span><span class="n">TestDataFactory</span><span class="p">.</span><span class="na">createAddress</span><span class="p">())</span>
    <span class="p">.</span><span class="na">withItem</span><span class="p">(</span><span class="s">&quot;PROD-123&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">BigDecimal</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="mf">29.99</span><span class="p">))</span>
    <span class="p">.</span><span class="na">withItem</span><span class="p">(</span><span class="s">&quot;PROD-456&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">BigDecimal</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="mf">49.99</span><span class="p">))</span>
    <span class="p">.</span><span class="na">withPaymentMethod</span><span class="p">(</span><span class="s">&quot;CREDIT_CARD&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="na">build</span><span class="p">();</span>
</code></pre></div>

<p><strong>Wzorzec Strategy (Strategia)</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * Interfejs strategii testowania przepływu biznesowego.</span>
<span class="cm"> * Definiuje sposób testowania różnych ścieżek dla różnych ról.</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">BusinessFlowStrategy</span> <span class="p">{</span>
    <span class="cm">/**</span>
<span class="cm">     * Wykonuje test flow biznesowego dla określonej roli.</span>
<span class="cm">     * </span>
<span class="cm">     * @param testData dane testowe</span>
<span class="cm">     * @return wynik testu</span>
<span class="cm">     */</span>
    <span class="n">FlowResult</span> <span class="nf">executeFlow</span><span class="p">(</span><span class="n">FlowTestData</span> <span class="n">testData</span><span class="p">);</span>

    <span class="cm">/**</span>
<span class="cm">     * Zwraca nazwę roli dla której jest implementowana strategia.</span>
<span class="cm">     * </span>
<span class="cm">     * @return nazwa roli</span>
<span class="cm">     */</span>
    <span class="n">String</span> <span class="nf">getRole</span><span class="p">();</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * Kontekst wykonywania testów flow biznesowego.</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BusinessFlowContext</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="n">BusinessFlowStrategy</span> <span class="n">strategy</span><span class="p">;</span>

    <span class="cm">/**</span>
<span class="cm">     * Ustawia strategię testowania przepływu biznesowego.</span>
<span class="cm">     * </span>
<span class="cm">     * @param strategy strategia do zastosowania</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setStrategy</span><span class="p">(</span><span class="n">BusinessFlowStrategy</span> <span class="n">strategy</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="na">strategy</span> <span class="o">=</span> <span class="n">strategy</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Wykonuje test przepływu biznesowego używając bieżącej strategii.</span>
<span class="cm">     * </span>
<span class="cm">     * @param testData dane testowe</span>
<span class="cm">     * @return wynik testu</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="n">FlowResult</span> <span class="nf">testFlow</span><span class="p">(</span><span class="n">FlowTestData</span> <span class="n">testData</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">strategy</span><span class="p">.</span><span class="na">executeFlow</span><span class="p">(</span><span class="n">testData</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * Strategia testowania przepływu biznesowego dla podatnika.</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TaxpayerFlowStrategy</span> <span class="kd">implements</span> <span class="n">BusinessFlowStrategy</span> <span class="p">{</span>
    <span class="cm">/**</span>
<span class="cm">     * Wykonuje test przepływu biznesowego z perspektywy podatnika.</span>
<span class="cm">     * </span>
<span class="cm">     * @param testData dane testowe</span>
<span class="cm">     * @return wynik testu</span>
<span class="cm">     */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">FlowResult</span> <span class="nf">executeFlow</span><span class="p">(</span><span class="n">FlowTestData</span> <span class="n">testData</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Implementacja testu dla podatnika składającego deklarację podatkową online</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">FlowResult</span><span class="p">(</span><span class="s">&quot;Podatnik złożył deklarację&quot;</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Zwraca nazwę roli.</span>
<span class="cm">     * </span>
<span class="cm">     * @return &quot;podatnik&quot;</span>
<span class="cm">     */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getRole</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s">&quot;podatnik&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * Strategia testowania przepływu biznesowego dla urzędnika.</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TaxOfficerFlowStrategy</span> <span class="kd">implements</span> <span class="n">BusinessFlowStrategy</span> <span class="p">{</span>
    <span class="cm">/**</span>
<span class="cm">     * Wykonuje test przepływu biznesowego z perspektywy urzędnika skarbowego.</span>
<span class="cm">     * </span>
<span class="cm">     * @param testData dane testowe</span>
<span class="cm">     * @return wynik testu</span>
<span class="cm">     */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">FlowResult</span> <span class="nf">executeFlow</span><span class="p">(</span><span class="n">FlowTestData</span> <span class="n">testData</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Implementacja testu dla urzędnika przetwarzającego deklarację</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">FlowResult</span><span class="p">(</span><span class="s">&quot;Urzędnik zweryfikował deklarację&quot;</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Zwraca nazwę roli.</span>
<span class="cm">     * </span>
<span class="cm">     * @return &quot;urzędnik&quot;</span>
<span class="cm">     */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getRole</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s">&quot;urzędnik&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * Strategia testowania przepływu biznesowego dla kontrolera skarbowego.</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TaxAuditorFlowStrategy</span> <span class="kd">implements</span> <span class="n">BusinessFlowStrategy</span> <span class="p">{</span>
    <span class="cm">/**</span>
<span class="cm">     * Wykonuje test przepływu biznesowego z perspektywy kontrolera skarbowego.</span>
<span class="cm">     * </span>
<span class="cm">     * @param testData dane testowe</span>
<span class="cm">     * @return wynik testu</span>
<span class="cm">     */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">FlowResult</span> <span class="nf">executeFlow</span><span class="p">(</span><span class="n">FlowTestData</span> <span class="n">testData</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Implementacja testu dla kontrolera przeprowadzającego dodatkową weryfikację</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">FlowResult</span><span class="p">(</span><span class="s">&quot;Kontroler przeprowadził audyt&quot;</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Zwraca nazwę roli.</span>
<span class="cm">     * </span>
<span class="cm">     * @return &quot;kontroler&quot;</span>
<span class="cm">     */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getRole</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s">&quot;kontroler&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * Test sprawdzający przepływ biznesowy dla różnych ról w systemie podatkowym.</span>
<span class="cm"> */</span>
<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">testTaxDeclarationFlow</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Przygotowanie danych testowych</span>
    <span class="n">FlowTestData</span> <span class="n">testData</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FlowTestData</span><span class="p">(</span><span class="s">&quot;PIT-37&quot;</span><span class="p">,</span> <span class="n">Map</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
        <span class="s">&quot;taxId&quot;</span><span class="p">,</span> <span class="s">&quot;123-456-78-90&quot;</span><span class="p">,</span>
        <span class="s">&quot;year&quot;</span><span class="p">,</span> <span class="s">&quot;2025&quot;</span><span class="p">,</span>
        <span class="s">&quot;income&quot;</span><span class="p">,</span> <span class="s">&quot;120000&quot;</span><span class="p">,</span>
        <span class="s">&quot;expenses&quot;</span><span class="p">,</span> <span class="s">&quot;45000&quot;</span>
    <span class="p">));</span>

    <span class="c1">// Utworzenie kontekstu testowego</span>
    <span class="n">BusinessFlowContext</span> <span class="n">context</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BusinessFlowContext</span><span class="p">();</span>

    <span class="c1">// Test przepływu z perspektywy podatnika</span>
    <span class="n">context</span><span class="p">.</span><span class="na">setStrategy</span><span class="p">(</span><span class="k">new</span> <span class="n">TaxpayerFlowStrategy</span><span class="p">());</span>
    <span class="n">FlowResult</span> <span class="n">taxpayerResult</span> <span class="o">=</span> <span class="n">context</span><span class="p">.</span><span class="na">testFlow</span><span class="p">(</span><span class="n">testData</span><span class="p">);</span>

    <span class="n">assertThat</span><span class="p">(</span><span class="n">taxpayerResult</span><span class="p">)</span>
        <span class="p">.</span><span class="na">as</span><span class="p">(</span><span class="s">&quot;Wynik testu dla podatnika&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="na">isNotNull</span><span class="p">()</span>
        <span class="p">.</span><span class="na">extracting</span><span class="p">(</span><span class="n">FlowResult</span><span class="p">::</span><span class="n">isSuccessful</span><span class="p">,</span> <span class="n">FlowResult</span><span class="p">::</span><span class="n">getMessage</span><span class="p">,</span> <span class="n">FlowResult</span><span class="p">::</span><span class="n">getReference</span><span class="p">)</span>
        <span class="p">.</span><span class="na">containsExactly</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="s">&quot;Podatnik złożył deklarację&quot;</span><span class="p">,</span> <span class="s">&quot;PIT-37-12345&quot;</span><span class="p">);</span>

    <span class="c1">// Test przepływu z perspektywy urzędnika weryfikującego deklarację</span>
    <span class="n">context</span><span class="p">.</span><span class="na">setStrategy</span><span class="p">(</span><span class="k">new</span> <span class="n">TaxOfficerFlowStrategy</span><span class="p">());</span>
    <span class="n">FlowResult</span> <span class="n">officerResult</span> <span class="o">=</span> <span class="n">context</span><span class="p">.</span><span class="na">testFlow</span><span class="p">(</span><span class="n">testData</span><span class="p">);</span>

    <span class="n">assertThat</span><span class="p">(</span><span class="n">officerResult</span><span class="p">.</span><span class="na">isSuccessful</span><span class="p">())</span>
        <span class="p">.</span><span class="na">as</span><span class="p">(</span><span class="s">&quot;Weryfikacja deklaracji przez urzędnika&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="na">isTrue</span><span class="p">();</span>

    <span class="n">assertThat</span><span class="p">(</span><span class="n">officerResult</span><span class="p">.</span><span class="na">getMessage</span><span class="p">())</span>
        <span class="p">.</span><span class="na">as</span><span class="p">(</span><span class="s">&quot;Komunikat z weryfikacji&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="na">contains</span><span class="p">(</span><span class="s">&quot;zweryfikował&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="na">doesNotContain</span><span class="p">(</span><span class="s">&quot;odrzucił&quot;</span><span class="p">);</span>

    <span class="n">assertThat</span><span class="p">(</span><span class="n">officerResult</span><span class="p">.</span><span class="na">getReference</span><span class="p">())</span>
        <span class="p">.</span><span class="na">as</span><span class="p">(</span><span class="s">&quot;Identyfikator weryfikacji&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;VERIFIED-&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="na">hasSize</span><span class="p">(</span><span class="n">VERIFICATION_IDENTIFIER_SIZE</span><span class="p">);</span>

    <span class="c1">// Test przepływu z perspektywy kontrolera skarbowego</span>
    <span class="n">context</span><span class="p">.</span><span class="na">setStrategy</span><span class="p">(</span><span class="k">new</span> <span class="n">TaxAuditorFlowStrategy</span><span class="p">());</span>
    <span class="n">FlowResult</span> <span class="n">auditorResult</span> <span class="o">=</span> <span class="n">context</span><span class="p">.</span><span class="na">testFlow</span><span class="p">(</span><span class="n">testData</span><span class="p">);</span>

    <span class="n">assertThat</span><span class="p">(</span><span class="n">auditorResult</span><span class="p">)</span>
        <span class="p">.</span><span class="na">as</span><span class="p">(</span><span class="s">&quot;Wynik testu dla kontrolera&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="na">satisfies</span><span class="p">(</span><span class="n">result</span> <span class="o">-&gt;</span> <span class="p">{</span>
            <span class="n">assertThat</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">isSuccessful</span><span class="p">()).</span><span class="na">isTrue</span><span class="p">();</span>
            <span class="n">assertThat</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">getMessage</span><span class="p">()).</span><span class="na">contains</span><span class="p">(</span><span class="s">&quot;audyt&quot;</span><span class="p">);</span>
            <span class="n">assertThat</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">getReference</span><span class="p">()).</span><span class="na">matches</span><span class="p">(</span><span class="s">&quot;AUDIT-\\d+&quot;</span><span class="p">);</span>
        <span class="p">});</span>

    <span class="c1">// Przykład dynamicznego wyboru strategii na podstawie roli</span>
    <span class="n">String</span> <span class="n">userRole</span> <span class="o">=</span> <span class="n">System</span><span class="p">.</span><span class="na">getProperty</span><span class="p">(</span><span class="s">&quot;test.role&quot;</span><span class="p">,</span> <span class="s">&quot;podatnik&quot;</span><span class="p">);</span>

    <span class="n">BusinessFlowStrategy</span> <span class="n">roleStrategy</span> <span class="o">=</span> <span class="k">switch</span> <span class="p">(</span><span class="n">userRole</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">case</span> <span class="s">&quot;urzędnik&quot;</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="n">TaxOfficerFlowStrategy</span><span class="p">();</span>
        <span class="k">case</span> <span class="s">&quot;kontroler&quot;</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="n">TaxAuditorFlowStrategy</span><span class="p">();</span>
        <span class="k">default</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="n">TaxpayerFlowStrategy</span><span class="p">();</span>
    <span class="p">};</span>

    <span class="n">context</span><span class="p">.</span><span class="na">setStrategy</span><span class="p">(</span><span class="n">roleStrategy</span><span class="p">);</span>
    <span class="n">FlowResult</span> <span class="n">dynamicResult</span> <span class="o">=</span> <span class="n">context</span><span class="p">.</span><span class="na">testFlow</span><span class="p">(</span><span class="n">testData</span><span class="p">);</span>

    <span class="c1">// Asercje dla dynamicznie wybranej strategii</span>
    <span class="n">assertThat</span><span class="p">(</span><span class="n">roleStrategy</span><span class="p">.</span><span class="na">getRole</span><span class="p">())</span>
        <span class="p">.</span><span class="na">as</span><span class="p">(</span><span class="s">&quot;Wybrana rola dla testu&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="na">isIn</span><span class="p">(</span><span class="s">&quot;podatnik&quot;</span><span class="p">,</span> <span class="s">&quot;urzędnik&quot;</span><span class="p">,</span> <span class="s">&quot;kontroler&quot;</span><span class="p">);</span>

    <span class="n">assertThat</span><span class="p">(</span><span class="n">dynamicResult</span><span class="p">)</span>
        <span class="p">.</span><span class="na">as</span><span class="p">(</span><span class="s">&quot;Wynik dla roli %s&quot;</span><span class="p">,</span> <span class="n">roleStrategy</span><span class="p">.</span><span class="na">getRole</span><span class="p">())</span>
        <span class="p">.</span><span class="na">hasFieldOrProperty</span><span class="p">(</span><span class="s">&quot;successful&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="na">hasFieldOrProperty</span><span class="p">(</span><span class="s">&quot;message&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="na">hasFieldOrProperty</span><span class="p">(</span><span class="s">&quot;reference&quot;</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * Test pełnego procesu biznesowego od złożenia do audytu deklaracji.</span>
<span class="cm"> */</span>
<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">testEndToEndTaxProcess</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Przygotowanie danych testowych dla scenariusza end-to-end</span>
    <span class="n">FlowTestData</span> <span class="n">testData</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FlowTestData</span><span class="p">(</span><span class="s">&quot;PIT-37&quot;</span><span class="p">,</span> <span class="n">Map</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
        <span class="s">&quot;taxId&quot;</span><span class="p">,</span> <span class="s">&quot;123-456-78-90&quot;</span><span class="p">,</span>
        <span class="s">&quot;year&quot;</span><span class="p">,</span> <span class="s">&quot;2025&quot;</span><span class="p">,</span>
        <span class="s">&quot;income&quot;</span><span class="p">,</span> <span class="s">&quot;120000&quot;</span><span class="p">,</span>
        <span class="s">&quot;expenses&quot;</span><span class="p">,</span> <span class="s">&quot;45000&quot;</span><span class="p">,</span>
        <span class="s">&quot;attachments&quot;</span><span class="p">,</span> <span class="s">&quot;invoice_1.pdf,invoice_2.pdf&quot;</span>
    <span class="p">));</span>

    <span class="n">BusinessFlowContext</span> <span class="n">context</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BusinessFlowContext</span><span class="p">();</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">FlowResult</span><span class="o">&gt;</span> <span class="n">allResults</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>

    <span class="c1">// Krok 1: Podatnik składa deklarację</span>
    <span class="n">context</span><span class="p">.</span><span class="na">setStrategy</span><span class="p">(</span><span class="k">new</span> <span class="n">TaxpayerFlowStrategy</span><span class="p">());</span>
    <span class="n">FlowResult</span> <span class="n">submitResult</span> <span class="o">=</span> <span class="n">context</span><span class="p">.</span><span class="na">testFlow</span><span class="p">(</span><span class="n">testData</span><span class="p">);</span>
    <span class="n">allResults</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">submitResult</span><span class="p">);</span>

    <span class="c1">// Krok 2: Urzędnik weryfikuje deklarację</span>
    <span class="n">context</span><span class="p">.</span><span class="na">setStrategy</span><span class="p">(</span><span class="k">new</span> <span class="n">TaxOfficerFlowStrategy</span><span class="p">());</span>
    <span class="n">FlowResult</span> <span class="n">verifyResult</span> <span class="o">=</span> <span class="n">context</span><span class="p">.</span><span class="na">testFlow</span><span class="p">(</span><span class="n">testData</span><span class="p">);</span>
    <span class="n">allResults</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">verifyResult</span><span class="p">);</span>

    <span class="c1">// Krok 3: Kontroler przeprowadza audyt (tylko dla wybranych przypadków)</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">Double</span><span class="p">.</span><span class="na">parseDouble</span><span class="p">(</span><span class="n">testData</span><span class="p">.</span><span class="na">getProperty</span><span class="p">(</span><span class="s">&quot;income&quot;</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">100000</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">context</span><span class="p">.</span><span class="na">setStrategy</span><span class="p">(</span><span class="k">new</span> <span class="n">TaxAuditorFlowStrategy</span><span class="p">());</span>
        <span class="n">FlowResult</span> <span class="n">auditResult</span> <span class="o">=</span> <span class="n">context</span><span class="p">.</span><span class="na">testFlow</span><span class="p">(</span><span class="n">testData</span><span class="p">);</span>
        <span class="n">allResults</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">auditResult</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// Asercje dla całego procesu z użyciem AssertJ</span>
    <span class="n">assertThat</span><span class="p">(</span><span class="n">allResults</span><span class="p">)</span>
        <span class="p">.</span><span class="na">as</span><span class="p">(</span><span class="s">&quot;Wyniki dla całego procesu podatkowego&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="na">hasSize</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="p">.</span><span class="na">extracting</span><span class="p">(</span><span class="n">FlowResult</span><span class="p">::</span><span class="n">isSuccessful</span><span class="p">)</span>
        <span class="p">.</span><span class="na">containsOnly</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

    <span class="c1">// Sprawdzenie sekwencji kroków</span>
    <span class="n">assertThat</span><span class="p">(</span><span class="n">allResults</span><span class="p">)</span>
        <span class="p">.</span><span class="na">extracting</span><span class="p">(</span><span class="n">FlowResult</span><span class="p">::</span><span class="n">getMessage</span><span class="p">)</span>
        <span class="p">.</span><span class="na">containsExactly</span><span class="p">(</span>
            <span class="s">&quot;Podatnik złożył deklarację&quot;</span><span class="p">,</span>
            <span class="s">&quot;Urzędnik zweryfikował deklarację&quot;</span><span class="p">,</span>
            <span class="s">&quot;Kontroler przeprowadził audyt&quot;</span>
        <span class="p">);</span>

    <span class="c1">// Sprawdzenie referencji</span>
    <span class="n">assertThat</span><span class="p">(</span><span class="n">allResults</span><span class="p">)</span>
        <span class="p">.</span><span class="na">extracting</span><span class="p">(</span><span class="n">FlowResult</span><span class="p">::</span><span class="n">getReference</span><span class="p">)</span>
        <span class="p">.</span><span class="na">satisfies</span><span class="p">(</span><span class="n">references</span> <span class="o">-&gt;</span> <span class="p">{</span>
            <span class="n">assertThat</span><span class="p">(</span><span class="n">references</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="mi">0</span><span class="p">)).</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;PIT-37-&quot;</span><span class="p">);</span>
            <span class="n">assertThat</span><span class="p">(</span><span class="n">references</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="mi">1</span><span class="p">)).</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;VERIFIED-&quot;</span><span class="p">);</span>
            <span class="n">assertThat</span><span class="p">(</span><span class="n">references</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="mi">2</span><span class="p">)).</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;AUDIT-&quot;</span><span class="p">);</span>
        <span class="p">});</span>

    <span class="c1">// Sprawdzenie danych testowych</span>
    <span class="n">assertThat</span><span class="p">(</span><span class="n">testData</span><span class="p">.</span><span class="na">getProperty</span><span class="p">(</span><span class="s">&quot;income&quot;</span><span class="p">))</span>
        <span class="p">.</span><span class="na">as</span><span class="p">(</span><span class="s">&quot;Dochód do opodatkowania&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="na">isNotEmpty</span><span class="p">()</span>
        <span class="p">.</span><span class="na">satisfies</span><span class="p">(</span><span class="n">income</span> <span class="o">-&gt;</span> <span class="p">{</span>
            <span class="kt">double</span> <span class="n">incomeVal</span> <span class="o">=</span> <span class="n">Double</span><span class="p">.</span><span class="na">parseDouble</span><span class="p">(</span><span class="n">income</span><span class="p">);</span>
            <span class="n">assertThat</span><span class="p">(</span><span class="n">incomeVal</span><span class="p">)</span>
                <span class="p">.</span><span class="na">as</span><span class="p">(</span><span class="s">&quot;Wartość dochodu&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="na">isGreaterThan</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="p">.</span><span class="na">isGreaterThan</span><span class="p">(</span><span class="n">Double</span><span class="p">.</span><span class="na">parseDouble</span><span class="p">(</span><span class="n">testData</span><span class="p">.</span><span class="na">getProperty</span><span class="p">(</span><span class="s">&quot;expenses&quot;</span><span class="p">)));</span>
        <span class="p">});</span>

    <span class="c1">// Sprawdzenie załączników</span>
    <span class="n">assertThat</span><span class="p">(</span><span class="n">testData</span><span class="p">.</span><span class="na">getProperty</span><span class="p">(</span><span class="s">&quot;attachments&quot;</span><span class="p">))</span>
        <span class="p">.</span><span class="na">as</span><span class="p">(</span><span class="s">&quot;Załączone dokumenty&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="na">contains</span><span class="p">(</span><span class="s">&quot;invoice_1.pdf&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="na">contains</span><span class="p">(</span><span class="s">&quot;invoice_2.pdf&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="na">doesNotContain</span><span class="p">(</span><span class="s">&quot;virus.exe&quot;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<h4>3. Dokumentacja kodu i komponentów</h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * Reprezentuje stronę logowania do aplikacji.</span>
<span class="cm"> * &lt;p&gt;</span>
<span class="cm"> * Ta klasa implementuje Page Object Model dla strony logowania, </span>
<span class="cm"> * zapewniając enkapsulację elementów UI i operacji logowania.</span>
<span class="cm"> * &lt;/p&gt;</span>
<span class="cm"> * &lt;p&gt;</span>
<span class="cm"> * Typowy przepływ użycia:</span>
<span class="cm"> * &lt;pre&gt;</span>
<span class="cm"> * LoginPage loginPage = new LoginPage();</span>
<span class="cm"> * loginPage.open();</span>
<span class="cm"> * DashboardPage dashboard = loginPage.loginAs(&quot;username&quot;, &quot;password&quot;);</span>
<span class="cm"> * &lt;/pre&gt;</span>
<span class="cm"> * &lt;/p&gt;</span>
<span class="cm"> * </span>
<span class="cm"> * @author Test Automation Team</span>
<span class="cm"> * @see BasePage</span>
<span class="cm"> * @see DashboardPage</span>
<span class="cm"> * @since 0</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LoginPage</span> <span class="p">{</span>

    <span class="cm">/**</span>
<span class="cm">     * Wykonuje operację logowania z podanymi danymi.</span>
<span class="cm">     * </span>
<span class="cm">     * @param username Nazwa użytkownika</span>
<span class="cm">     * @param password Hasło użytkownika</span>
<span class="cm">     * @return Obiekt DashboardPage, jeśli logowanie się powiodło</span>
<span class="cm">     * @throws ElementException jeśli elementy strony nie są dostępne</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="n">DashboardPage</span> <span class="nf">loginAs</span><span class="p">(</span><span class="n">String</span> <span class="n">username</span><span class="p">,</span> <span class="n">String</span> <span class="n">password</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="n">logger</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;Logging in as user: {}&quot;</span><span class="p">,</span> <span class="n">username</span><span class="p">);</span>

            <span class="n">usernameField</span><span class="p">.</span><span class="na">shouldBe</span><span class="p">(</span><span class="n">visible</span><span class="p">).</span><span class="na">setValue</span><span class="p">(</span><span class="n">username</span><span class="p">);</span>
            <span class="n">passwordField</span><span class="p">.</span><span class="na">shouldBe</span><span class="p">(</span><span class="n">visible</span><span class="p">).</span><span class="na">setValue</span><span class="p">(</span><span class="n">password</span><span class="p">);</span>
            <span class="n">loginButton</span><span class="p">.</span><span class="na">shouldBe</span><span class="p">(</span><span class="n">visible</span><span class="p">,</span> <span class="n">enabled</span><span class="p">).</span><span class="na">click</span><span class="p">();</span>

            <span class="k">return</span> <span class="k">new</span> <span class="n">DashboardPage</span><span class="p">();</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">ElementNotFound</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="n">ElementException</span><span class="p">(</span><span class="s">&quot;Failed to interact with login elements&quot;</span><span class="p">,</span> 
                                    <span class="n">e</span><span class="p">.</span><span class="na">toString</span><span class="p">(),</span> <span class="n">e</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Wykonuje operację logowania oczekując błędu.</span>
<span class="cm">     * Używane do testowania negatywnych scenariuszy.</span>
<span class="cm">     * </span>
<span class="cm">     * @param username Nazwa użytkownika</span>
<span class="cm">     * @param password Hasło użytkownika</span>
<span class="cm">     * @return Ten sam obiekt LoginPage (fluent interface)</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="n">LoginPage</span> <span class="nf">loginExpectingError</span><span class="p">(</span><span class="n">String</span> <span class="n">username</span><span class="p">,</span> <span class="n">String</span> <span class="n">password</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">usernameField</span><span class="p">.</span><span class="na">setValue</span><span class="p">(</span><span class="n">username</span><span class="p">);</span>
        <span class="n">passwordField</span><span class="p">.</span><span class="na">setValue</span><span class="p">(</span><span class="n">password</span><span class="p">);</span>
        <span class="n">loginButton</span><span class="p">.</span><span class="na">click</span><span class="p">();</span>

        <span class="c1">// Oczekiwanie na komunikat błędu</span>
        <span class="n">errorMessage</span><span class="p">.</span><span class="na">shouldBe</span><span class="p">(</span><span class="n">visible</span><span class="p">);</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3>Długoterminowe korzyści z projektowania pod kątem utrzymywalności:</h3>
<ol>
<li>
<p><strong>Redukcja długu technicznego</strong>:</p>
</li>
<li>
<p>Mniejsza potrzeba refaktoryzacji w przyszłości</p>
</li>
<li>Łatwiejsza adaptacja do zmieniających się wymagań</li>
<li>
<p>Spójna jakość kodu w całym frameworku</p>
</li>
<li>
<p><strong>Skrócenie czasu wprowadzania zmian</strong>:</p>
</li>
<li>
<p>Szybsza lokalizacja miejsc wymagających aktualizacji</p>
</li>
<li>Mniejsze ryzyko błędów regresyjnych</li>
<li>
<p>Krótszy czas onboardingu nowych członków zespołu</p>
</li>
<li>
<p><strong>Obniżenie kosztów utrzymania</strong>:</p>
</li>
<li>
<p>Mniejszy nakład pracy na aktualizacje po zmianach w aplikacji</p>
</li>
<li>Redukcja liczby niestabilnych testów wymagających ciągłej naprawy</li>
<li>
<p>Lepszy zwrot z inwestycji w automatyzację w długim okresie</p>
</li>
<li>
<p><strong>Zwiększenie zaufania do testów</strong>:</p>
</li>
<li>
<p>Bardziej niezawodne wyniki testów</p>
</li>
<li>Łatwiejsza interpretacja raportów</li>
<li>Wyższa akceptacja testów automatycznych przez interesariuszy</li>
</ol>
<p>Projektowanie frameworka testowego pod kątem utrzymywalności jest inwestycją, która zwraca się wielokrotnie w całym
cyklu życia projektu. Wymaga świadomego planowania architektury, dyscypliny w implementacji oraz ciągłego doskonalenia,
ale prowadzi do znaczącego obniżenia kosztów i zwiększenia efektywności procesu testowego w długim okresie.</p>
<h1>6. Integracja z CI/CD</h1>
<h2>6.1. Automatyzacja wykonania testów</h2>
<p>Integracja testów automatycznych z procesem Continuous Integration i Continuous Delivery (CI/CD) stanowi kluczowy
element nowoczesnego podejścia do zapewnienia jakości oprogramowania. Efektywna automatyzacja wykonania testów wymaga
systematycznego i przemyślanego podejścia, które umożliwi płynne włączenie ich w pipeline deweloperski.</p>
<h3>Struktura i organizacja skryptów uruchomieniowych</h3>
<p>W środowisku opartym na Javie, podstawą automatyzacji testów jest właściwe skonfigurowanie narzędzi budowania, takich
jak Maven czy Gradle. Skrypty te powinny umożliwiać:</p>
<ul>
<li><strong>Modułową strukturę testów</strong> - podział na moduły odpowiadające różnym warstwom aplikacji (front-end, back-end,
  integracje z systemami zewnętrznymi)</li>
<li><strong>Parametryzację uruchomień</strong> - możliwość dynamicznego wyboru zestawów testów, środowisk i konfiguracji bez
  konieczności modyfikacji kodu</li>
<li><strong>Profile testowe</strong> - dedykowane profile dla różnych typów testów (np. <code>-Psmoke</code>, <code>-Pregression</code>, <code>-Pperformance</code>)</li>
<li><strong>Zarządzanie zależnościami</strong> - automatyczne pobieranie i aktualizacja bibliotek testowych (Selenium, Selenide,
  RestAssured, frameworki asercji)</li>
</ul>
<p>Przykład konfiguracji Maven do uruchamiania różnych zestawów testów:</p>
<div class="codehilite"><pre><span></span><code><span class="nt">&lt;profiles&gt;</span>
    <span class="nt">&lt;profile&gt;</span>
        <span class="nt">&lt;id&gt;</span>smoke<span class="nt">&lt;/id&gt;</span>
        <span class="nt">&lt;properties&gt;</span>
            <span class="nt">&lt;groups&gt;</span>smoke<span class="nt">&lt;/groups&gt;</span>
            <span class="nt">&lt;skip.integration.tests&gt;</span>true<span class="nt">&lt;/skip.integration.tests&gt;</span>
            <span class="nt">&lt;skip.ui.tests&gt;</span>true<span class="nt">&lt;/skip.ui.tests&gt;</span>
        <span class="nt">&lt;/properties&gt;</span>
    <span class="nt">&lt;/profile&gt;</span>
    <span class="nt">&lt;profile&gt;</span>
        <span class="nt">&lt;id&gt;</span>regression<span class="nt">&lt;/id&gt;</span>
        <span class="nt">&lt;properties&gt;</span>
            <span class="nt">&lt;groups&gt;</span>regression<span class="nt">&lt;/groups&gt;</span>
            <span class="nt">&lt;skip.integration.tests&gt;</span>false<span class="nt">&lt;/skip.integration.tests&gt;</span>
            <span class="nt">&lt;skip.ui.tests&gt;</span>false<span class="nt">&lt;/skip.ui.tests&gt;</span>
        <span class="nt">&lt;/properties&gt;</span>
    <span class="nt">&lt;/profile&gt;</span>
<span class="nt">&lt;/profiles&gt;</span>
</code></pre></div>

<p>Przykład konfiguracji Gradle do uruchamiania różnych zestawów testów:</p>
<div class="codehilite"><pre><span></span><code><span class="nv">task</span> <span class="nv">apiTests</span><span class="ss">(</span><span class="nv">type</span>: <span class="nv">Test</span><span class="ss">)</span> {
    <span class="nv">useJUnitPlatform</span> {
        <span class="nv">includeTags</span> <span class="s1">&#39;</span><span class="s">api</span><span class="s1">&#39;</span>
    }

    <span class="o">//</span> <span class="nv">W</span>ł<span class="nv">a</span>ś<span class="nv">ciwo</span>ś<span class="nv">ci</span> <span class="nv">systemowe</span> <span class="k">do</span> <span class="nv">konfiguracji</span> ś<span class="nv">rodowiska</span> <span class="nv">testowego</span>
    <span class="nv">systemProperty</span> <span class="s1">&#39;</span><span class="s">test.api.baseUrl</span><span class="s1">&#39;</span>, <span class="nv">project</span>.<span class="nv">findProperty</span><span class="ss">(</span><span class="s1">&#39;</span><span class="s">apiUrl</span><span class="s1">&#39;</span><span class="ss">)</span> ?: <span class="s1">&#39;</span><span class="s">http://localhost:8080</span><span class="s1">&#39;</span>
    <span class="nv">systemProperty</span> <span class="s1">&#39;</span><span class="s">test.api.timeout</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">30000</span><span class="s1">&#39;</span>

    <span class="nv">testLogging</span> {
        <span class="nv">events</span> <span class="s2">&quot;</span><span class="s">passed</span><span class="s2">&quot;</span>, <span class="s2">&quot;</span><span class="s">skipped</span><span class="s2">&quot;</span>, <span class="s2">&quot;</span><span class="s">failed</span><span class="s2">&quot;</span>
    }
}

<span class="o">//</span> <span class="nv">Testy</span> <span class="nv">UI</span> <span class="nv">z</span> <span class="nv">Selenide</span> <span class="o">-</span> <span class="nv">uruchamiane</span> <span class="nv">w</span> <span class="nv">dedykowanym</span> ś<span class="nv">rodowisku</span>
<span class="nv">task</span> <span class="nv">uiTests</span><span class="ss">(</span><span class="nv">type</span>: <span class="nv">Test</span><span class="ss">)</span> {
    <span class="nv">useJUnitPlatform</span> {
        <span class="nv">includeTags</span> <span class="s1">&#39;</span><span class="s">ui</span><span class="s1">&#39;</span>
    }

    <span class="o">//</span> <span class="nv">W</span>ł<span class="nv">a</span>ś<span class="nv">ciwo</span>ś<span class="nv">ci</span> <span class="nv">dla</span> <span class="nv">test</span>ó<span class="nv">w</span> <span class="nv">UI</span>
    <span class="nv">systemProperty</span> <span class="s1">&#39;</span><span class="s">selenide.browser</span><span class="s1">&#39;</span>, <span class="nv">project</span>.<span class="nv">findProperty</span><span class="ss">(</span><span class="s1">&#39;</span><span class="s">browser</span><span class="s1">&#39;</span><span class="ss">)</span> ?: <span class="s1">&#39;</span><span class="s">chrome</span><span class="s1">&#39;</span>
    <span class="nv">systemProperty</span> <span class="s1">&#39;</span><span class="s">selenide.headless</span><span class="s1">&#39;</span>, <span class="nv">project</span>.<span class="nv">findProperty</span><span class="ss">(</span><span class="s1">&#39;</span><span class="s">headless</span><span class="s1">&#39;</span><span class="ss">)</span> ?: <span class="s1">&#39;</span><span class="s">true</span><span class="s1">&#39;</span>
    <span class="nv">systemProperty</span> <span class="s1">&#39;</span><span class="s">selenide.baseUrl</span><span class="s1">&#39;</span>, <span class="nv">project</span>.<span class="nv">findProperty</span><span class="ss">(</span><span class="s1">&#39;</span><span class="s">baseUrl</span><span class="s1">&#39;</span><span class="ss">)</span> ?: <span class="s1">&#39;</span><span class="s">http://localhost:8080</span><span class="s1">&#39;</span>

    <span class="o">//</span> <span class="nv">Zwi</span>ę<span class="nv">ksz</span> <span class="nb">timeout</span> <span class="nv">dla</span> <span class="nv">test</span>ó<span class="nv">w</span> <span class="nv">UI</span>
    <span class="nv">systemProperty</span> <span class="s1">&#39;</span><span class="s">junit.jupiter.execution.timeout.default</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">2m</span><span class="s1">&#39;</span>

    <span class="nv">testLogging</span> {
        <span class="nv">events</span> <span class="s2">&quot;</span><span class="s">passed</span><span class="s2">&quot;</span>, <span class="s2">&quot;</span><span class="s">skipped</span><span class="s2">&quot;</span>, <span class="s2">&quot;</span><span class="s">failed</span><span class="s2">&quot;</span>
        <span class="nv">exceptionFormat</span> <span class="s2">&quot;</span><span class="s">full</span><span class="s2">&quot;</span>
    }
}
</code></pre></div>

<h3>Kategoryzacja i selekcja testów</h3>
<p>Efektywna automatyzacja wymaga przemyślanego systemu kategoryzacji testów, który umożliwi ich selektywne uruchamianie w
zależności od kontekstu:</p>
<ul>
<li>
<p><strong>Tagowanie testów</strong> - wykorzystanie adnotacji w JUnit czy TestNG do oznaczania testów według:</p>
<ul>
<li>Krytyczności (P0, P1, P2)</li>
<li>Komponentu funkcjonalnego (np. <code>@Tag("payment")</code>, <code>@Tag("registration")</code>)</li>
<li>Rodzaju testu (integracyjny, UI)</li>
<li>Czasu wykonania (szybkie, średnie, długie)</li>
<li>Zależności środowiskowych (np. <code>@RequiresExternalApi</code>)</li>
</ul>
</li>
<li>
<p><strong>Filtrowanie zestawów testów</strong> - mechanizmy do dynamicznego wyboru testów do uruchomienia:</p>
<ul>
<li>Selektywne uruchamianie testów na podstawie wyników poprzednich uruchomień (Test Impact Analysis)</li>
<li>Inteligentny wybór testów na podstawie zmian w kodzie</li>
<li>Priorytetyzacja testów według historii ich niestabilności i efektywności w wykrywaniu błędów</li>
</ul>
</li>
</ul>
<h3>Zarządzanie środowiskiem testowym</h3>
<p>Kluczowym aspektem automatyzacji jest zapewnienie powtarzalności i izolacji środowiska testowego:</p>
<ul>
<li>
<p><strong>Konteneryzacja środowiska</strong> - wykorzystanie Dockera do tworzenia izolowanych i przenośnych środowisk testowych:</p>
<ul>
<li>Dedykowane obrazy Docker dla aplikacji testowanej</li>
<li>Kontenery Selenium Grid do współbieżnego uruchamiania testów UI</li>
<li>Zestawy kontenerów dla systemów zewnętrznych (bazy danych, usługi REST, kolejki)</li>
<li>Orkiestracja przy użyciu Docker Compose lub Kubernetes dla złożonych środowisk</li>
</ul>
</li>
<li>
<p><strong>Zarządzanie danymi testowymi</strong>:</p>
<ul>
<li>Automatyczne generowanie danych testowych z wykorzystaniem bibliotek (np. Java Faker, DataFactory)</li>
<li>Snapshot izolowanych baz danych przywracanych przed każdym uruchomieniem</li>
<li>Mechanizmy czyszczenia danych po wykonaniu testów</li>
<li>Wersjonowanie danych testowych wraz z kodem</li>
</ul>
</li>
<li>
<p><strong>Symulacja usług zewnętrznych</strong>:</p>
<ul>
<li>Implementacja mocków i stubów dla interfejsów zewnętrznych (WireMock, MockServer)</li>
<li>Nagrywanie i odtwarzanie rzeczywistych interakcji z systemami zewnętrznymi</li>
<li>Symulacja różnych scenariuszy odpowiedzi (sukces, błędy, opóźnienia)</li>
</ul>
</li>
</ul>
<h3>Mechanizmy odporności i stabilności</h3>
<p>Testy automatyczne, szczególnie te na poziomie UI, mogą być podatne na niestabilność. Skuteczna automatyzacja wymaga
implementacji:</p>
<ul>
<li><strong>Strategii powtarzania (retry)</strong> - mechanizmy ponownych prób dla niestabilnych testów:<ul>
<li>Retry na poziomie pojedynczych asercji z wykorzystaniem bibliotek jak Awaitility</li>
<li>Powtarzanie całych metod testowych z progresywnymi opóźnieniami (exponential backoff)</li>
<li>Inteligentne mechanizmy powtórzeń dla specyficznych rodzajów błędów</li>
</ul>
</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="nd">@Test</span>
<span class="nd">@RetryingTest</span><span class="p">(</span><span class="n">maxRetries</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">testPaymentProcessing</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Test logic that might be flaky due to external dependencies</span>
<span class="p">}</span>
</code></pre></div>

<ul>
<li>
<p><strong>Zarządzanie timeoutami</strong>:</p>
<ul>
<li>Dynamiczne dostosowanie timeoutów w zależności od środowiska i typu testu</li>
<li>Progresywne strategie oczekiwania na elementy UI (explicit wait, fluent wait)</li>
<li>Monitoring czasów wykonania dla wykrywania degradacji wydajności</li>
</ul>
</li>
<li>
<p><strong>Obsługa równoległości</strong>:</p>
<ul>
<li>Konfiguracja ThreadPoolSize w TestNG lub JUnit5 Parallel</li>
<li>Identyfikacja i izolacja testów z współdzielonymi zasobami</li>
<li>Mechanizmy synchronizacji dla testów wymagających sekwencyjnego wykonania</li>
</ul>
</li>
</ul>
<h3>Automatyzacja przygotowania i wdrażania testów</h3>
<p>Pełna automatyzacja obejmuje również:</p>
<ul>
<li><strong>Automatyczną aktualizację sterowników przeglądarek</strong> - wykorzystanie WebDriverManager lub dedykowanych skryptów</li>
<li><strong>Wersjonowanie artefaktów testowych</strong> wraz z kodem aplikacji</li>
<li><strong>Automatyczną kompilację i wdrażanie testów</strong> jako część pipeline</li>
<li><strong>Automatyczną walidację samych testów</strong> przed ich włączeniem do głównego zestawu (testy dla testów)</li>
</ul>
<h3>Strategie dla różnych typów testów</h3>
<h4>Testy API z RestAssured</h4>
<p>Dla efektywnej automatyzacji testów API należy wdrożyć:</p>
<ul>
<li>Biblioteki specyfikacji (RestAssured RequestSpecification) do centralizacji konfiguracji</li>
<li>Serializację/deserializację JSON/XML z wykorzystaniem Jackson lub JAXB</li>
<li>Walidację schematów API (JSON Schema, Swagger/OpenAPI)</li>
<li>Łańcuchy testów API symulujących przepływy użytkownika</li>
</ul>
<h4>Testy UI z Selenium/Selenide</h4>
<p>Automatyzacja testów UI wymaga:</p>
<ul>
<li>Implementacji wzorca Page Object Model (POM) z bazowymi klasami</li>
<li>Mechanizmów identyfikacji elementów odpornych na zmiany (np. data-testid zamiast XPath)</li>
<li>Strategii obsługi dynamicznych elementów AJAX</li>
<li>Zarządzania stanami przeglądarek i sesji</li>
</ul>
<h4>Testy wydajnościowe</h4>
<p>Włączenie testów wydajnościowych do pipeline wymaga:</p>
<ul>
<li>Integracji narzędzi jak JMeter, Gatling z procesem CI/CD</li>
<li>Automatycznej analizy metryk wydajnościowych</li>
<li>Progów akceptacji dla czasów odpowiedzi i przepustowości</li>
<li>Porównywania wyników z poprzednimi wersjami aplikacji</li>
</ul>
<p>Kompleksowa automatyzacja wykonania testów stanowi fundament efektywnego procesu CI/CD, umożliwiając szybkie i
wiarygodne dostarczanie informacji zwrotnej dotyczącej jakości oprogramowania na każdym etapie procesu wytwórczego.</p>
<h2>6.2. Strategie wykonywania testów w pipeline</h2>
<p>Integracja testów automatycznych z pipeline CI/CD wymaga starannego zaprojektowania strategii ich wykonywania, aby
zrównoważyć szybkość dostarczania informacji zwrotnej z kompleksowością weryfikacji. Efektywna strategia musi
uwzględniać specyfikę różnych etapów cyklu wytwarzania oprogramowania, minimalizując czas potrzebny na wykrycie
problemów, jednocześnie optymalizując wykorzystanie zasobów.</p>
<h3>Wielowarstwowa piramida testów w pipeline</h3>
<p>Nowoczesne podejście do wykonywania testów w pipeline opiera się na koncepcji piramidy testów, gdzie różne typy testów
są wykonywane na odpowiednich etapach:</p>
<ul>
<li>
<p><strong>Warstwa podstawowa (commit stage)</strong> - najszybsze testy wykonywane natychmiast po każdej zmianie:</p>
<ul>
<li>Testy jednostkowe weryfikujące logikę biznesową</li>
<li>Szybkie testy integracyjne (z wykorzystaniem in-memory databases)</li>
<li>Analiza statyczna kodu (SonarQube, SpotBugs, CheckStyle)</li>
<li>Testy architektury (ArchUnit) weryfikujące zgodność z ustalonymi wzorcami</li>
</ul>
</li>
<li>
<p><strong>Warstwa środkowa (build acceptance stage)</strong> - uruchamiana po pomyślnym przejściu etapu commit:</p>
<ul>
<li>Testy integracyjne z rzeczywistymi bazami danych</li>
<li>Testy API dla kluczowych ścieżek biznesowych</li>
<li>Podstawowe testy UI (smoke tests) dla krytycznych funkcjonalności</li>
<li>Testy zgodności (compatibility tests) dla różnych konfiguracji</li>
</ul>
</li>
<li>
<p><strong>Warstwa wyższa (comprehensive testing stage)</strong> - wykonywana przed wdrożeniem na środowiska pre-produkcyjne:</p>
<ul>
<li>Pełne zestawy testów UI dla wszystkich głównych funkcjonalności</li>
<li>Testy end-to-end symulujące rzeczywiste przepływy użytkownika</li>
<li>Testy wydajnościowe i skalowania</li>
<li>Testy bezpieczeństwa (SAST/DAST)</li>
</ul>
</li>
<li>
<p><strong>Warstwa wierzchołkowa (release stage)</strong> - wykonywana przed wdrożeniem na produkcję:</p>
<ul>
<li>Testy akceptacyjne w środowisku produkcyjnym lub jego wiernej replice</li>
<li>Testy zgodności z regulacjami i standardami (GDPR, WCAG, PCI-DSS itp.)</li>
<li>Testy smoke po wdrożeniu na produkcję (canary tests)</li>
</ul>
</li>
</ul>
<h3>Strategie uruchamiania testów w zależności od etapu pipeline</h3>
<h4>Strategia Fast Feedback</h4>
<p>Celem tej strategii jest zapewnienie natychmiastowej informacji zwrotnej deweloperom:</p>
<ul>
<li><strong>Trigger</strong>: Każdy commit lub pull request</li>
<li><strong>Zakres testów</strong>:<ul>
<li>Testy jednostkowe (&lt; 1-2 minuty)</li>
<li>Lekkie testy integracyjne (&lt; 5 minut)</li>
<li>Weryfikacja stylu kodu i podstawowych reguł jakościowych</li>
</ul>
</li>
<li><strong>Implementacja</strong>:<ul>
<li>Uruchamianie tylko testów dla zmienionych komponentów (Test Impact Analysis)</li>
<li>Wykorzystanie cache dla zależności i kompilacji</li>
<li>Możliwość przerwania wykonania po pierwszym błędzie</li>
</ul>
</li>
<li><strong>Cel czasowy</strong>: &lt; 10 minut dla pełnego cyklu</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="c1"># Przykład konfiguracji GitLab CI dla fast feedback</span><span class="w"></span>
<span class="nt">fast_feedback</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">stage</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test</span><span class="w"></span>
<span class="w">  </span><span class="nt">script</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./mvnw test -Dtest=&quot;UnitTests,*FastIntegrationTest&quot; -DfailIfNoTests=false</span><span class="w"></span>
<span class="w">  </span><span class="nt">rules</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">if</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$CI_PIPELINE_SOURCE == &#39;merge_request_event&#39;</span><span class="w"></span>
<span class="w">  </span><span class="nt">artifacts</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">reports</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">junit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">target/surefire-reports/TEST-*.xml</span><span class="w"></span>
</code></pre></div>

<h4>Strategia Smoke Testing</h4>
<p>Ta strategia koncentruje się na weryfikacji kluczowych funkcjonalności:</p>
<ul>
<li><strong>Trigger</strong>: Pomyślny wynik etapu Fast Feedback</li>
<li><strong>Zakres testów</strong>:<ul>
<li>Krytyczne testy API (20-30 testów)</li>
<li>Podstawowe testy UI (5-10 scenariuszy)</li>
<li>Weryfikacja głównych przepływów biznesowych</li>
</ul>
</li>
<li><strong>Implementacja</strong>:<ul>
<li>Równoległe uruchamianie niezależnych scenariuszy</li>
<li>Priorytetyzacja testów według krytyczności biznesowej</li>
<li>Retry dla niestabilnych testów</li>
</ul>
</li>
<li><strong>Cel czasowy</strong>: &lt; 30 minut</li>
</ul>
<h4>Strategia testów pełnych (Comprehensive Testing)</h4>
<p>Strategia zapewniająca kompleksową weryfikację przed wdrożeniem na staging:</p>
<ul>
<li><strong>Trigger</strong>: Zaplanowane lub manualne po pomyślnych smoke testach</li>
<li><strong>Zakres testów</strong>:<ul>
<li>Pełen zakres testów funkcjonalnych (UI, API)</li>
<li>Testy integracyjne z systemami zewnętrznymi</li>
<li>Podstawowe testy wydajnościowe</li>
<li>Testy bezpieczeństwa</li>
</ul>
</li>
<li><strong>Implementacja</strong>:<ul>
<li>Uruchamianie w dedykowanych środowiskach testowych</li>
<li>Pełna dystrybucja równoległa na wielu węzłach</li>
<li>Kompleksowe raportowanie wyników</li>
</ul>
</li>
<li><strong>Cel czasowy</strong>: &lt; 2-3 godziny</li>
</ul>
<h4>Strategia nocnej regresji (Nightly Regression)</h4>
<p>Strategia zapewniająca kompleksową weryfikację całego systemu:</p>
<ul>
<li><strong>Trigger</strong>: Harmonogram (np. codziennie o północy)</li>
<li><strong>Zakres testów</strong>:<ul>
<li>Pełny zestaw wszystkich testów (regresja)</li>
<li>Długotrwałe testy stabilności</li>
<li>Testy wydajnościowe pod obciążeniem</li>
<li>Testy penetracyjne i bezpieczeństwa</li>
</ul>
</li>
<li><strong>Implementacja</strong>:<ul>
<li>Automatyczne przygotowanie środowisk testowych</li>
<li>Maksymalne wykorzystanie równoległości</li>
<li>Szczegółowa analiza wyników i trendów</li>
</ul>
</li>
<li><strong>Cel czasowy</strong>: 6-8 godzin (wykonywane poza godzinami pracy)</li>
</ul>
<h3>Optymalizacja wykonania testów</h3>
<h4>Równoległe wykonanie testów</h4>
<p>Efektywna strategia równoległego wykonania testów jest kluczem do optymalizacji czasu trwania pipeline:</p>
<ul>
<li>
<p><strong>Poziomy równoległości</strong>:</p>
<ul>
<li>Równoległość na poziomie metod testowych (TestNG/JUnit5)</li>
<li>Równoległość na poziomie klas testowych</li>
<li>Równoległość na poziomie zestawów testów (test suites)</li>
<li>Równoległość na poziomie środowisk (różne wersje przeglądarek, systemy operacyjne)</li>
</ul>
</li>
<li>
<p><strong>Techniki dystrybucji obciążenia</strong>:</p>
<ul>
<li>Dynamiczny podział testów na podstawie historycznego czasu wykonania</li>
<li>Grupowanie testów współdzielących dane wejściowe</li>
<li>Izolacja testów z potencjalnymi konfliktami zasobów</li>
</ul>
</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="c1">// Przykład konfiguracji równoległości w TestNG</span>
<span class="nd">@Test</span><span class="p">(</span><span class="n">threadPoolSize</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">invocationCount</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">timeOut</span> <span class="o">=</span> <span class="mi">10000</span><span class="p">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">testPaymentProcessingConcurrently</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Test logic that can be executed in parallel</span>
<span class="p">}</span>
</code></pre></div>

<ul>
<li><strong>Infrastruktura dla testów równoległych</strong>:<ul>
<li>Selenium Grid do zarządzania pulą przeglądarek</li>
<li>Dynamiczne skalowanie zasobów w środowiskach chmurowych</li>
<li>Dedykowane pule zasobów dla różnych typów testów</li>
</ul>
</li>
</ul>
<h4>Priorytetyzacja testów</h4>
<p>Strategia priorytetyzacji testów umożliwia wcześniejsze wykrywanie krytycznych problemów:</p>
<ul>
<li>
<p><strong>Kryteria priorytetyzacji</strong>:</p>
<ul>
<li>Historyczna efektywność testów w wykrywaniu błędów</li>
<li>Pokrycie krytycznych ścieżek biznesowych</li>
<li>Czas wykonania testu (krótsze testy pierwsze)</li>
<li>Zależność od zmodyfikowanego kodu (Test Impact Analysis)</li>
</ul>
</li>
<li>
<p><strong>Dynamiczna priorytetyzacja</strong>:</p>
<ul>
<li>Uczenie maszynowe do przewidywania prawdopodobieństwa wystąpienia błędu</li>
<li>Adaptacyjne dostosowanie priorytetów na podstawie bieżących wyników</li>
<li>Automatyczna reklasyfikacja testów na podstawie historii ich niestabilności</li>
</ul>
</li>
</ul>
<h4>Strategie dla testów długotrwałych</h4>
<p>Testy wymagające dłuższego czasu wykonania wymagają specjalnych strategii:</p>
<ul>
<li><strong>Wykonanie asynchroniczne</strong> - oddzielenie testów długotrwałych od głównego pipeline</li>
<li><strong>Wczesne informowanie o wynikach częściowych</strong> - raportowanie wyników testów na bieżąco</li>
<li><strong>Profilowanie i identyfikacja "wąskich gardeł"</strong> w zestawach testów</li>
<li><strong>Automatyczna optymalizacja</strong> długotrwałych testów</li>
</ul>
<h3>Strategie dla różnych branży i przepływów pracy</h3>
<h4>Strategia dla modelu GitFlow</h4>
<p>Dla zespołów pracujących z GitFlow, strategia wykonywania testów powinna być dostosowana do specyfiki branchy:</p>
<ul>
<li><strong>Feature branches</strong>: Fast Feedback + Smoke Tests</li>
<li><strong>Develop branch</strong>: Fast Feedback + Smoke Tests + wybrane testy regresyjne</li>
<li><strong>Release branches</strong>: Pełna regresja + testy wydajnościowe</li>
<li><strong>Hotfix branches</strong>: Fast Feedback + ukierunkowane testy regresyjne</li>
</ul>
<h4>Strategia dla modelu Trunk-based Development</h4>
<p>Dla zespołów pracujących z trunk-based development:</p>
<ul>
<li><strong>Przed push do trunk</strong>: Fast Feedback (lokalnie)</li>
<li><strong>Po push do trunk</strong>: Fast Feedback + Smoke Tests (serwer CI)</li>
<li><strong>Przed wdrożeniem</strong>: Pełne testy funkcjonalne i regresyjne</li>
</ul>
<h3>Strategie odzyskiwania i obsługi niestabilności</h3>
<p>Efektywna strategia musi uwzględniać mechanizmy radzenia sobie z niestabilnością testów:</p>
<ul>
<li><strong>Automatyczne powtarzanie niestabilnych testów</strong> z progresywnym opóźnieniem</li>
<li><strong>Izolacja niestabilnych testów</strong> do osobnych zestawów z mniejszym wpływem na pipeline</li>
<li><strong>Mechanizmy graceful degradation</strong> - umożliwiające kontynuację pipeline mimo nieistotnych błędów</li>
<li><strong>Procedury eskalsji</strong> dla krytycznych problemów wymagających natychmiastowej uwagi</li>
</ul>
<p>Wdrożenie kompleksowej strategii wykonywania testów w pipeline CI/CD wymaga starannego planowania i ciągłego
doskonalenia. Kluczowym wskaźnikiem sukcesu jest zrównoważenie szybkości dostarczania informacji zwrotnej z
kompleksowością weryfikacji, przy jednoczesnej optymalizacji wykorzystania zasobów i minimalizacji kosztów utrzymania
infrastruktury testowej.</p>
<h2>6.3. Raportowanie wyników</h2>
<p>Efektywne raportowanie wyników testów automatycznych stanowi kluczowy element procesu CI/CD, umożliwiający szybką
identyfikację problemów, analizę trendów jakościowych oraz podejmowanie świadomych decyzji dotyczących wdrożeń. System
raportowania powinien dostarczać przejrzystych, użytecznych informacji wszystkim interesariuszom, od deweloperów po
zarząd, dostosowując zakres i formę prezentacji do specyficznych potrzeb każdej grupy odbiorców.</p>
<h3>Wielopoziomowe raportowanie wyników</h3>
<p>Kompleksowy system raportowania powinien obejmować kilka poziomów szczegółowości:</p>
<ul>
<li>
<p><strong>Raportowanie na poziomie pojedynczego testu</strong>:</p>
<ul>
<li>Szczegółowy log wykonania z krokami testowymi</li>
<li>Przechwycone zrzuty ekranu dla testów UI (przed/po akcji, w momencie błędu)</li>
<li>Zapisy ruchu sieciowego (pliki HAR, logi API)</li>
<li>Stack trace błędów z kontekstem</li>
<li>Metryki wydajnościowe (czas wykonania, zużycie zasobów)</li>
</ul>
</li>
<li>
<p><strong>Raportowanie na poziomie zestawu testów (test suite)</strong>:</p>
<ul>
<li>Podsumowanie wykonania (liczba testów: udanych, nieudanych, pominiętych)</li>
<li>Trendy stabilności w czasie</li>
<li>Analiza przyczyn niepowodzeń (klasyfikacja błędów)</li>
<li>Metryki pokrycia (funkcjonalnego, kodu)</li>
<li>Czas wykonania z identyfikacją "wąskich gardeł"</li>
</ul>
</li>
<li>
<p><strong>Raportowanie na poziomie pipeline</strong>:</p>
<ul>
<li>Status całego pipeline z podziałem na etapy</li>
<li>Kluczowe metryki jakościowe (odsetek udanych testów, stabilność)</li>
<li>Porównanie z poprzednimi wykonaniami</li>
<li>Podkreślenie nowych/powtarzających się błędów</li>
</ul>
</li>
<li>
<p><strong>Raportowanie na poziomie projektu/organizacji</strong>:</p>
<ul>
<li>Trendy jakościowe w czasie</li>
<li>Benchmarki między zespołami/projektami</li>
<li>Analiza ROI z automatyzacji testów</li>
<li>Identyfikacja obszarów najwyższego ryzyka</li>
</ul>
</li>
</ul>
<h3>Narzędzia i technologie raportowania</h3>
<h4>Podstawowe narzędzia raportowania</h4>
<p>Wybór odpowiednich narzędzi raportowania jest kluczowy dla efektywnej komunikacji wyników:</p>
<ul>
<li><strong>Allure Framework</strong> - kompleksowe narzędzie do generowania raportów:<ul>
<li>Wizualizacja kroków testowych z załącznikami (zrzuty ekranu, logi)</li>
<li>Kategoryzacja błędów i analiza trendów</li>
<li>Interaktywne dashboardy z filtrowaniem</li>
<li>Integracja z popularnymi frameworkami testowymi (JUnit, TestNG)</li>
</ul>
</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="nd">@Test</span>
<span class="nd">@DisplayName</span><span class="p">(</span><span class="s">&quot;Weryfikacja procesu płatności kartą&quot;</span><span class="p">)</span>
<span class="nd">@Severity</span><span class="p">(</span><span class="n">SeverityLevel</span><span class="p">.</span><span class="na">CRITICAL</span><span class="p">)</span>
<span class="nd">@Feature</span><span class="p">(</span><span class="s">&quot;Płatności&quot;</span><span class="p">)</span>
<span class="nd">@Story</span><span class="p">(</span><span class="s">&quot;Płatność kartą kredytową&quot;</span><span class="p">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">testPaymentProcessing</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">AllureLifecycle</span> <span class="n">lifecycle</span> <span class="o">=</span> <span class="n">Allure</span><span class="p">.</span><span class="na">getLifecycle</span><span class="p">();</span>

    <span class="n">lifecycle</span><span class="p">.</span><span class="na">updateStep</span><span class="p">(</span><span class="n">step</span> <span class="o">-&gt;</span> <span class="n">step</span><span class="p">.</span><span class="na">setName</span><span class="p">(</span><span class="s">&quot;Wybierz produkt&quot;</span><span class="p">));</span>
    <span class="n">productPage</span><span class="p">.</span><span class="na">selectProduct</span><span class="p">(</span><span class="s">&quot;Premium Plan&quot;</span><span class="p">);</span>

    <span class="n">lifecycle</span><span class="p">.</span><span class="na">updateStep</span><span class="p">(</span><span class="n">step</span> <span class="o">-&gt;</span> <span class="n">step</span><span class="p">.</span><span class="na">setName</span><span class="p">(</span><span class="s">&quot;Przejdź do koszyka&quot;</span><span class="p">));</span>
    <span class="n">productPage</span><span class="p">.</span><span class="na">proceedToCheckout</span><span class="p">();</span>

    <span class="c1">// Załącznik z przechwyconym żądaniem API</span>
    <span class="n">Allure</span><span class="p">.</span><span class="na">addAttachment</span><span class="p">(</span><span class="s">&quot;Payment API Request&quot;</span><span class="p">,</span> <span class="s">&quot;application/json&quot;</span><span class="p">,</span> <span class="n">paymentRequestJson</span><span class="p">);</span>

    <span class="c1">// Dodanie zrzutu ekranu</span>
    <span class="n">Allure</span><span class="p">.</span><span class="na">addAttachment</span><span class="p">(</span><span class="s">&quot;Ekran potwierdzenia&quot;</span><span class="p">,</span> <span class="k">new</span> <span class="n">ByteArrayInputStream</span><span class="p">(</span>
        <span class="p">((</span><span class="n">TakesScreenshot</span><span class="p">)</span> <span class="n">driver</span><span class="p">).</span><span class="na">getScreenshotAs</span><span class="p">(</span><span class="n">OutputType</span><span class="p">.</span><span class="na">BYTES</span><span class="p">)));</span>
<span class="p">}</span>
</code></pre></div>

<ul>
<li>
<p><strong>Extent Reports</strong> - elastyczna biblioteka do tworzenia raportów HTML:</p>
<ul>
<li>Konfigurowalne dashboardy i wykresy</li>
<li>Kategoryzacja testów i filtrowanie wyników</li>
<li>Systemie etykiet i tagów</li>
<li>Integracja multimedialna (zrzuty ekranu, wideo, logi)</li>
</ul>
</li>
<li>
<p><strong>TestNG Reports / JUnit Reports</strong> - natywne raportowanie w frameworkach testowych:</p>
<ul>
<li>Podstawowe podsumowania wykonania testów</li>
<li>Integracja z narzędziami CI/CD (Jenkins, GitLab CI)</li>
<li>Możliwość eksportu wyników w formacie XML/HTML</li>
</ul>
</li>
</ul>
<h4>Zaawansowane platformy raportowania</h4>
<p>Dla kompleksowych potrzeb raportowania warto rozważyć dedykowane platformy:</p>
<ul>
<li>
<p><strong>Xray for Jira</strong> - integracja raportowania z systemem zarządzania projektami:</p>
<ul>
<li>Łączenie wyników testów z wymaganiami i historiami użytkownika</li>
<li>Śledzenie pokrycia wymagań testami</li>
<li>Zarządzanie cyklami testowymi</li>
<li>Generowanie raportów dla interesariuszy biznesowych</li>
</ul>
</li>
<li>
<p><strong>Dashboardy Grafana/Kibana</strong> - wizualizacja metryk i trendów:</p>
<ul>
<li>Agregacja danych z różnych źródeł</li>
<li>Tworzenie customizowanych dashboardów</li>
<li>Alerty oparte na progach</li>
<li>Analiza historyczna i prognozowanie</li>
</ul>
</li>
</ul>
<h3>Automatyzacja raportowania w pipeline CI/CD</h3>
<p>Proces raportowania powinien być w pełni zautomatyzowany jako część pipeline:</p>
<ul>
<li><strong>Generowanie raportów jako krok pipeline</strong>:<ul>
<li>Automatyczne zbieranie wyników testów z różnych etapów</li>
<li>Konsolidacja raportów z różnych typów testów (jednostkowe, integracyjne, UI)</li>
<li>Archiwizacja artefaktów (logi, zrzuty ekranu) jako załączników do raportów</li>
</ul>
</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="err">#</span> <span class="n">Przykład</span> <span class="n">konfiguracji</span> <span class="n">Jenkins</span> <span class="n">Pipeline</span> <span class="n">dla</span> <span class="n">generowania</span> <span class="n">raportów</span>
<span class="n">stage</span><span class="o">(</span><span class="s1">&#39;Generate Reports&#39;</span><span class="o">)</span> <span class="o">{</span>
   <span class="n">steps</span> <span class="o">{</span>
      <span class="n">script</span> <span class="o">{</span>
         <span class="c1">// Wykonanie testów</span>
         <span class="n">sh</span> <span class="s1">&#39;./gradlew clean test&#39;</span>

         <span class="c1">// Generowanie raportu Allure</span>
         <span class="n">allure</span><span class="o">([</span>
         <span class="nl">includeProperties:</span> <span class="kc">false</span><span class="o">,</span>
         <span class="nl">jdk:</span> <span class="s1">&#39;&#39;</span><span class="o">,</span>
         <span class="nl">properties:</span> <span class="o">[</span> <span class="o">],</span>
         <span class="nl">reportBuildPolicy:</span> <span class="s1">&#39;ALWAYS&#39;</span><span class="o">,</span>
         <span class="nl">results:</span> <span class="o">[</span> <span class="o">[</span> <span class="nl">path:</span> <span class="s1">&#39;target/allure-results&#39;</span> <span class="o">]</span> <span class="o">]</span>
         <span class="o">])</span>

        <span class="c1">// Publikacja raportów JUnit</span>
        <span class="n">junit</span> <span class="s1">&#39;target/surefire-reports/*.xml&#39;</span>

        <span class="c1">// Publikacja raportów pokrycia kodu</span>
        <span class="n">jacoco</span><span class="o">()</span>
      <span class="o">}</span>
   <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>

<ul>
<li><strong>Powiadomienia i dystrybucja raportów</strong>:<ul>
<li>Automatyczne powiadomienia email dla zespołu w przypadku błędów</li>
<li>Integracja z komunikatorami</li>
<li>Automatyczna publikacja raportów na portalach wewnętrznych</li>
</ul>
</li>
</ul>
<h3>Strategie dla różnych odbiorców</h3>
<p>Efektywne raportowanie powinno być dostosowane do potrzeb różnych grup odbiorców:</p>
<ul>
<li>
<p><strong>Dla deweloperów i testerów automatyzujących</strong>:</p>
<ul>
<li>Szczegółowe informacje techniczne (stack trace, logi)</li>
<li>Szybki dostęp do konkretnych przypadków testowych</li>
<li>Integracja z IDE i systemami kontroli wersji</li>
<li>Łatwa reprodukcja błędów</li>
</ul>
</li>
<li>
<p><strong>Dla kierowników projektów/Scrum Masterów</strong>:</p>
<ul>
<li>Podsumowania statusu na poziomie sprintów/wydań</li>
<li>Trendy jakościowe w czasie</li>
<li>Identyfikacja ryzyk i "wąskich gardeł"</li>
<li>KPI związane z jakością (stabilność testów, czas wykrywania błędów)</li>
</ul>
</li>
<li>
<p><strong>Dla interesariuszy biznesowych</strong>:</p>
<ul>
<li>Wysokopoziomowe dashboardy z kluczowymi metrykami</li>
<li>Raportowanie oparte na wymaganiach biznesowych</li>
<li>Wizualizacja postępu i ryzyk</li>
<li>ROI z automatyzacji testów</li>
</ul>
</li>
</ul>
<h3>Integracja z systemami zarządzania defektami</h3>
<p>Skuteczne raportowanie powinno być zintegrowane z systemami zarządzania defektami:</p>
<ul>
<li>
<p><strong>Automatyczne tworzenie zgłoszeń</strong>:</p>
<ul>
<li>Generowanie zgłoszeń w Jira dla nowych błędów</li>
<li>Przypisywanie zgłoszeń do właściwych osób na podstawie analizy kodu</li>
<li>Dołączanie kontekstu testowego (logi, zrzuty ekranu)</li>
</ul>
</li>
<li>
<p><strong>Śledzenie cyklu życia defektów</strong>:</p>
<ul>
<li>Aktualizacja statusu defektów</li>
<li>Weryfikacja rozwiązania poprzez ponowne uruchomienie testów</li>
<li>Agregacja statystyk związanych z defektami</li>
</ul>
</li>
<li>
<p><strong>Automatyczna weryfikacja poprawek</strong>:</p>
<ul>
<li>Automatyczne uruchamianie testów związanych z poprawkami</li>
<li>Weryfikacja regresji związanej z wprowadzonymi zmianami</li>
<li>Generowanie raportów walidacyjnych po naprawie</li>
</ul>
</li>
</ul>
<h3>Pomiar efektywności i optymalizacja raportowania</h3>
<p>Proces raportowania powinien podlegać ciągłej optymalizacji:</p>
<ul>
<li>
<p><strong>Metryki efektywności raportowania</strong>:</p>
<ul>
<li>Czas identyfikacji problemów przez zespół</li>
<li>Odsetek błędów poprawnie sklasyfikowanych automatycznie</li>
<li>Stopień wykorzystania raportów przez różne grupy odbiorców</li>
</ul>
</li>
<li>
<p><strong>Ciągłe doskonalenie</strong>:</p>
<ul>
<li>Regularne przeglądy i aktualizacje szablonów raportowania</li>
<li>Zbieranie opinii od użytkowników raportów</li>
<li>Wdrażanie nowych technologii i metodologii raportowania</li>
</ul>
</li>
</ul>
<p>Efektywne raportowanie jest nieodłącznym elementem dojrzałego procesu automatyzacji testów, umożliwiającym
maksymalizację wartości uzyskiwanej z automatyzacji oraz podejmowanie świadomych decyzji dotyczących jakości
oprogramowania na każdym etapie procesu wytwórczego.</p>
<h2>6.4. Bramki jakościowe</h2>
<p>Bramki jakościowe (quality gates) stanowią kluczowy element procesu CI/CD, definiując mierzalne kryteria, które muszą
zostać spełnione, aby oprogramowanie mogło przejść do kolejnego etapu pipeline. Właściwie skonfigurowane bramki
jakościowe zapewniają, że tylko kod spełniający określone standardy jakości jest wdrażany na środowiska testowe i
produkcyjne, minimalizując ryzyko wprowadzania defektów i problemów wydajnościowych.</p>
<h3>Koncepcja i znaczenie bramek jakościowych</h3>
<p>Bramki jakościowe pełnią rolę punktów kontrolnych w procesie CI/CD, gdzie automatycznie weryfikowane są określone
metryki i kryteria jakościowe. Ich główne cele to:</p>
<ul>
<li>Zapewnienie minimalnego akceptowalnego poziomu jakości na każdym etapie</li>
<li>Wczesne wykrywanie problemów i zapobieganie ich propagacji</li>
<li>Obiektywizacja decyzji o gotowości oprogramowania do wdrożenia</li>
<li>Wymuszanie przestrzegania standardów i praktyk jakościowych</li>
<li>Budowanie kultury jakości w organizacji</li>
</ul>
<p>Bramki jakościowe powinny być:</p>
<ul>
<li><strong>Mierzalne</strong> - oparte na konkretnych, liczbowych wskaźnikach</li>
<li><strong>Automatyczne</strong> - weryfikowane bez interwencji manualnej</li>
<li><strong>Powtarzalne</strong> - dające te same wyniki przy tych samych warunkach</li>
<li><strong>Istotne biznesowo</strong> - powiązane z realnymi ryzykami i potrzebami biznesowymi</li>
<li><strong>Ewoluujące</strong> - dostosowywane do rosnącej dojrzałości procesu</li>
</ul>
<h3>Typy bramek jakościowych</h3>
<h4>Bramki oparte na wynikach testów</h4>
<p>Najbardziej podstawowym typem bramek jakościowych są te oparte na wynikach testów automatycznych:</p>
<ul>
<li>
<p><strong>Wskaźnik sukcesu testów</strong> (test pass rate):</p>
<ul>
<li>Ogólny wskaźnik testów zakończonych sukcesem (np. minimum 95%)</li>
<li>Zróżnicowane progi dla różnych typów testów (np. 100% dla testów krytycznych, 90% dla pozostałych)</li>
<li>Progresywne progi w zależności od etapu projektu (niższe na początku, wyższe w miarę dojrzewania)</li>
</ul>
</li>
<li>
<p><strong>Stabilność testów</strong>:</p>
<ul>
<li>Maksymalny dopuszczalny odsetek niestabilnych testów (np. &lt; 5%)</li>
<li>Trend stabilności w czasie (brak pogorszenia względem poprzednich wykonań)</li>
<li>Maksymalna liczba kolejnych nieudanych wykonań dla tego samego testu</li>
</ul>
</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="err">#</span> <span class="n">Przykład</span> <span class="n">definicji</span> <span class="n">bramki</span> <span class="n">jakościowej</span> <span class="n">w</span> <span class="n">Jenkins</span>
<span class="n">stage</span><span class="o">(</span><span class="s1">&#39;Quality Gate: Test Results&#39;</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">steps</span> <span class="o">{</span>
    <span class="n">script</span> <span class="o">{</span>
      <span class="kt">def</span> <span class="n">testResults</span> <span class="o">=</span> <span class="n">readJSON</span> <span class="nl">file:</span> <span class="s1">&#39;target/test-results-summary.json&#39;</span>

      <span class="c1">// Weryfikacja ogólnego wskaźnika sukcesu</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">testResults</span><span class="o">.</span><span class="na">passRate</span> <span class="o">&lt;</span> <span class="mi">95</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">error</span> <span class="s2">&quot;Test pass rate below threshold: ${testResults.passRate}% &lt; 95%&quot;</span>
      <span class="o">}</span>

      <span class="c1">// Weryfikacja wskaźnika sukcesu dla testów krytycznych</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">testResults</span><span class="o">.</span><span class="na">criticalTestsPassRate</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">error</span> <span class="s2">&quot;Critical tests pass rate below threshold: ${testResults.criticalTestsPassRate}% &lt; 100%&quot;</span>
      <span class="o">}</span>

      <span class="c1">// Weryfikacja stabilności testów</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">testResults</span><span class="o">.</span><span class="na">flakyTestsRate</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">error</span> <span class="s2">&quot;Too many flaky tests: ${testResults.flakyTestsRate}% &gt; 5%&quot;</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>

<h4>Bramki oparte na pokryciu kodu</h4>
<p>Pokrycie kodu testami jest istotnym wskaźnikiem jakości zestawu testów:</p>
<ul>
<li>
<p><strong>Ogólne pokrycie kodu</strong>:</p>
<ul>
<li>Minimalny procent pokrycia linii kodu (np. 80%)</li>
<li>Minimalny procent pokrycia gałęzi (np. 70%)</li>
<li>Minimalny procent pokrycia ścieżek</li>
</ul>
</li>
<li>
<p><strong>Pokrycie dla kodu krytycznego</strong>:</p>
<ul>
<li>Wyższe progi dla modułów krytycznych biznesowo (np. 90-95%)</li>
<li>Specjalne wymagania dla kodu odpowiedzialnego za bezpieczeństwo i integralność danych</li>
<li>Śledzenie trendów pokrycia w czasie (zakaz regresji)</li>
</ul>
</li>
<li>
<p><strong>Różnicowe pokrycie kodu</strong> (differential coverage):</p>
<ul>
<li>Wymagane 100% pokrycie dla nowo dodanego lub zmodyfikowanego kodu</li>
<li>Automatyczna identyfikacja zmian niepokrytych testami</li>
<li>Blokowanie merga zmian bez odpowiedniego pokrycia</li>
</ul>
</li>
</ul>
<div class="codehilite"><pre><span></span><code>// Przykład konfiguracji JaCoCo w Maven do weryfikacji pokrycia
<span class="nt">&lt;plugin&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.jacoco<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>jacoco-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>0.8.8<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;executions&gt;</span>
        <span class="nt">&lt;execution&gt;</span>
            <span class="nt">&lt;id&gt;</span>jacoco-check<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;goals&gt;</span>
                <span class="nt">&lt;goal&gt;</span>check<span class="nt">&lt;/goal&gt;</span>
            <span class="nt">&lt;/goals&gt;</span>
            <span class="nt">&lt;configuration&gt;</span>
                <span class="nt">&lt;rules&gt;</span>
                    <span class="nt">&lt;rule&gt;</span>
                        <span class="nt">&lt;element&gt;</span>BUNDLE<span class="nt">&lt;/element&gt;</span>
                        <span class="nt">&lt;limits&gt;</span>
                            <span class="nt">&lt;limit&gt;</span>
                                <span class="nt">&lt;counter&gt;</span>LINE<span class="nt">&lt;/counter&gt;</span>
                                <span class="nt">&lt;value&gt;</span>COVEREDRATIO<span class="nt">&lt;/value&gt;</span>
                                <span class="nt">&lt;minimum&gt;</span>0.80<span class="nt">&lt;/minimum&gt;</span>
                            <span class="nt">&lt;/limit&gt;</span>
                            <span class="nt">&lt;limit&gt;</span>
                                <span class="nt">&lt;counter&gt;</span>BRANCH<span class="nt">&lt;/counter&gt;</span>
                                <span class="nt">&lt;value&gt;</span>COVEREDRATIO<span class="nt">&lt;/value&gt;</span>
                                <span class="nt">&lt;minimum&gt;</span>0.70<span class="nt">&lt;/minimum&gt;</span>
                            <span class="nt">&lt;/limit&gt;</span>
                        <span class="nt">&lt;/limits&gt;</span>
                    <span class="nt">&lt;/rule&gt;</span>
                    <span class="cm">&lt;!-- Wyższe pokrycie dla krytycznych pakietów --&gt;</span>
                    <span class="nt">&lt;rule&gt;</span>
                        <span class="nt">&lt;element&gt;</span>PACKAGE<span class="nt">&lt;/element&gt;</span>
                        <span class="nt">&lt;includes&gt;</span>
                            <span class="nt">&lt;include&gt;</span>com.company.app.security.*<span class="nt">&lt;/include&gt;</span>
                            <span class="nt">&lt;include&gt;</span>com.company.app.payment.*<span class="nt">&lt;/include&gt;</span>
                        <span class="nt">&lt;/includes&gt;</span>
                        <span class="nt">&lt;limits&gt;</span>
                            <span class="nt">&lt;limit&gt;</span>
                                <span class="nt">&lt;counter&gt;</span>LINE<span class="nt">&lt;/counter&gt;</span>
                                <span class="nt">&lt;value&gt;</span>COVEREDRATIO<span class="nt">&lt;/value&gt;</span>
                                <span class="nt">&lt;minimum&gt;</span>0.90<span class="nt">&lt;/minimum&gt;</span>
                            <span class="nt">&lt;/limit&gt;</span>
                        <span class="nt">&lt;/limits&gt;</span>
                    <span class="nt">&lt;/rule&gt;</span>
                <span class="nt">&lt;/rules&gt;</span>
            <span class="nt">&lt;/configuration&gt;</span>
        <span class="nt">&lt;/execution&gt;</span>
    <span class="nt">&lt;/executions&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>
</code></pre></div>

<h4>Bramki oparte na jakości kodu</h4>
<p>Statyczna analiza kodu dostarcza cennych wskaźników dotyczących jakości i utrzymywalności:</p>
<ul>
<li>
<p><strong>Metryki jakości kodu</strong>:</p>
<ul>
<li>Złożoność cyklomatyczna (np. maksimum 10 per metoda)</li>
<li>Dublowanie kodu (np. &lt; 5%)</li>
<li>Długość metod i klas (np. maksimum 30 linii per metoda)</li>
<li>Liczba parametrów metod (np. maksimum 5)</li>
</ul>
</li>
<li>
<p><strong>Zgodność ze standardami kodowania</strong>:</p>
<ul>
<li>Zero błędów krytycznych</li>
<li>Ograniczona liczba błędów o wysokim priorytecie (np. &lt; 10)</li>
<li>Trend w liczbie problemów (zakaz wzrostu)</li>
</ul>
</li>
<li>
<p><strong>Dług techniczny</strong>:</p>
<ul>
<li>Maksymalny akceptowalny poziom długu technicznego</li>
<li>Maksymalny przyrost długu technicznego w jednej zmianie</li>
<li>Współczynnik spłaty długu technicznego</li>
</ul>
</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="err">#</span> <span class="n">Przykład</span> <span class="n">definicji</span> <span class="n">bramki</span> <span class="n">jakościowej</span> <span class="n">opartej</span> <span class="n">na</span> <span class="n">SonarQube</span>
<span class="n">stage</span><span class="o">(</span><span class="s1">&#39;Quality Gate: Code Quality&#39;</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">steps</span> <span class="o">{</span>
    <span class="n">script</span> <span class="o">{</span>
      <span class="n">withSonarQubeEnv</span><span class="o">(</span><span class="s1">&#39;SonarQube&#39;</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">sh</span> <span class="s1">&#39;./mvnw sonar:sonar&#39;</span>
      <span class="o">}</span>

      <span class="n">timeout</span><span class="o">(</span><span class="nl">time:</span> <span class="mi">10</span><span class="o">,</span> <span class="nl">unit:</span> <span class="s1">&#39;MINUTES&#39;</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">def</span> <span class="n">qg</span> <span class="o">=</span> <span class="n">waitForQualityGate</span><span class="o">()</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">qg</span><span class="o">.</span><span class="na">status</span> <span class="o">!=</span> <span class="s1">&#39;OK&#39;</span><span class="o">)</span> <span class="o">{</span>
          <span class="n">error</span> <span class="s2">&quot;SonarQube Quality Gate failed: ${qg.status}&quot;</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>

<h4>Bramki oparte na wydajności</h4>
<p>Dla aplikacji z wymaganiami wydajnościowymi kluczowe są bramki oparte na metrykach wydajnościowych:</p>
<ul>
<li>
<p><strong>Czasy odpowiedzi</strong>:</p>
<ul>
<li>Maksymalny czas odpowiedzi dla krytycznych funkcji (np. &lt; 1s dla 95 percentyla)</li>
<li>Średni czas odpowiedzi dla wszystkich operacji (np. &lt; 500ms)</li>
<li>Maksymalny spadek wydajności względem poprzedniej wersji (np. &lt; 10%)</li>
</ul>
</li>
<li>
<p><strong>Przepustowość</strong>:</p>
<ul>
<li>Minimalna obsługiwana liczba transakcji na sekundę</li>
<li>Minimalna liczba równoczesnych użytkowników</li>
<li>Stabilność pod obciążeniem (brak błędów przy zwiększonym ruchu)</li>
</ul>
</li>
<li>
<p><strong>Wykorzystanie zasobów</strong>:</p>
<ul>
<li>Maksymalne zużycie pamięci</li>
<li>Maksymalne wykorzystanie CPU</li>
<li>Maksymalna liczba zapytań do bazy danych per transakcja</li>
</ul>
</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="c1">// Przykład definicji bramki wydajnościowej w JMeter z wykorzystaniem Assert</span>
<span class="o">&lt;</span><span class="n">jp</span><span class="p">:</span><span class="n">JSR223Assertion</span> <span class="n">guiclass</span><span class="o">=</span><span class="s">&quot;TestBeanGUI&quot;</span> <span class="n">testclass</span><span class="o">=</span><span class="s">&quot;JSR223Assertion&quot;</span> <span class="n">testname</span><span class="o">=</span><span class="s">&quot;Performance Quality Gate&quot;</span> <span class="n">enabled</span><span class="o">=</span><span class="s">&quot;true&quot;</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">stringProp</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;scriptLanguage&quot;</span><span class="o">&gt;</span><span class="n">groovy</span><span class="o">&lt;/</span><span class="n">stringProp</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">stringProp</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;parameters&quot;</span><span class="o">&gt;&lt;/</span><span class="n">stringProp</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">stringProp</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;filename&quot;</span><span class="o">&gt;&lt;/</span><span class="n">stringProp</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">stringProp</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;cacheKey&quot;</span><span class="o">&gt;</span><span class="kc">true</span><span class="o">&lt;/</span><span class="n">stringProp</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">stringProp</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;script&quot;</span><span class="o">&gt;</span>
    <span class="n">def</span> <span class="n">response</span> <span class="o">=</span> <span class="n">prev</span><span class="p">.</span><span class="na">getResponseDataAsString</span><span class="p">();</span>
    <span class="n">def</span> <span class="n">responseTime</span> <span class="o">=</span> <span class="n">prev</span><span class="p">.</span><span class="na">getTime</span><span class="p">();</span>
    <span class="n">def</span> <span class="n">maxAllowedTime</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">;</span> <span class="c1">// 1 second</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">responseTime</span> <span class="o">&gt;</span> <span class="n">maxAllowedTime</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">AssertionResult</span><span class="p">.</span><span class="na">setFailure</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
        <span class="n">AssertionResult</span><span class="p">.</span><span class="na">setFailureMessage</span><span class="p">(</span><span class="s">&quot;Response time exceeded threshold: &quot;</span> <span class="o">+</span> <span class="n">responseTime</span> <span class="o">+</span> <span class="s">&quot;ms &gt; &quot;</span> <span class="o">+</span> <span class="n">maxAllowedTime</span> <span class="o">+</span> <span class="s">&quot;ms&quot;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// Weryfikacja trendu wydajności</span>
    <span class="n">def</span> <span class="n">previousResults</span> <span class="o">=</span> <span class="n">props</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;previousResponseTime&quot;</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">previousResults</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">def</span> <span class="n">previousTime</span> <span class="o">=</span> <span class="n">previousResults</span><span class="p">.</span><span class="na">toInteger</span><span class="p">();</span>
        <span class="n">def</span> <span class="n">degradation</span> <span class="o">=</span> <span class="p">((</span><span class="n">responseTime</span> <span class="o">-</span> <span class="n">previousTime</span><span class="p">)</span> <span class="o">/</span> <span class="n">previousTime</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span><span class="p">;</span>
        <span class="n">def</span> <span class="n">maxDegradation</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span> <span class="c1">// 10%</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">degradation</span> <span class="o">&gt;</span> <span class="n">maxDegradation</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">AssertionResult</span><span class="p">.</span><span class="na">setFailure</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
            <span class="n">AssertionResult</span><span class="p">.</span><span class="na">setFailureMessage</span><span class="p">(</span><span class="s">&quot;Performance degradation exceeded threshold: &quot;</span> <span class="o">+</span> <span class="n">degradation</span><span class="p">.</span><span class="na">round</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;% &gt; &quot;</span> <span class="o">+</span> <span class="n">maxDegradation</span> <span class="o">+</span> <span class="s">&quot;%&quot;</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
  <span class="o">&lt;/</span><span class="n">stringProp</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">jp</span><span class="p">:</span><span class="n">JSR223Assertion</span><span class="o">&gt;</span>
</code></pre></div>

<h4>Bramki oparte na bezpieczeństwie</h4>
<p>W dobie rosnących zagrożeń cyberbezpieczeństwa, bramki bezpieczeństwa stają się niezbędne:</p>
<ul>
<li>
<p><strong>Wyniki skanów bezpieczeństwa</strong>:</p>
<ul>
<li>Zero podatności krytycznych i wysokich</li>
<li>Ograniczona liczba podatności średnich (np. &lt; 5)</li>
<li>Brak znanych exploitów dla wykrytych podatności</li>
</ul>
</li>
<li>
<p><strong>Bezpieczeństwo komponentów</strong>:</p>
<ul>
<li>Brak przestarzałych bibliotek z znanymi podatnościami</li>
<li>Weryfikacja licencji używanych bibliotek</li>
<li>Skanowanie kontenerów pod kątem podatności</li>
</ul>
</li>
<li>
<p><strong>Zgodność z zasadami bezpieczeństwa</strong>:</p>
<ul>
<li>Spełnienie wymagań OWASP Top 10</li>
<li>Zgodność z regulacjami branżowymi (PCI DSS, HIPAA itp.)</li>
<li>Brak wrażliwych danych w kodzie (hasła, klucze API)</li>
</ul>
</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="c1"># Przykład definicji bramki bezpieczeństwa w GitLab CI</span><span class="w"></span>
<span class="nt">security_gate</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">stage</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test</span><span class="w"></span>
<span class="w">  </span><span class="nt">script</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./run-security-scan.sh</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">|</span><span class="w"></span>
<span class="w">      </span><span class="no">CRITICAL_VULNS=$(cat security-report.json | jq &#39;.vulnerabilities | map(select(.severity == &quot;Critical&quot;)) | length&#39;)</span><span class="w"></span>
<span class="w">      </span><span class="no">HIGH_VULNS=$(cat security-report.json | jq &#39;.vulnerabilities | map(select(.severity == &quot;High&quot;)) | length&#39;)</span><span class="w"></span>

<span class="w">      </span><span class="no">if [ $CRITICAL_VULNS -gt 0 ]; then</span><span class="w"></span>
<span class="w">        </span><span class="no">echo &quot;Security gate failed: $CRITICAL_VULNS critical vulnerabilities found&quot;</span><span class="w"></span>
<span class="w">        </span><span class="no">exit 1</span><span class="w"></span>
<span class="w">      </span><span class="no">fi</span><span class="w"></span>

<span class="w">      </span><span class="no">if [ $HIGH_VULNS -gt 0 ]; then</span><span class="w"></span>
<span class="w">        </span><span class="no">echo &quot;Security gate failed: $HIGH_VULNS high vulnerabilities found&quot;</span><span class="w"></span>
<span class="w">        </span><span class="no">exit 1</span><span class="w"></span>
<span class="w">      </span><span class="no">fi</span><span class="w"></span>
<span class="w">  </span><span class="nt">artifacts</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">paths</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">security-report.json</span><span class="w"></span>
</code></pre></div>

<h3>Implementacja bramek jakościowych w pipeline</h3>
<h4>Strategiczne rozmieszczenie bramek</h4>
<p>Bramki jakościowe powinny być strategicznie rozmieszczone w pipeline, aby zapewnić wczesne wykrywanie problemów:</p>
<ul>
<li>
<p><strong>Bramki deweloperskie</strong> (commit stage):</p>
<ul>
<li>Podstawowe testy jednostkowe</li>
<li>Statyczna analiza kodu</li>
<li>Weryfikacja stylu kodowania</li>
</ul>
</li>
<li>
<p><strong>Bramki przed integracją</strong> (merge stage):</p>
<ul>
<li>Rozszerzone testy jednostkowe i integracyjne</li>
<li>Weryfikacja pokrycia kodu</li>
<li>Skanowanie bezpieczeństwa kodu</li>
</ul>
</li>
<li>
<p><strong>Bramki przed wdrożeniem na staging</strong> (release stage):</p>
<ul>
<li>Pełne testy funkcjonalne</li>
<li>Testy wydajnościowe</li>
<li>Kompleksowe skanowanie bezpieczeństwa</li>
</ul>
</li>
<li>
<p><strong>Bramki przed wdrożeniem na produkcję</strong> (deployment stage):</p>
<ul>
<li>Weryfikacja krytycznych scenariuszy biznesowych</li>
<li>Testy akceptacyjne</li>
<li>Weryfikacja zgodności ze standardami i regulacjami</li>
</ul>
</li>
</ul>
<h4>Zarządzanie wyjątkami i eskalacjami</h4>
<p>Nawet najlepiej zaprojektowane bramki jakościowe mogą wymagać wyjątków w określonych sytuacjach:</p>
<ul>
<li>
<p><strong>Proces zatwierdzania wyjątków</strong>:</p>
<ul>
<li>Jasno zdefiniowane kryteria dopuszczalności wyjątków</li>
<li>Proces formalnej aprobaty przez właściwe osoby</li>
<li>Czasowe ograniczenie wyjątków z planem naprawczym</li>
<li>Audyt i monitorowanie wyjątków</li>
</ul>
</li>
<li>
<p><strong>Mechanizmy eskalacji</strong>:</p>
<ul>
<li>Automatyczne powiadomienia dla odpowiednich osób</li>
<li>Definiowanie ścieżek eskalacyjnych dla różnych typów bramek</li>
<li>Mechanizmy priorytetyzacji problemów</li>
</ul>
</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="c1">// Przykład implementacji mechanizmu wyjątków w Jenkins Pipeline</span>
<span class="n">stage</span><span class="p">(</span><span class="err">&#39;</span><span class="n">Quality</span> <span class="n">Gate</span><span class="p">:</span> <span class="n">Test</span> <span class="n">Results</span><span class="err">&#39;</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">steps</span> <span class="p">{</span>
    <span class="n">script</span> <span class="p">{</span>
      <span class="n">def</span> <span class="n">testResults</span> <span class="o">=</span> <span class="n">readJSON</span> <span class="n">file</span><span class="p">:</span> <span class="err">&#39;</span><span class="n">target</span><span class="o">/</span><span class="n">test</span><span class="o">-</span><span class="n">results</span><span class="o">-</span><span class="n">summary</span><span class="p">.</span><span class="na">json</span><span class="err">&#39;</span>

      <span class="c1">// Weryfikacja wskaźnika sukcesu</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">testResults</span><span class="p">.</span><span class="na">passRate</span> <span class="o">&lt;</span> <span class="mi">95</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Sprawdzenie, czy istnieje zatwierdzony wyjątek</span>
        <span class="n">def</span> <span class="n">exceptions</span> <span class="o">=</span> <span class="n">readJSON</span> <span class="n">file</span><span class="p">:</span> <span class="err">&#39;</span><span class="n">quality</span><span class="o">-</span><span class="n">gate</span><span class="o">-</span><span class="n">exceptions</span><span class="p">.</span><span class="na">json</span><span class="err">&#39;</span>
        <span class="n">def</span> <span class="n">hasValidException</span> <span class="o">=</span> <span class="n">exceptions</span><span class="p">.</span><span class="na">find</span> <span class="p">{</span> 
          <span class="n">it</span><span class="p">.</span><span class="na">type</span> <span class="o">==</span> <span class="err">&#39;</span><span class="n">test</span><span class="o">-</span><span class="n">pass</span><span class="o">-</span><span class="n">rate</span><span class="err">&#39;</span> <span class="o">&amp;&amp;</span> 
          <span class="n">it</span><span class="p">.</span><span class="na">value</span> <span class="o">&lt;=</span> <span class="n">testResults</span><span class="p">.</span><span class="na">passRate</span> <span class="o">&amp;&amp;</span> 
          <span class="n">it</span><span class="p">.</span><span class="na">expiryDate</span> <span class="o">&gt;</span> <span class="n">currentDate</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">hasValidException</span><span class="p">)</span> <span class="p">{</span>
          <span class="n">echo</span> <span class="s">&quot;WARNING: Quality gate bypassed due to approved exception: ${hasValidException.reason}&quot;</span>
          <span class="n">echo</span> <span class="s">&quot;Exception expires on ${hasValidException.expiryDate}, approved by: ${hasValidException.approver}&quot;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="n">error</span> <span class="s">&quot;Test pass rate below threshold: ${testResults.passRate}% &lt; 95%&quot;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3>Ewolucja bramek jakościowych</h3>
<p>Bramki jakościowe nie powinny być statyczne, lecz ewoluować wraz z rozwojem organizacji i projektu:</p>
<ul>
<li>
<p><strong>Progresywne zaostrzanie kryteriów</strong>:</p>
<ul>
<li>Rozpoczęcie od podstawowych, łatwych do spełnienia progów</li>
<li>Stopniowe zaostrzanie wymagań w miarę dojrzewania procesu</li>
<li>Regularne przeglądy i aktualizacje progów</li>
</ul>
</li>
<li>
<p><strong>Adaptacja do specyfiki projektu</strong>:</p>
<ul>
<li>Dostosowanie bramek do charakterystyki technologicznej projektu</li>
<li>Uwzględnienie specyficznych ryzyk biznesowych</li>
<li>Balansowanie rygorystyczności bramek z potrzebą szybkiego dostarczania</li>
</ul>
</li>
<li>
<p><strong>Mierzenie skuteczności</strong>:</p>
<ul>
<li>Analiza korelacji między bramkami a defektami produkcyjnymi</li>
<li>Optymalizacja bramek na podstawie empirycznych danych</li>
<li>Eliminacja nieefektywnych bramek</li>
</ul>
</li>
</ul>
<h3>Kultura jakości i bramki jakościowe</h3>
<p>Bramki jakościowe powinny wspierać budowanie kultury jakości w organizacji:</p>
<ul>
<li>
<p><strong>Transparentność i widoczność</strong>:</p>
<ul>
<li>Jasna komunikacja celów i znaczenia bramek jakościowych</li>
<li>Widoczne dashboardy pokazujące status bramek</li>
<li>Regularne przeglądy wyników i trendów</li>
</ul>
</li>
<li>
<p><strong>Odpowiedzialność zespołowa</strong>:</p>
<ul>
<li>Współodpowiedzialność całego zespołu za przechodzenie przez bramki</li>
<li>Angażowanie deweloperów w definiowanie i ewolucję bramek</li>
<li>Promowanie praktyk shift-left (wczesne wykrywanie problemów)</li>
</ul>
</li>
<li>
<p><strong>Ciągłe doskonalenie</strong>:</p>
<ul>
<li>Regularne retrospektywy dotyczące procesu jakościowego</li>
<li>Analiza przyczyn źródłowych naruszeń bramek</li>
<li>Wdrażanie usprawnień na podstawie zebranych doświadczeń</li>
</ul>
</li>
</ul>
<p>Efektywne bramki jakościowe stanowią kluczowy element dojrzałego procesu CI/CD, zapewniając obiektywne kryteria oceny
gotowości oprogramowania do wdrożenia oraz wspierając budowanie kultury odpowiedzialności za jakość w całej organizacji.
Odpowiednio zaimplementowane, nie tylko minimalizują ryzyko wdrażania wadliwego oprogramowania, ale także przyczyniają
się do zwiększenia efektywności całego procesu wytwarzania poprzez wczesne wykrywanie i naprawianie problemów.</p>
<h1>7. Dane testowe</h1>
<h2>7.1. Strategie zarządzania danymi testowymi</h2>
<p>Efektywne zarządzanie danymi testowymi stanowi fundament wiarygodnych i powtarzalnych testów automatycznych. Zgodnie z
zasadami ISTQB, dane testowe powinny zapewniać odpowiednie pokrycie wymagań funkcjonalnych i niefunkcjonalnych, a
jednocześnie być łatwe w utrzymaniu i aktualizacji. W praktyce oznacza to opracowanie spójnej strategii, która odpowiada
na specyficzne potrzeby projektu oraz wykorzystywane narzędzia (Java, Selenium, Selenide, RestAssured).</p>
<p>Jednym z kluczowych podejść jest wdrożenie czterowarstwowej strategii zarządzania danymi testowymi, która pozwala na
elastyczne dostosowanie się do różnych scenariuszy testowych:</p>
<ol>
<li>
<p><strong>Dane statyczne wbudowane w kod</strong> - Najprostsze podejście, odpowiednie dla małych, niezmiennych zbiorów danych. W
   Javie implementujemy je jako stałe (np. <code>public static final</code>) lub umieszczamy w plikach zasobów (resources). Dla
   testów z wykorzystaniem Selenium/Selenide, mogą to być selektory CSS/XPath, natomiast w przypadku RestAssured -
   podstawowe parametry zapytań HTTP.</p>
</li>
<li>
<p><strong>Zewnętrzne pliki danych</strong> - Rozdzielenie danych od kodu testowego. Najczęściej wykorzystujemy formaty takie jak
   CSV, JSON, XML czy YAML, które są łatwe w utrzymaniu i mogą być modyfikowane przez osoby nietechniczne. W Javie
   odczytujemy je za pomocą bibliotek takich jak Jackson (JSON), JAXB (XML) czy SnakeYAML. Zastosowanie wzorca Page
   Object Model w połączeniu z zewnętrznymi danymi znacząco zwiększa czytelność testów.</p>
</li>
<li>
<p><strong>Bazy danych testowych</strong> - Dla złożonych systemów wykorzystujemy dedykowane bazy danych testowych, które są
   replikami lub uproszczonymi wersjami baz produkcyjnych. Podejście to pozwala na testowanie skomplikowanych
   scenariuszy, ale wymaga odpowiedniego zarządzania stanem bazy. W Javie wykorzystujemy JDBC, JPA lub specjalizowane
   narzędzia jak Flyway czy Liquibase do kontroli stanu bazy.</p>
</li>
<li>
<p><strong>Dane generowane w locie</strong> - Tworzenie danych testowych w trakcie wykonywania testów. Podejście szczególnie
   przydatne w testach API z wykorzystaniem RestAssured, gdzie możemy dynamicznie generować payloady zapytań w oparciu o
   bieżący kontekst testu.</p>
</li>
</ol>
<p>Kluczowym aspektem strategii zarządzania danymi jest podejście do <strong>kontroli wersji danych testowych</strong>. Zgodnie z
dobrymi praktykami, dane testowe powinny być wersjonowane razem z kodem testów, co zapewnia spójność i powtarzalność
wykonania. W praktyce oznacza to przechowywanie plików z danymi w tym samym repozytorium co kod testów lub wykorzystanie
dedykowanych repozytoriów z odpowiednim powiązaniem wersji.</p>
<p>Istotnym elementem strategii jest też <strong>zarządzanie danymi wrażliwymi</strong>. Zgodnie z zasadami ISTQB, dane produkcyjne
zawierające informacje osobowe nie powinny być używane w środowiskach testowych bez odpowiedniej anonimizacji. W
praktyce implementujemy to poprzez:</p>
<ul>
<li>Maskowanie danych (np. zastępowanie prawdziwych nazwisk losowymi ciągami znaków)</li>
<li>Pseudonimizację (zastępowanie rzeczywistych danych realistycznymi, ale fikcyjnymi)</li>
<li>Tokenizację (zamiana wrażliwych danych na tokeny bez znaczenia biznesowego)</li>
</ul>
<p>Efektywna strategia musi również uwzględniać <strong>zarządzanie stanem danych</strong>. W testach z wykorzystaniem Selenium/Selenide
często musimy zapewnić, że system znajduje się w określonym stanie przed wykonaniem testu. Realizujemy to poprzez:</p>
<ul>
<li>Tworzenie prekondycji za pomocą API (szybsze niż przez UI)</li>
<li>Wykorzystanie zrzutów bazy danych dla określonych stanów aplikacji</li>
<li>Bezpośrednie manipulowanie bazą danych przed rozpoczęciem testu</li>
</ul>
<p>Nieodzownym elementem strategii zarządzania danymi testowymi jest <strong>monitoring i konserwacja</strong>. Dane testowe z czasem
stają się nieaktualne lub niekompletne. Regularne przeglądy i aktualizacje zbioru danych testowych są kluczowe dla
utrzymania efektywności testów. W praktyce implementujemy to poprzez:</p>
<ul>
<li>Automatyczne audyty pokrycia danych testowych</li>
<li>Synchronizację struktury danych testowych ze zmianami w systemie</li>
<li>Cykliczne odświeżanie danych testowych w oparciu o (zanonimizowane) dane produkcyjne</li>
</ul>
<p>Wybór odpowiedniej strategii zarządzania danymi testowymi powinien być oparty na analizie czynników takich jak złożoność
systemu, częstotliwość zmian w danych, wymagania dotyczące wydajności testów oraz dostępne zasoby. Dobrze zaprojektowana
strategia znacząco przyczynia się do zwiększenia efektywności procesu testowego, redukcji kosztów utrzymania oraz
poprawy jakości testów automatycznych.</p>
<h2>7.2. Generowanie danych testowych</h2>
<p>Generowanie danych testowych to kluczowy element efektywnej automatyzacji testów, który bezpośrednio wpływa na jakość i
wiarygodność wyników. Zgodnie z wytycznymi ISTQB, dane testowe powinny odzwierciedlać rzeczywiste scenariusze użycia, a
jednocześnie pokrywać przypadki brzegowe i wyjątkowe. W kontekście automatyzacji z wykorzystaniem Javy,
Selenium/Selenide i RestAssured, mamy do dyspozycji szereg metod i narzędzi usprawniających ten proces.</p>
<p><strong>Biblioteki do generowania danych testowych w Javie</strong> stanowią podstawowe narzędzie każdego testera automatyzującego.
Najpopularniejsze z nich to:</p>
<ol>
<li><strong>Java Faker</strong> - biblioteka umożliwiająca generowanie realistycznych, losowych danych dla różnych kategorii (dane
   osobowe, adresy, numery telefonów). Szczególnie przydatna w testach formularzy z wykorzystaniem Selenium/Selenide.</li>
</ol>
<div class="codehilite"><pre><span></span><code>   <span class="n">Faker</span> <span class="n">faker</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Faker</span><span class="p">(</span><span class="k">new</span> <span class="n">Locale</span><span class="p">(</span><span class="s">&quot;pl&quot;</span><span class="p">));</span>
   <span class="n">String</span> <span class="n">name</span> <span class="o">=</span> <span class="n">faker</span><span class="p">.</span><span class="na">name</span><span class="p">().</span><span class="na">fullName</span><span class="p">();</span>
   <span class="n">String</span> <span class="n">email</span> <span class="o">=</span> <span class="n">faker</span><span class="p">.</span><span class="na">internet</span><span class="p">().</span><span class="na">emailAddress</span><span class="p">();</span>
</code></pre></div>

<ol>
<li><strong>JUnit Params / TestNG DataProvider</strong> - mechanizmy parametryzacji testów, które umożliwiają łatwe dostarczanie
   różnych zestawów danych do tych samych metod testowych.</li>
</ol>
<div class="codehilite"><pre><span></span><code>   <span class="nd">@ParameterizedTest</span>
   <span class="nd">@CsvSource</span><span class="p">({</span><span class="s">&quot;jan.kowalski@example.com, JanKowalski123&quot;</span><span class="p">,</span> <span class="s">&quot;anna.nowak@example.com, Anna!2023&quot;</span><span class="p">})</span>
   <span class="kt">void</span> <span class="nf">testLogin</span><span class="p">(</span><span class="n">String</span> <span class="n">username</span><span class="p">,</span> <span class="n">String</span> <span class="n">password</span><span class="p">)</span> <span class="p">{</span>
       <span class="n">loginPage</span><span class="p">.</span><span class="na">login</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">);</span>
       <span class="n">assertThat</span><span class="p">(</span><span class="n">homePage</span><span class="p">.</span><span class="na">isDisplayed</span><span class="p">()).</span><span class="na">isTrue</span><span class="p">();</span>
   <span class="p">}</span>
</code></pre></div>

<ol>
<li>
<p><strong>Apache Commons Lang</strong> - zawiera narzędzia do generowania losowych ciągów znaków, liczb i innych podstawowych typów
   danych.</p>
</li>
<li>
<p><strong>RandomizedTesting</strong> - rozszerzenie dla JUnit, które wprowadza deterministyczne, ale losowe dane do testów.</p>
</li>
<li>
<p><strong>jOOR</strong> - biblioteka do refleksji, pomocna przy generowaniu kompletnych obiektów testowych.</p>
</li>
</ol>
<p><strong>Techniki generowania danych testowych</strong> można podzielić na kilka głównych kategorii:</p>
<ol>
<li><strong>Generowanie przypadków brzegowych</strong> - automatyczne tworzenie wartości na granicach dozwolonych zakresów, co jest
   kluczowe dla testowania walidacji. Dla interfejsów REST testowanych przy użyciu RestAssured, oznacza to generowanie
   payloadów z wartościami na granicach dozwolonych zakresów.</li>
</ol>
<div class="codehilite"><pre><span></span><code>   <span class="c1">// Testowanie walidacji długości pola</span>
   <span class="n">String</span> <span class="n">exactlyMaxLength</span> <span class="o">=</span> <span class="n">RandomStringUtils</span><span class="p">.</span><span class="na">random</span><span class="p">(</span><span class="mi">255</span><span class="p">);</span>
   <span class="n">String</span> <span class="n">tooLongString</span> <span class="o">=</span> <span class="n">RandomStringUtils</span><span class="p">.</span><span class="na">random</span><span class="p">(</span><span class="mi">256</span><span class="p">);</span>
</code></pre></div>

<ol>
<li><strong>Generowanie danych strukturalnych</strong> - tworzenie złożonych struktur danych odpowiadających modelowi domenowemu
   aplikacji. W przypadku testów REST API z wykorzystaniem RestAssured, często generujemy całe drzewa obiektów JSON.</li>
</ol>
<div class="codehilite"><pre><span></span><code>   <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
       <span class="p">.</span><span class="na">firstName</span><span class="p">(</span><span class="n">faker</span><span class="p">.</span><span class="na">name</span><span class="p">().</span><span class="na">firstName</span><span class="p">())</span>
       <span class="p">.</span><span class="na">lastName</span><span class="p">(</span><span class="n">faker</span><span class="p">.</span><span class="na">name</span><span class="p">().</span><span class="na">lastName</span><span class="p">())</span>
       <span class="p">.</span><span class="na">address</span><span class="p">(</span><span class="n">Address</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
           <span class="p">.</span><span class="na">street</span><span class="p">(</span><span class="n">faker</span><span class="p">.</span><span class="na">address</span><span class="p">().</span><span class="na">streetAddress</span><span class="p">())</span>
           <span class="p">.</span><span class="na">city</span><span class="p">(</span><span class="n">faker</span><span class="p">.</span><span class="na">address</span><span class="p">().</span><span class="na">city</span><span class="p">())</span>
           <span class="p">.</span><span class="na">zipCode</span><span class="p">(</span><span class="n">faker</span><span class="p">.</span><span class="na">address</span><span class="p">().</span><span class="na">zipCode</span><span class="p">())</span>
           <span class="p">.</span><span class="na">build</span><span class="p">())</span>
       <span class="p">.</span><span class="na">build</span><span class="p">();</span>
</code></pre></div>

<ol>
<li><strong>Generowanie danych warunkowych</strong> - tworzenie danych, które spełniają określone warunki biznesowe lub zależności.</li>
</ol>
<div class="codehilite"><pre><span></span><code>   <span class="c1">// Generowanie wieku odpowiedniego dla emeryta</span>
   <span class="kt">int</span> <span class="n">retirementAge</span> <span class="o">=</span> <span class="n">faker</span><span class="p">.</span><span class="na">number</span><span class="p">().</span><span class="na">numberBetween</span><span class="p">(</span><span class="mi">65</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
</code></pre></div>

<ol>
<li><strong>Generowanie danych zależnych od czasu</strong> - tworzenie danych uwzględniających aspekty czasowe, co jest szczególnie
   istotne w systemach z logiką biznesową opartą na datach.</li>
</ol>
<div class="codehilite"><pre><span></span><code>   <span class="c1">// Data urodzenia osoby pełnoletniej</span>
   <span class="n">LocalDate</span> <span class="n">adultBirthDate</span> <span class="o">=</span> <span class="n">LocalDate</span><span class="p">.</span><span class="na">now</span><span class="p">().</span><span class="na">minusYears</span><span class="p">(</span>
       <span class="n">faker</span><span class="p">.</span><span class="na">number</span><span class="p">().</span><span class="na">numberBetween</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="mi">90</span><span class="p">));</span>
</code></pre></div>

<p><strong>Projektowanie generatorów danych testowych</strong> zgodnie z dobrymi praktykami wymaga:</p>
<ol>
<li><strong>Enkapsulacji logiki generowania</strong> - tworzenie dedykowanych fabryk danych, które ukrywają szczegóły implementacyjne
   i oferują czytelny interfejs.</li>
</ol>
<div class="codehilite"><pre><span></span><code>   <span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserTestDataFactory</span> <span class="p">{</span>
       <span class="kd">public</span> <span class="kd">static</span> <span class="n">User</span> <span class="nf">createValidUser</span><span class="p">()</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
       <span class="kd">public</span> <span class="kd">static</span> <span class="n">User</span> <span class="nf">createUserWithInvalidEmail</span><span class="p">()</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
   <span class="p">}</span>
</code></pre></div>

<ol>
<li>
<p><strong>Separacji mechanizmu generowania od logiki testowej</strong> - zgodnie z zasadą SRP (Single Responsibility Principle), kod
   odpowiedzialny za generowanie danych powinien być oddzielony od kodu testowego.</p>
</li>
<li>
<p><strong>Powtarzalności</strong> - zapewnienie, że przy tych samych parametrach wejściowych generator zawsze produkuje te same
   dane, co jest kluczowe dla debugowania testów.</p>
</li>
</ol>
<div class="codehilite"><pre><span></span><code>   <span class="c1">// Używanie ziarna (seed) dla powtarzalnych wyników</span>
   <span class="n">Random</span> <span class="n">random</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Random</span><span class="p">(</span><span class="mi">42</span><span class="p">);</span>
</code></pre></div>

<ol>
<li><strong>Elastyczności</strong> - możliwość łatwego dostosowania generatorów do zmieniających się wymagań i struktur danych.</li>
</ol>
<div class="codehilite"><pre><span></span><code>   <span class="kd">public</span> <span class="n">User</span> <span class="nf">createUser</span><span class="p">(</span><span class="n">UserTemplate</span> <span class="n">template</span><span class="p">)</span> <span class="p">{</span>
       <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">createBaseUser</span><span class="p">();</span>
       <span class="k">if</span> <span class="p">(</span><span class="n">template</span><span class="p">.</span><span class="na">hasCustomEmail</span><span class="p">())</span> <span class="p">{</span>
           <span class="n">user</span><span class="p">.</span><span class="na">setEmail</span><span class="p">(</span><span class="n">template</span><span class="p">.</span><span class="na">getEmail</span><span class="p">());</span>
       <span class="p">}</span>
       <span class="k">return</span> <span class="n">user</span><span class="p">;</span>
   <span class="p">}</span>
</code></pre></div>

<p><strong>Integracja z zewnętrznymi źródłami danych</strong> może znacząco zwiększyć realizm i pokrycie testów:</p>
<ol>
<li>
<p><strong>API do generowania danych</strong> - wykorzystanie zewnętrznych usług dostarczających realistyczne dane (np. Random User
   API).</p>
</li>
<li>
<p><strong>Zanonimizowane dane produkcyjne</strong> - wykorzystanie rzeczywistych, ale zanonimizowanych danych z systemów
   produkcyjnych.</p>
</li>
<li>
<p><strong>Crowdsourcing danych testowych</strong> - wykorzystanie platform typu Mechanical Turk do pozyskiwania danych testowych od
   rzeczywistych użytkowników.</p>
</li>
</ol>
<p>Efektywne generowanie danych testowych nie tylko zwiększa pokrycie testowe, ale także przyspiesza proces tworzenia
testów i zmniejsza ryzyko przeoczenia istotnych scenariuszy. W kontekście narzędzi takich jak Selenium/Selenide czy
RestAssured, dobrze zaprojektowane generatory danych testowych stanowią niezbędny element infrastruktury testowej.</p>
<h2>7.3. Izolacja danych między testami</h2>
<p>Izolacja danych testowych to fundamentalny aspekt tworzenia niezawodnych i powtarzalnych testów automatycznych. Zgodnie
z zasadami ISTQB, każdy test powinien być niezależny od innych i wykonywać się w przewidywalnym środowisku. W praktyce
oznacza to, że dane używane lub modyfikowane przez jeden test nie powinny wpływać na wykonanie innych testów.
Implementacja tej zasady w środowisku Java z wykorzystaniem narzędzi takich jak Selenium, Selenide i RestAssured wymaga
zastosowania odpowiednich technik i wzorców.</p>
<p><strong>Główne problemy związane z brakiem izolacji danych</strong> to:</p>
<ol>
<li>
<p><strong>Testy zależne od kolejności wykonania</strong> - gdy jeden test tworzy dane, które są następnie używane przez inny test,
   co prowadzi do niestabilności i trudności w debugowaniu.</p>
</li>
<li>
<p><strong>Efekty uboczne</strong> - gdy jeden test modyfikuje dane w sposób, który wpływa na inne testy, powodując nieprzewidywalne
   wyniki.</p>
</li>
<li>
<p><strong>Wyścigi (race conditions)</strong> - gdy testy wykonywane równolegle konkurują o te same dane, co może prowadzić do
   nieprzewidywalnych wyników i fałszywych błędów.</p>
</li>
</ol>
<p><strong>Techniki izolacji danych w testach</strong> można podzielić na kilka głównych kategorii:</p>
<ol>
<li><strong>Izolacja na poziomie środowiska</strong> - zapewnienie każdemu testowi lub zestawowi testów dedykowanego środowiska.</li>
</ol>
<div class="codehilite"><pre><span></span><code>   <span class="nd">@BeforeEach</span>
   <span class="kt">void</span> <span class="nf">setupTestDatabase</span><span class="p">()</span> <span class="p">{</span>
       <span class="n">databaseManager</span><span class="p">.</span><span class="na">createTemporarySchema</span><span class="p">();</span>
       <span class="n">databaseManager</span><span class="p">.</span><span class="na">applyMigrations</span><span class="p">();</span>
   <span class="p">}</span>

   <span class="nd">@AfterEach</span>
   <span class="kt">void</span> <span class="nf">cleanupTestDatabase</span><span class="p">()</span> <span class="p">{</span>
       <span class="n">databaseManager</span><span class="p">.</span><span class="na">dropTemporarySchema</span><span class="p">();</span>
   <span class="p">}</span>
</code></pre></div>

<ol>
<li><strong>Izolacja na poziomie transakcji</strong> - wykorzystanie transakcji bazodanowych do izolowania zmian wprowadzanych przez
   testy.</li>
</ol>
<div class="codehilite"><pre><span></span><code>   <span class="nd">@Test</span>
   <span class="nd">@Transactional</span>
   <span class="kt">void</span> <span class="nf">testUserCreation</span><span class="p">()</span> <span class="p">{</span>
       <span class="c1">// Zmiany zostaną wycofane po zakończeniu testu</span>
       <span class="n">userRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="k">new</span> <span class="n">User</span><span class="p">(</span><span class="s">&quot;jan&quot;</span><span class="p">,</span> <span class="s">&quot;kowalski&quot;</span><span class="p">));</span>
       <span class="n">assertThat</span><span class="p">(</span><span class="n">userRepository</span><span class="p">.</span><span class="na">findByUsername</span><span class="p">(</span><span class="s">&quot;jan&quot;</span><span class="p">)).</span><span class="na">isPresent</span><span class="p">();</span>
   <span class="p">}</span>
</code></pre></div>

<ol>
<li><strong>Izolacja przez unikalność danych</strong> - zapewnienie, że każdy test operuje na unikalnych danych, które nie kolidują z
   danymi innych testów.</li>
</ol>
<div class="codehilite"><pre><span></span><code>   <span class="nd">@Test</span>
   <span class="kt">void</span> <span class="nf">testUserRegistration</span><span class="p">()</span> <span class="p">{</span>
       <span class="n">String</span> <span class="n">uniqueEmail</span> <span class="o">=</span> <span class="s">&quot;user_&quot;</span> <span class="o">+</span> <span class="n">UUID</span><span class="p">.</span><span class="na">randomUUID</span><span class="p">()</span> <span class="o">+</span> <span class="s">&quot;@example.com&quot;</span><span class="p">;</span>
       <span class="n">registrationPage</span><span class="p">.</span><span class="na">registerUser</span><span class="p">(</span><span class="n">uniqueEmail</span><span class="p">,</span> <span class="s">&quot;password123&quot;</span><span class="p">);</span>
       <span class="n">assertThat</span><span class="p">(</span><span class="n">dashboardPage</span><span class="p">.</span><span class="na">isLoggedIn</span><span class="p">()).</span><span class="na">isTrue</span><span class="p">();</span>
   <span class="p">}</span>
</code></pre></div>

<ol>
<li><strong>Izolacja przez czyszczenie danych</strong> - systematyczne czyszczenie danych przed lub po każdym teście.</li>
</ol>
<div class="codehilite"><pre><span></span><code>   <span class="nd">@AfterEach</span>
   <span class="kt">void</span> <span class="nf">cleanupCreatedUsers</span><span class="p">()</span> <span class="p">{</span>
       <span class="n">userRepository</span><span class="p">.</span><span class="na">deleteByEmailContaining</span><span class="p">(</span><span class="n">testIdentifier</span><span class="p">);</span>
   <span class="p">}</span>
</code></pre></div>

<p><strong>Wzorce projektowe wspierające izolację danych</strong> obejmują:</p>
<ol>
<li><strong>Test Fixture</strong> - przygotowanie znanego, stałego środowiska dla każdego testu, co eliminuje zależności między
   testami.</li>
</ol>
<div class="codehilite"><pre><span></span><code>   <span class="nd">@BeforeEach</span>
   <span class="kt">void</span> <span class="nf">setupFixture</span><span class="p">()</span> <span class="p">{</span>
       <span class="c1">// Przygotowanie danych dla testu</span>
       <span class="n">testUser</span> <span class="o">=</span> <span class="n">userTestDataFactory</span><span class="p">.</span><span class="na">createTestUser</span><span class="p">();</span>
       <span class="n">testProduct</span> <span class="o">=</span> <span class="n">productTestDataFactory</span><span class="p">.</span><span class="na">createTestProduct</span><span class="p">();</span>

       <span class="c1">// Dodanie danych do systemu</span>
       <span class="n">given</span><span class="p">().</span><span class="na">contentType</span><span class="p">(</span><span class="n">ContentType</span><span class="p">.</span><span class="na">JSON</span><span class="p">)</span>
           <span class="p">.</span><span class="na">body</span><span class="p">(</span><span class="n">testUser</span><span class="p">)</span>
           <span class="p">.</span><span class="na">when</span><span class="p">().</span><span class="na">post</span><span class="p">(</span><span class="s">&quot;/api/users&quot;</span><span class="p">)</span>
           <span class="p">.</span><span class="na">then</span><span class="p">().</span><span class="na">statusCode</span><span class="p">(</span><span class="mi">201</span><span class="p">);</span>
   <span class="p">}</span>
</code></pre></div>

<ol>
<li><strong>Object Mother</strong> - wzorzec dostarczający metody fabrykujące obiekty testowe o określonych właściwościach.</li>
</ol>
<div class="codehilite"><pre><span></span><code>   <span class="kd">public</span> <span class="kd">class</span> <span class="nc">OrderMother</span> <span class="p">{</span>
       <span class="kd">public</span> <span class="kd">static</span> <span class="n">Order</span> <span class="nf">createPendingOrder</span><span class="p">()</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
       <span class="kd">public</span> <span class="kd">static</span> <span class="n">Order</span> <span class="nf">createCompletedOrder</span><span class="p">()</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
   <span class="p">}</span>
</code></pre></div>

<ol>
<li><strong>Test Data Builder</strong> - wzorzec umożliwiający fluent API do tworzenia obiektów testowych.</li>
</ol>
<div class="codehilite"><pre><span></span><code>   <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="k">new</span> <span class="n">UserBuilder</span><span class="p">()</span>
       <span class="p">.</span><span class="na">withUsername</span><span class="p">(</span><span class="s">&quot;testuser_&quot;</span> <span class="o">+</span> <span class="n">System</span><span class="p">.</span><span class="na">currentTimeMillis</span><span class="p">())</span>
       <span class="p">.</span><span class="na">withEmail</span><span class="p">(</span><span class="s">&quot;test_&quot;</span> <span class="o">+</span> <span class="n">UUID</span><span class="p">.</span><span class="na">randomUUID</span><span class="p">()</span> <span class="o">+</span> <span class="s">&quot;@example.com&quot;</span><span class="p">)</span>
       <span class="p">.</span><span class="na">withActivatedAccount</span><span class="p">()</span>
       <span class="p">.</span><span class="na">build</span><span class="p">();</span>
</code></pre></div>

<p><strong>Praktyczne strategie izolacji danych w różnych warstwach testów</strong>:</p>
<ol>
<li>
<p><strong>Testy UI (Selenium/Selenide)</strong>:</p>
<ul>
<li>Używanie unikalnych identyfikatorów w testach (np. dodawanie timestampów do nazw użytkowników)</li>
<li>Czyszczenie stanu aplikacji poprzez API przed uruchomieniem testu UI</li>
<li>Wykorzystanie cookies lub localStorage do izolacji sesji między testami</li>
</ul>
</li>
<li>
<p><strong>Testy API (RestAssured)</strong>:</p>
<ul>
<li>Tworzenie unikalnych zasobów dla każdego testu</li>
<li>Wykorzystanie dedykowanych nagłówków HTTP do identyfikacji zasobów utworzonych przez testy</li>
<li>Implementacja mechanizmu śledzenia i czyszczenia zasobów po testach</li>
</ul>
</li>
</ol>
<div class="codehilite"><pre><span></span><code>   <span class="n">String</span> <span class="n">resourceId</span> <span class="o">=</span> <span class="n">given</span><span class="p">().</span><span class="na">contentType</span><span class="p">(</span><span class="n">ContentType</span><span class="p">.</span><span class="na">JSON</span><span class="p">)</span>
       <span class="p">.</span><span class="na">header</span><span class="p">(</span><span class="s">&quot;X-Test-Identifier&quot;</span><span class="p">,</span> <span class="n">testRunId</span><span class="p">)</span>
       <span class="p">.</span><span class="na">body</span><span class="p">(</span><span class="n">newResource</span><span class="p">)</span>
       <span class="p">.</span><span class="na">when</span><span class="p">().</span><span class="na">post</span><span class="p">(</span><span class="s">&quot;/api/resources&quot;</span><span class="p">)</span>
       <span class="p">.</span><span class="na">then</span><span class="p">().</span><span class="na">extract</span><span class="p">().</span><span class="na">path</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">);</span>

   <span class="c1">// Po teście</span>
   <span class="n">given</span><span class="p">().</span><span class="na">header</span><span class="p">(</span><span class="s">&quot;X-Test-Identifier&quot;</span><span class="p">,</span> <span class="n">testRunId</span><span class="p">)</span>
       <span class="p">.</span><span class="na">when</span><span class="p">().</span><span class="na">delete</span><span class="p">(</span><span class="s">&quot;/api/resources/cleanup&quot;</span><span class="p">);</span>
</code></pre></div>

<ol>
<li><strong>Testy integracyjne z bazą danych</strong>:<ul>
<li>Wykorzystanie wbudowanych mechanizmów izolacji w bazach danych (np. schematy w PostgreSQL)</li>
<li>Implementacja testów z wykorzystaniem kontenerów Docker (np. Testcontainers)</li>
<li>Stosowanie migracji bazodanowych dla każdego uruchomienia testu</li>
</ul>
</li>
</ol>
<p><strong>Narzędzia wspierające izolację danych</strong> w ekosystemie Java:</p>
<ol>
<li>
<p><strong>DBUnit</strong> - umożliwia przygotowanie danych testowych w bazie danych i przywracanie stanu początkowego.</p>
</li>
<li>
<p><strong>Flyway/Liquibase</strong> - narzędzia do migracji baz danych, które można wykorzystać do przygotowania schematu i danych
   początkowych.</p>
</li>
<li>
<p><strong>Testcontainers</strong> - biblioteka umożliwiająca uruchamianie kontenerów Docker na potrzeby testów, co zapewnia izolację
   na poziomie infrastruktury.</p>
</li>
</ol>
<div class="codehilite"><pre><span></span><code>   <span class="nd">@Container</span>
   <span class="kd">static</span> <span class="n">PostgreSQLContainer</span><span class="o">&lt;?&gt;</span> <span class="n">postgres</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PostgreSQLContainer</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="s">&quot;postgres:13&quot;</span><span class="p">)</span>
       <span class="p">.</span><span class="na">withDatabaseName</span><span class="p">(</span><span class="s">&quot;testdb&quot;</span><span class="p">)</span>
       <span class="p">.</span><span class="na">withUsername</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">)</span>
       <span class="p">.</span><span class="na">withPassword</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">);</span>
</code></pre></div>

<ol>
<li><strong>Spring Test</strong> - dla aplikacji Spring, oferuje narzędzia do izolacji testów, takie jak <code>@DirtiesContext</code> czy
   <code>@Transactional</code>.</li>
</ol>
<p>Efektywna izolacja danych testowych wymaga starannego planowania i konsekwentnego stosowania wybranych technik. Choć
może wymagać dodatkowego nakładu pracy na etapie implementacji testów, znacząco zwiększa niezawodność i powtarzalność
testów automatycznych, co ostatecznie prowadzi do wyższej jakości oprogramowania i szybszego wykrywania defektów.</p>
<h1>Strategia Shift-Left w praktyce</h1>
<p>Strategia Shift-Left to podejście, które polega na przesunięciu aktywności testowych na wcześniejsze etapy cyklu
wytwarzania oprogramowania. Zamiast koncentrować się na testowaniu pod koniec cyklu rozwoju, Shift-Left promuje
testowanie od samego początku procesu. Celem jest wcześniejsze wykrywanie defektów, co znacząco redukuje koszty naprawy
błędów i skraca czas wprowadzania produktu na rynek.</p>
<p>W kontekście testów automatycznych strategia Shift-Left nabiera szczególnego znaczenia. Automatyzacja testów już na
wczesnych etapach rozwoju oprogramowania pozwala na szybkie wykrywanie błędów, uzyskiwanie natychmiastowej informacji
zwrotnej i zapewnianie wysokiej jakości produktu końcowego. Implementując podejście Shift-Left, organizacje mogą tworzyć
bardziej niezawodne oprogramowanie przy jednoczesnym skróceniu cyklu wytwarzania.</p>
<p>Kluczowe korzyści strategii Shift-Left:</p>
<ul>
<li>Wcześniejsze wykrywanie defektów, gdy koszt ich naprawy jest niższy</li>
<li>Skrócenie czasu wprowadzania produktu na rynek</li>
<li>Zwiększenie współpracy między zespołami deweloperskimi i testowymi</li>
<li>Poprawa jakości oprogramowania</li>
<li>Zmniejszenie długu technicznego</li>
<li>Redukcja kosztów związanych z naprawą błędów</li>
</ul>
<p>Przejdźmy teraz do szczegółowego omówienia implementacji strategii Shift-Left w praktyce, ze szczególnym uwzględnieniem
testów automatycznych realizowanych przy użyciu Javy, Selenium, Selenide i Rest Assured.</p>
<h2>11.1. Integracja testów automatycznych w procesie wytwarzania</h2>
<p>Skuteczna integracja testów automatycznych w procesie wytwarzania oprogramowania stanowi fundament strategii Shift-Left.
Wymaga to przemyślanego podejścia, które łączy narzędzia, procesy i ludzi w spójny ekosystem.</p>
<h3>Wybór odpowiednich narzędzi i frameworków</h3>
<p>W kontekście Javy, ekosystem testów automatycznych oferuje wiele dojrzałych rozwiązań. Dla testów interfejsu
użytkownika, Selenium WebDriver wraz z Selenide stanowią potężną kombinację. Selenide, jako warstwa abstrakcji nad
Selenium, upraszcza pisanie i utrzymywanie testów UI poprzez elegantny API i wbudowane mechanizmy oczekiwania na
elementy.</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// Przykład testu UI z wykorzystaniem Selenide</span>
<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">userCanLoginSuccessfully</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">open</span><span class="p">(</span><span class="s">&quot;https://example.com/login&quot;</span><span class="p">);</span>
    <span class="n">$</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="na">id</span><span class="p">(</span><span class="s">&quot;username&quot;</span><span class="p">)).</span><span class="na">setValue</span><span class="p">(</span><span class="s">&quot;testuser&quot;</span><span class="p">);</span>
    <span class="n">$</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="na">id</span><span class="p">(</span><span class="s">&quot;password&quot;</span><span class="p">)).</span><span class="na">setValue</span><span class="p">(</span><span class="s">&quot;password&quot;</span><span class="p">);</span>
    <span class="n">$</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="na">id</span><span class="p">(</span><span class="s">&quot;loginButton&quot;</span><span class="p">)).</span><span class="na">click</span><span class="p">();</span>
    <span class="n">$</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="na">id</span><span class="p">(</span><span class="s">&quot;welcomeMessage&quot;</span><span class="p">)).</span><span class="na">shouldHave</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s">&quot;Welcome, Test User!&quot;</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div>

<p>Dla testów API, Rest Assured oferuje czytelny, fluent interfejs, który ułatwia weryfikację odpowiedzi i zachowań usług
RESTful:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// Przykład testu API z wykorzystaniem Rest Assured</span>
<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">canRetrieveUserDetails</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">given</span><span class="p">()</span>
        <span class="p">.</span><span class="na">header</span><span class="p">(</span><span class="s">&quot;Authorization&quot;</span><span class="p">,</span> <span class="s">&quot;Bearer &quot;</span> <span class="o">+</span> <span class="n">authToken</span><span class="p">)</span>
    <span class="p">.</span><span class="na">when</span><span class="p">()</span>
        <span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;/api/users/1&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="na">then</span><span class="p">()</span>
        <span class="p">.</span><span class="na">statusCode</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
        <span class="p">.</span><span class="na">body</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">,</span> <span class="n">equalTo</span><span class="p">(</span><span class="s">&quot;John Kowalski&quot;</span><span class="p">))</span>
        <span class="p">.</span><span class="na">body</span><span class="p">(</span><span class="s">&quot;email&quot;</span><span class="p">,</span> <span class="n">equalTo</span><span class="p">(</span><span class="s">&quot;john.Kowalski@example.com&quot;</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div>

<h3>Integracja z CI/CD</h3>
<p>Kluczowym elementem strategii Shift-Left jest integracja testów automatycznych z CI/CD (Continuous
Integration/Continuous Delivery).
Testy powinny być uruchamiane automatycznie przy każdej zmianie kodu, dostarczając natychmiastową informację zwrotną.
Wykonywany poziom testów powinien być wykonywany przy każdym pushu (unit testy), czy pull requeście (testy integracyjne) 
a nawet akceptacyjne przy mołżiwościu deploya zmiany na środowisko tworzone ad-hoc.</p>
<h3>Strategia zarządzania danymi testowymi</h3>
<p>Efektywne zarządzanie danymi testowymi jest krytyczne dla strategii Shift-Left. Testy automatyczne wymagają
przewidywalnego i kontrolowanego środowiska, aby zapewnić powtarzalność i niezawodność.</p>
<p>W praktyce najlepiej sprawdzają się następujące podejścia:</p>
<ul>
<li>Izolacja testów - każdy test powinien być niezależny i samodzielnie przygotowywać swoje dane</li>
<li>Wykorzystanie baz testowych - dedykowane bazy danych dla środowisk testowych</li>
<li>Test Data Builders - wzorzec projektowy ułatwiający tworzenie obiektów testowych</li>
<li>Wykorzystanie rozwiązań typu "database versioning" (np. Flyway, Liquibase)</li>
</ul>
<h3>Automatyzacja na różnych poziomach</h3>
<p>Strategia Shift-Left wymaga automatyzacji testów na różnych poziomach:</p>
<ul>
<li>Testy jednostkowe</li>
<li>Testy integracyjne (Testcontainers)</li>
<li>Testy API (Rest Assured)</li>
<li>Testy UI (Selenium, Selenide)</li>
<li>Testy wydajnościowe (JMeter/Locut/k6)</li>
<li>Testy bezpieczeństwa (OWASP ZAP, Burp Suite)</li>
</ul>
<p>Kluczem jest utrzymanie właściwych proporcji między różnymi typami testów, zgodnie z Piramidą Testów.</p>
<h2>11.2. Współpraca między deweloperami a testerami</h2>
<p>Skuteczna implementacja strategii Shift-Left wymaga fundamentalnej zmiany w tradycyjnej relacji między deweloperami a
testerami. Zamiast działać jako oddzielne, często konkurujące ze sobą zespoły, deweloperzy i testerzy muszą funkcjonować
jako zintegrowana jednostka, dążąca do wspólnego celu - dostarczania wysokiej jakości oprogramowania.</p>
<h3>Wspólna odpowiedzialność za jakość</h3>
<p>W podejściu Shift-Left, jakość nie jest wyłączną domeną testerów - staje się odpowiedzialnością całego zespołu.
Deweloperzy nie mogą już po prostu "przerzucać kodu przez mur" do zespołu testowego; muszą aktywnie uczestniczyć w
procesie zapewniania jakości.</p>
<p>Praktyczne sposoby implementacji wspólnej odpowiedzialności:</p>
<ul>
<li><strong>Testy jednostkowe pisane przez deweloperów</strong> - Każda funkcjonalność powinna być pokryta testami jednostkowymi
  jeszcze przed przekazaniem kodu do testów wyższego poziomu.</li>
<li><strong>Code review z uwzględnieniem testowalności</strong> - Podczas przeglądów kodu należy zwracać uwagę na aspekty związane z
  testowalnością, takie jak modularność, rozdzielenie zależności czy odpowiednie abstrakcje.</li>
<li><strong>Pair programming deweloper-tester</strong> - Wspólne sesje programowania, podczas których deweloper i tester razem pracują
  nad kodem i testami, prowadzą do lepszego zrozumienia perspektyw obu stron.</li>
</ul>
<h3>Transfer wiedzy i budowanie kompetencji</h3>
<p>Skuteczna współpraca wymaga wzajemnego zrozumienia i szacunku dla różnych umiejętności i perspektyw. Testerzy powinni
rozumieć podstawy programowania, a deweloperzy - zasady testowania.</p>
<p>Efektywne mechanizmy transferu wiedzy obejmują:</p>
<ul>
<li><strong>Wewnętrzne warsztaty i szkolenia</strong> - Regularne sesje, podczas których deweloperzy i testerzy dzielą się wiedzą i
  najlepszymi praktykami.</li>
<li><strong>Communities of Practice</strong> - Grupy tematyczne skupiające osoby zainteresowane konkretnymi aspektami testowania
  automatycznego.</li>
<li><strong>Rotacja ról</strong> - Czasowe przejmowanie obowiązków innych członków zespołu, co sprzyja lepszemu zrozumieniu ich
  perspektywy.</li>
</ul>
<h3>Projektowanie testów z myślą o automatyzacji</h3>
<p>W strategii Shift-Left, testy automatyczne nie są tworzone po fakcie - są projektowane równolegle z funkcjonalnościami.
Wymaga to ścisłej współpracy między deweloperami a testerami już na etapie projektowania - najlepiej w formie ATDD.</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// Przykład kodu zaprojektowanego z myślą o testowalności</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserService</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">UserRepository</span> <span class="n">userRepository</span><span class="p">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">EmailService</span> <span class="n">emailService</span><span class="p">;</span>

    <span class="c1">// Wstrzykiwanie zależności zamiast tworzenia ich wewnątrz klasy</span>
    <span class="kd">public</span> <span class="nf">UserService</span><span class="p">(</span><span class="n">UserRepository</span> <span class="n">userRepository</span><span class="p">,</span> <span class="n">EmailService</span> <span class="n">emailService</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="na">userRepository</span> <span class="o">=</span> <span class="n">userRepository</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="na">emailService</span> <span class="o">=</span> <span class="n">emailService</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="n">User</span> <span class="nf">registerUser</span><span class="p">(</span><span class="n">String</span> <span class="n">username</span><span class="p">,</span> <span class="n">String</span> <span class="n">email</span><span class="p">,</span> <span class="n">String</span> <span class="n">password</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Walidacja wejścia</span>
        <span class="n">validateRegistrationData</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">password</span><span class="p">);</span>

        <span class="c1">// Tworzenie użytkownika</span>
        <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="k">new</span> <span class="n">User</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">password</span><span class="p">);</span>
        <span class="n">userRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">user</span><span class="p">);</span>

        <span class="c1">// Wysyłanie powiadomienia</span>
        <span class="n">emailService</span><span class="p">.</span><span class="na">sendWelcomeEmail</span><span class="p">(</span><span class="n">user</span><span class="p">);</span>

        <span class="k">return</span> <span class="n">user</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// Metoda publiczna dla ułatwienia testowania</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">validateRegistrationData</span><span class="p">(</span><span class="n">String</span> <span class="n">username</span><span class="p">,</span> <span class="n">String</span> <span class="n">email</span><span class="p">,</span> <span class="n">String</span> <span class="n">password</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Implementacja walidacji</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Odpowiadający test jednostkowy</span>
<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">shouldRegisterUserSuccessfully</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Arrange</span>
    <span class="n">UserRepository</span> <span class="n">mockRepository</span> <span class="o">=</span> <span class="n">mock</span><span class="p">(</span><span class="n">UserRepository</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
    <span class="n">EmailService</span> <span class="n">mockEmailService</span> <span class="o">=</span> <span class="n">mock</span><span class="p">(</span><span class="n">EmailService</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
    <span class="n">UserService</span> <span class="n">userService</span> <span class="o">=</span> <span class="k">new</span> <span class="n">UserService</span><span class="p">(</span><span class="n">mockRepository</span><span class="p">,</span> <span class="n">mockEmailService</span><span class="p">);</span>

    <span class="n">String</span> <span class="n">username</span> <span class="o">=</span> <span class="s">&quot;testuser&quot;</span><span class="p">;</span>
    <span class="n">String</span> <span class="n">email</span> <span class="o">=</span> <span class="s">&quot;test@example.com&quot;</span><span class="p">;</span>
    <span class="n">String</span> <span class="n">password</span> <span class="o">=</span> <span class="s">&quot;password123&quot;</span><span class="p">;</span>

    <span class="c1">// Act</span>
    <span class="n">User</span> <span class="n">result</span> <span class="o">=</span> <span class="n">userService</span><span class="p">.</span><span class="na">registerUser</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">password</span><span class="p">);</span>

    <span class="c1">// Assert</span>
    <span class="n">assertThat</span><span class="p">(</span><span class="n">result</span><span class="p">).</span><span class="na">isNotNull</span><span class="p">();</span>
    <span class="n">assertThat</span><span class="p">(</span><span class="n">username</span><span class="p">).</span><span class="na">isEquatlTo</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">getUsername</span><span class="p">());</span>
    <span class="n">assertThat</span><span class="p">(</span><span class="n">email</span><span class="p">).</span><span class="na">isEquatlTo</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">getEmail</span><span class="p">());</span>

    <span class="n">verify</span><span class="p">(</span><span class="n">mockRepository</span><span class="p">).</span><span class="na">save</span><span class="p">(</span><span class="n">any</span><span class="p">(</span><span class="n">User</span><span class="p">.</span><span class="na">class</span><span class="p">));</span>
    <span class="n">verify</span><span class="p">(</span><span class="n">mockEmailService</span><span class="p">).</span><span class="na">sendWelcomeEmail</span><span class="p">(</span><span class="n">any</span><span class="p">(</span><span class="n">User</span><span class="p">.</span><span class="na">class</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div>

<h3>Wspólne narzędzia i infrastruktura</h3>
<p>Efektywna współpraca wymaga wspólnego zestawu narzędzi i infrastruktury, które umożliwiają płynną komunikację i
integrację pracy deweloperów i testerów:</p>
<ul>
<li><strong>Wspólne systemy zarządzania kodem</strong> - Zarówno kod produkcyjny, jak i testy powinny być przechowywane w tym samym
  repozytorium, ułatwiając jednoczesną pracę nad oboma aspektami.</li>
<li><strong>Zintegrowane środowiska deweloperskie</strong> - IDE z rozszerzeniami wspierającymi testowanie, takimi jak wsparcie dla
  JUnit, TestNG czy Cucumber.</li>
<li><strong>Narzędzia komunikacji i współpracy</strong> - Wspólne platformy do zarządzania zadaniami (Jira), komunikacji (Microsoft Teams) i dokumentacji (Confluence, Wiki).</li>
</ul>
<h3>Metryki i ich analiza</h3>
<p>Współpraca powinna być wspierana przez odpowiednie metryki, które pozwalają ocenić skuteczność strategii Shift-Left:</p>
<ul>
<li><strong>Pokrycie kodu testami</strong> - Mierzy, jaka część kodu jest testowana automatycznie. </li>
<li>Testy jednostkowe</li>
<li>Testy integracyjne w izolacji (najlepiej oparte o testy kontraktowe)</li>
<li>Testy Funkcjonalne - Functional QA - pokrycie funkcjonalności testami automatycznymi od strony API i UI</li>
<li>Testy Produktowe - pokrycie kryteriów akceptacji odbioru produktu testami UI</li>
<li><strong>Czas naprawy defektów</strong> - Mierzy, jak szybko wykryte defekty są naprawiane.</li>
<li><strong>Defect Escape Rate</strong> - Mierzy, jaki procent defektów "ucieka" do produkcji (liczba defektów zgłoszonych podczas testowania kontra liczba defektów zgłoszonych na produkcji).</li>
<li><strong>Czas wprowadzenia na rynek</strong> - Mierzy, jak szybko nowe funkcjonalności są dostarczane do klientów.</li>
</ul>
<p>Wspólna analiza tych metryk pozwala zidentyfikować obszary wymagające poprawy i zoptymalizować proces współpracy między
deweloperami a testerami.</p>
<h2>11.3. Testowanie w fazie analizy wymagań</h2>
<p>Tradycyjnie testowanie rozpoczyna się po zakończeniu fazy implementacji, gdy kod jest już gotowy. Strategia Shift-Left
fundamentalnie zmienia to podejście, przesuwając aktywności testowe do najwcześniejszych etapów cyklu wytwarzania
oprogramowania - fazy analizy wymagań. Testowanie na tym etapie pomaga wcześnie identyfikować potencjalne problemy,
niejasności i luki w wymaganiach, co znacząco redukuje koszty późniejszych zmian.</p>
<h3>Weryfikacja jakości wymagań</h3>
<p>Pierwszym krokiem w testowaniu wymagań jest ocena ich jakości. Wysokiej jakości wymagania powinny być:</p>
<ul>
<li><strong>Jednoznaczne</strong> - niepozostawiające miejsca na różne interpretacje</li>
<li><strong>Testowalne</strong> - możliwe do zweryfikowania poprzez testy</li>
<li><strong>Kompletne</strong> - obejmujące wszystkie aspekty funkcjonalności</li>
<li><strong>Spójne</strong> - niewprowadzające sprzeczności</li>
<li><strong>Realistyczne</strong> - możliwe do zrealizowania w ramach ograniczeń projektu</li>
</ul>
<p>Testerzy, dzięki swojemu doświadczeniu w znajdowaniu "dziur" w systemach, są idealnie przygotowani do oceny wymagań pod
tymi względami.</p>
<h3>Definiowanie kryteriów akceptacji</h3>
<p>Kluczowym elementem testowania w fazie analizy jest definiowanie kryteriów akceptacji dla wymagań. Kryteria te stają się
podstawą do późniejszego tworzenia testów automatycznych.</p>
<p>Skutecznym podejściem jest wykorzystanie notacji Gherkin (Given-When-Then), która jest czytelna zarówno dla biznesu, jak
i dla zespołu technicznego:</p>
<div class="codehilite"><pre><span></span><code><span class="nf">Potrzeba biznesowa: Rejestracja Użytkownika</span>
<span class="nf">  Jako nowy klient serwisu</span>
<span class="nf">  Potrzebuję możliwości utworzenia własnego konta</span>
<span class="nf">  Aby móc korzystać z pełnej funkcjonalności platformy</span>

<span class="nf">  </span><span class="k">Scenariusz:</span><span class="nf"> Pomyślna rejestracja z poprawnymi danymi</span>
<span class="nf">    Zakładając, że Użytkownik chce założyć nowe konto</span>
<span class="nf">    Kiedy Użytkownik podaje następujące dane rejestracyjne</span>
<span class="nf">      | nazwa      | email                  | hasło          |</span>
<span class="nf">      | kowalski87 | jan.kowalski@poczta.pl | Bezpieczne123! |</span>
<span class="k">    Oraz </span><span class="nf">Użytkownik akceptuje warunki korzystania z serwisu</span>
<span class="nf">    </span><span class="k">Oraz </span><span class="nf">Użytkownik zatwierdza proces rejestracji</span>
<span class="nf">    </span><span class="k">Wtedy </span><span class="nf">System potwierdza utworzenie konta</span>
<span class="nf">    </span><span class="k">Oraz </span><span class="nf">System wysyła wiadomość aktywacyjną na podany adres email</span>

<span class="nf">  </span><span class="k">Scenariusz:</span><span class="nf"> Rejestracja nie powodzi się z powodu zajętej nazwy użytkownika</span>
<span class="nf">    Zakładając, że Użytkownik chce założyć nowe konto</span>
<span class="nf">    Kiedy Użytkownik podaje następujące dane rejestracyjne</span>
<span class="nf">      | nazwa    | email           | hasło          |</span>
<span class="nf">      | nowak22  | nowy@poczta.pl  | MocneHasło45!  |</span>
<span class="k">    Oraz </span><span class="nf">Użytkownik akceptuje warunki korzystania z serwisu</span>
<span class="nf">    </span><span class="k">Oraz </span><span class="nf">Użytkownik zatwierdza proces rejestracji</span>
<span class="nf">    </span><span class="k">Wtedy </span><span class="nf">System informuje o niemożności utworzenia konta</span>
<span class="nf">    </span><span class="k">Oraz </span><span class="nf">System wyświetla komunikat o zajętej nazwie użytkownika</span>
</code></pre></div>

<h3>Prototypowanie testów</h3>
<p>Już na etapie analizy wymagań można tworzyć "szkielety" testów automatycznych, nawet jeśli implementacja nie jest
jeszcze gotowa. Te prototypy testów pozwalają wcześnie wykryć potencjalne problemy z testowalnością i projektowaniem
interfejsów API.</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// Prototyp testu API - implementacja jeszcze nie istnieje</span>
<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">userRegistrationAPITest</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Przygotowanie danych testowych</span>
    <span class="n">RegistrationRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">RegistrationRequest</span><span class="p">(</span>
        <span class="s">&quot;newuser&quot;</span><span class="p">,</span>
        <span class="s">&quot;newuser@example.com&quot;</span><span class="p">,</span>
        <span class="s">&quot;securePassword123&quot;</span>
    <span class="p">);</span>

    <span class="c1">// Wywołanie API (które jeszcze nie istnieje)</span>
    <span class="n">Response</span> <span class="n">response</span> <span class="o">=</span> <span class="n">given</span><span class="p">()</span>
        <span class="p">.</span><span class="na">contentType</span><span class="p">(</span><span class="n">ContentType</span><span class="p">.</span><span class="na">JSON</span><span class="p">)</span>
        <span class="p">.</span><span class="na">body</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="p">.</span><span class="na">when</span><span class="p">()</span>
        <span class="p">.</span><span class="na">post</span><span class="p">(</span><span class="s">&quot;/api/users/register&quot;</span><span class="p">);</span>

    <span class="c1">// Oczekiwane rezultaty</span>
    <span class="n">response</span><span class="p">.</span><span class="na">then</span><span class="p">()</span>
        <span class="p">.</span><span class="na">statusCode</span><span class="p">(</span><span class="mi">201</span><span class="p">)</span>
        <span class="p">.</span><span class="na">body</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">,</span> <span class="n">notNullValue</span><span class="p">())</span>
        <span class="p">.</span><span class="na">body</span><span class="p">(</span><span class="s">&quot;username&quot;</span><span class="p">,</span> <span class="n">equalTo</span><span class="p">(</span><span class="s">&quot;newuser&quot;</span><span class="p">))</span>
        <span class="p">.</span><span class="na">body</span><span class="p">(</span><span class="s">&quot;email&quot;</span><span class="p">,</span> <span class="n">equalTo</span><span class="p">(</span><span class="s">&quot;newuser@example.com&quot;</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div>

<p>Pozwala to na wdrożenie procesu ATDD - gdzie testy tworzymy przed implementacją kodu produkcyjnego.
Co zwiększa pokrycie testami akceptacyjnymi i umożliwia wdrożenie checków w CI/CD przez testy automatyczne.
Dzięki czemu zespół developerski może efektywniej przeprowadzać wdrożenia.</p>
<h3>Testowanie modeli i makiet</h3>
<p>W wielu projektach, przed pełną implementacją, tworzone są modele, prototypy lub makiety interfejsu użytkownika. Te
elementy można i należy testować.</p>
<p>Dla makiet interfejsu użytkownika można wykorzystać narzędzia jak Selenium czy Selenide do weryfikacji podstawowych
interakcji i przepływów:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// Test makiety UI</span>
<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">registrationFlowInMockupTest</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">open</span><span class="p">(</span><span class="s">&quot;https://mockup.example.com/register&quot;</span><span class="p">);</span>

    <span class="c1">// Weryfikacja obecności wszystkich wymaganych pól</span>
    <span class="n">$</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="na">id</span><span class="p">(</span><span class="s">&quot;username&quot;</span><span class="p">)).</span><span class="na">should</span><span class="p">(</span><span class="n">exist</span><span class="p">);</span>
    <span class="n">$</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="na">id</span><span class="p">(</span><span class="s">&quot;email&quot;</span><span class="p">)).</span><span class="na">should</span><span class="p">(</span><span class="n">exist</span><span class="p">);</span>
    <span class="n">$</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="na">id</span><span class="p">(</span><span class="s">&quot;password&quot;</span><span class="p">)).</span><span class="na">should</span><span class="p">(</span><span class="n">exist</span><span class="p">);</span>
    <span class="n">$</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="na">id</span><span class="p">(</span><span class="s">&quot;confirmPassword&quot;</span><span class="p">)).</span><span class="na">should</span><span class="p">(</span><span class="n">exist</span><span class="p">);</span>
    <span class="n">$</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="na">id</span><span class="p">(</span><span class="s">&quot;termsCheckbox&quot;</span><span class="p">)).</span><span class="na">should</span><span class="p">(</span><span class="n">exist</span><span class="p">);</span>
    <span class="n">$</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="na">id</span><span class="p">(</span><span class="s">&quot;registerButton&quot;</span><span class="p">)).</span><span class="na">should</span><span class="p">(</span><span class="n">exist</span><span class="p">);</span>

    <span class="c1">// Weryfikacja podstawowego przepływu</span>
    <span class="n">$</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="na">id</span><span class="p">(</span><span class="s">&quot;username&quot;</span><span class="p">)).</span><span class="na">setValue</span><span class="p">(</span><span class="s">&quot;testuser&quot;</span><span class="p">);</span>
    <span class="n">$</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="na">id</span><span class="p">(</span><span class="s">&quot;email&quot;</span><span class="p">)).</span><span class="na">setValue</span><span class="p">(</span><span class="s">&quot;test@example.com&quot;</span><span class="p">);</span>
    <span class="n">$</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="na">id</span><span class="p">(</span><span class="s">&quot;password&quot;</span><span class="p">)).</span><span class="na">setValue</span><span class="p">(</span><span class="s">&quot;password123&quot;</span><span class="p">);</span>
    <span class="n">$</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="na">id</span><span class="p">(</span><span class="s">&quot;confirmPassword&quot;</span><span class="p">)).</span><span class="na">setValue</span><span class="p">(</span><span class="s">&quot;password123&quot;</span><span class="p">);</span>
    <span class="n">$</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="na">id</span><span class="p">(</span><span class="s">&quot;termsCheckbox&quot;</span><span class="p">)).</span><span class="na">click</span><span class="p">();</span>

    <span class="c1">// Na makiecie przycisk może nie działać, ale możemy sprawdzić jego dostępność</span>
    <span class="n">$</span><span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="na">id</span><span class="p">(</span><span class="s">&quot;registerButton&quot;</span><span class="p">)).</span><span class="na">shouldBe</span><span class="p">(</span><span class="n">enabled</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p>Należy zaznaczyć, że do efektywnego testowania makiet interfejsu użytkownika należy wykorzystać narzędzia takie jak Cypress czy Playwright
ponieważ umożliwiaja one mockowanie danych i interakcje z elementami interfejsu.
Dodatkowo wspierają natywnie JavaScript i TypeScript - mogą być wykorzystywane na etapie Functional QA a nie Product QA,
a zatem <strong><em>powinny być przygotowywane przez developerów frontendu.</em></strong></p>
<h3>Identyfikacja przypadków brzegowych</h3>
<p>Testerzy są szczególnie dobrzy w identyfikacji przypadków brzegowych i sytuacji nietypowych. Wczesna identyfikacja
takich przypadków pozwala uwzględnić je w projekcie, zamiast dodawać obsługę po fakcie.</p>
<p>Przykładowa lista przypadków brzegowych dla funkcji rejestracji użytkownika:</p>
<ul>
<li>Użytkownik z bardzo długim username (np. 100 znaków)</li>
<li>Email w niestandarowym, ale poprawnym formacie (np. z podwójnym TLD jak .co.uk)</li>
<li>Użytkownik próbujący wykorzystać znaki specjalne w nazwie użytkownika</li>
<li>Hasło zawierające emotikony lub znaki z różnych alfabetów</li>
<li>Próba rejestracji w trakcie prac konserwacyjnych lub awarii systemu</li>
</ul>
<p>Dla każdego zidentyfikowanego przypadku brzegowego można zaprojektować odpowiedni test automatyczny.
Należy jednak zwrócić uwagę na proliferację testów automatycznych i ich odpowiednią priorytetyzację i grupowanie
tak aby dawały największy współczynnik ROI.</p>
<h3>Wczesne planowanie strategii testowej dla danego projektu</h3>
<p>Faza analizy wymagań to idealny moment na opracowanie strategii testowej dla projektu, obejmującej:</p>
<ul>
<li>Poziomy testowania (jednostkowe, integracyjne, systemowe, akceptacyjne)</li>
<li>Podejście do automatyzacji (co automatyzować, kiedy, jakimi narzędziami)</li>
<li>Zarządzanie środowiskami testowymi</li>
<li>Zarządzanie danymi testowymi</li>
<li>Strategię raportowania i monitorowania</li>
</ul>
<p>Dokument strategii testowej staje się przewodnikiem dla całego zespołu, zapewniającym spójne podejście do testowania na
wszystkich etapach projektu.</p>
<h2>11.4. Testowanie równoległe z wytwarzaniem</h2>
<p>Strategia Shift-Left osiąga swoją kulminację w koncepcji testowania równoległego z wytwarzaniem. W tym podejściu testy
nie są tworzone po implementacji funkcjonalności, ale równolegle z nią. Takie podejście zapewnia natychmiastową
informację zwrotną, skraca cykl rozwoju i podnosi jakość oprogramowania.</p>
<h3>Test-Driven Development (TDD)</h3>
<p>TDD to metodyka, w której testy są pisane przed implementacją. Proces składa się z trzech kroków:</p>
<ol>
<li>Red - napisanie testu, który nie przechodzi, ponieważ funkcjonalność jeszcze nie istnieje</li>
<li>Green - implementacja minimalnej ilości kodu, aby test przeszedł</li>
<li>Refactor - przeorganizowanie kodu bez zmiany jego zachowania</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="c1">// TDD dla funkcji walidacji adresu email</span>
<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">validateEmailShouldRejectInvalidFormats</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">EmailValidator</span> <span class="n">validator</span> <span class="o">=</span> <span class="k">new</span> <span class="n">EmailValidator</span><span class="p">();</span>

    <span class="n">assertFalse</span><span class="p">(</span><span class="n">validator</span><span class="p">.</span><span class="na">isValid</span><span class="p">(</span><span class="s">&quot;notanemail&quot;</span><span class="p">));</span>
    <span class="n">assertFalse</span><span class="p">(</span><span class="n">validator</span><span class="p">.</span><span class="na">isValid</span><span class="p">(</span><span class="s">&quot;missing@domain&quot;</span><span class="p">));</span>
    <span class="n">assertFalse</span><span class="p">(</span><span class="n">validator</span><span class="p">.</span><span class="na">isValid</span><span class="p">(</span><span class="s">&quot;@missingusername.com&quot;</span><span class="p">));</span>
    <span class="n">assertFalse</span><span class="p">(</span><span class="n">validator</span><span class="p">.</span><span class="na">isValid</span><span class="p">(</span><span class="s">&quot;spaces in@email.com&quot;</span><span class="p">));</span>
<span class="p">}</span>

<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">validateEmailShouldAcceptValidFormats</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">EmailValidator</span> <span class="n">validator</span> <span class="o">=</span> <span class="k">new</span> <span class="n">EmailValidator</span><span class="p">();</span>

    <span class="n">assertTrue</span><span class="p">(</span><span class="n">validator</span><span class="p">.</span><span class="na">isValid</span><span class="p">(</span><span class="s">&quot;valid@example.com&quot;</span><span class="p">));</span>
    <span class="n">assertTrue</span><span class="p">(</span><span class="n">validator</span><span class="p">.</span><span class="na">isValid</span><span class="p">(</span><span class="s">&quot;valid+tag@example.com&quot;</span><span class="p">));</span>
    <span class="n">assertTrue</span><span class="p">(</span><span class="n">validator</span><span class="p">.</span><span class="na">isValid</span><span class="p">(</span><span class="s">&quot;valid.name@example.co.uk&quot;</span><span class="p">));</span>
    <span class="n">assertTrue</span><span class="p">(</span><span class="n">validator</span><span class="p">.</span><span class="na">isValid</span><span class="p">(</span><span class="s">&quot;valid123@example-domain.com&quot;</span><span class="p">));</span>
<span class="p">}</span>

<span class="c1">// Implementacja tylko na tyle, aby testy przechodziły</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">EmailValidator</span> <span class="p">{</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isValid</span><span class="p">(</span><span class="n">String</span> <span class="n">email</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">email</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="n">email</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">())</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">email</span><span class="p">.</span><span class="na">contains</span><span class="p">(</span><span class="s">&quot;@&quot;</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="n">String</span><span class="o">[]</span> <span class="n">parts</span> <span class="o">=</span> <span class="n">email</span><span class="p">.</span><span class="na">split</span><span class="p">(</span><span class="s">&quot;@&quot;</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">parts</span><span class="p">.</span><span class="na">length</span> <span class="o">!=</span> <span class="mi">2</span> <span class="o">||</span> <span class="n">parts</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">()</span> <span class="o">||</span> <span class="n">parts</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">())</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">parts</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="p">.</span><span class="na">contains</span><span class="p">(</span><span class="s">&quot; &quot;</span><span class="p">)</span> <span class="o">||</span> <span class="n">parts</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="p">.</span><span class="na">contains</span><span class="p">(</span><span class="s">&quot; &quot;</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">parts</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="p">.</span><span class="na">contains</span><span class="p">(</span><span class="s">&quot;.&quot;</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3>Behavior-Driven Development (BDD)</h3>
<p>BDD to rozszerzenie TDD, które kładzie nacisk na współpracę między deweloperami, testerami i interesariuszami
biznesowymi. Wykorzystuje język naturalny do opisu oczekiwanego zachowania systemu, co ułatwia komunikację między
różnymi rolami w projekcie.</p>
<p>Framework Cucumber pozwala na implementację BDD w Javie:</p>
<div class="codehilite"><pre><span></span><code><span class="k">Feature:</span><span class="nf"> Shopping Cart</span>

<span class="nf">  </span><span class="k">Scenario:</span><span class="nf"> Adding a product to an empty cart</span>
<span class="k">    Given </span><span class="nf">I am a logged-in user</span>
<span class="nf">    </span><span class="k">And </span><span class="nf">my shopping cart is empty</span>
<span class="nf">    </span><span class="k">When </span><span class="nf">I add a product &quot;</span><span class="s">Smartphone</span><span class="nf">&quot; with price $</span><span class="s">599.99</span><span class="nf"> to the cart</span>
<span class="nf">    </span><span class="k">Then </span><span class="nf">my shopping cart should contain </span><span class="s">1</span><span class="nf"> item</span>
<span class="nf">    </span><span class="k">And </span><span class="nf">the total cost should be $</span><span class="s">599.99</span><span class="nf"></span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="c1">// Implementacja kroków BDD</span>
<span class="nd">@Given</span><span class="p">(</span><span class="s">&quot;I am a logged-in user&quot;</span><span class="p">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">iAmALoggedInUser</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Kod logowania lub symulacji zalogowanego użytkownika</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">userService</span><span class="p">.</span><span class="na">loginUser</span><span class="p">(</span><span class="s">&quot;testuser&quot;</span><span class="p">,</span> <span class="s">&quot;password&quot;</span><span class="p">);</span>
    <span class="n">assertNotNull</span><span class="p">(</span><span class="n">user</span><span class="p">);</span>
<span class="p">}</span>

<span class="nd">@Given</span><span class="p">(</span><span class="s">&quot;my shopping cart is empty&quot;</span><span class="p">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">myShoppingCartIsEmpty</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Upewnienie się, że koszyk jest pusty</span>
    <span class="n">shoppingCart</span> <span class="o">=</span> <span class="n">shoppingCartService</span><span class="p">.</span><span class="na">getCartForUser</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span>
    <span class="n">shoppingCartService</span><span class="p">.</span><span class="na">clearCart</span><span class="p">(</span><span class="n">shoppingCart</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span>
    <span class="n">assertEquals</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">shoppingCart</span><span class="p">.</span><span class="na">getItems</span><span class="p">().</span><span class="na">size</span><span class="p">());</span>
<span class="p">}</span>

<span class="nd">@When</span><span class="p">(</span><span class="s">&quot;I add a product {string} with price ${double} to the cart&quot;</span><span class="p">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">iAddAProductToTheCart</span><span class="p">(</span><span class="n">String</span> <span class="n">productName</span><span class="p">,</span> <span class="kt">double</span> <span class="n">price</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Dodanie produktu do koszyka</span>
    <span class="n">Product</span> <span class="n">product</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Product</span><span class="p">(</span><span class="n">productName</span><span class="p">,</span> <span class="k">new</span> <span class="n">BigDecimal</span><span class="p">(</span><span class="n">price</span><span class="p">));</span>
    <span class="n">shoppingCartService</span><span class="p">.</span><span class="na">addToCart</span><span class="p">(</span><span class="n">shoppingCart</span><span class="p">.</span><span class="na">getId</span><span class="p">(),</span> <span class="n">product</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>

<span class="nd">@Then</span><span class="p">(</span><span class="s">&quot;my shopping cart should contain {int} item&quot;</span><span class="p">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">myShoppingCartShouldContainItems</span><span class="p">(</span><span class="kt">int</span> <span class="n">expectedItemCount</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Weryfikacja liczby przedmiotów w koszyku</span>
    <span class="n">shoppingCart</span> <span class="o">=</span> <span class="n">shoppingCartService</span><span class="p">.</span><span class="na">getCartForUser</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span>
    <span class="n">assertEquals</span><span class="p">(</span><span class="n">expectedItemCount</span><span class="p">,</span> <span class="n">shoppingCart</span><span class="p">.</span><span class="na">getItems</span><span class="p">().</span><span class="na">size</span><span class="p">());</span>
<span class="p">}</span>

<span class="nd">@Then</span><span class="p">(</span><span class="s">&quot;the total cost should be ${double}&quot;</span><span class="p">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">theTotalCostShouldBe</span><span class="p">(</span><span class="kt">double</span> <span class="n">expectedTotal</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Weryfikacja łącznej wartości koszyka</span>
    <span class="n">shoppingCart</span> <span class="o">=</span> <span class="n">shoppingCartService</span><span class="p">.</span><span class="na">getCartForUser</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span>
    <span class="n">assertEquals</span><span class="p">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="p">(</span><span class="n">expectedTotal</span><span class="p">),</span> <span class="n">shoppingCart</span><span class="p">.</span><span class="na">getTotalCost</span><span class="p">());</span>
<span class="p">}</span>
</code></pre></div>

<h3>Continuous Testing</h3>
<p>Continuous Testing to praktyka automatycznego uruchamiania testów przy każdej zmianie kodu. Jest to kluczowy element
potoku CI/CD i strategii Shift-Left.</p>
<p>Konfiguracja testów w Jenkins:</p>
<div class="codehilite"><pre><span></span><code><span class="n">pipeline</span> <span class="o">{</span>
    <span class="n">agent</span> <span class="n">any</span>

    <span class="n">stages</span> <span class="o">{</span>
        <span class="n">stage</span><span class="o">(</span><span class="s1">&#39;Checkout&#39;</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">checkout</span> <span class="n">scm</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="n">stage</span><span class="o">(</span><span class="s1">&#39;Build&#39;</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">sh</span> <span class="s1">&#39;mvn clean compile&#39;</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="n">stage</span><span class="o">(</span><span class="s1">&#39;Unit Tests&#39;</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">sh</span> <span class="s1">&#39;mvn test&#39;</span>
            <span class="o">}</span>
            <span class="n">post</span> <span class="o">{</span>
                <span class="n">always</span> <span class="o">{</span>
                    <span class="n">junit</span> <span class="s1">&#39;**/target/surefire-reports/TEST-*.xml&#39;</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="n">stage</span><span class="o">(</span><span class="s1">&#39;Integration Tests&#39;</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">sh</span> <span class="s1">&#39;mvn verify -DskipUnitTests&#39;</span>
            <span class="o">}</span>
            <span class="n">post</span> <span class="o">{</span>
                <span class="n">always</span> <span class="o">{</span>
                    <span class="n">junit</span> <span class="s1">&#39;**/target/failsafe-reports/TEST-*.xml&#39;</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="n">stage</span><span class="o">(</span><span class="s1">&#39;UI Tests&#39;</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">steps</span> <span class="o">{</span>
                <span class="n">sh</span> <span class="s1">&#39;mvn test -Dtest=ui.**&#39;</span>
            <span class="o">}</span>
            <span class="n">post</span> <span class="o">{</span>
                <span class="n">always</span> <span class="o">{</span>
                    <span class="n">publishHTML</span><span class="o">(</span><span class="nl">target:</span> <span class="o">[</span>
                        <span class="nl">allowMissing:</span> <span class="kc">false</span><span class="o">,</span>
                        <span class="nl">alwaysLinkToLastBuild:</span> <span class="kc">true</span><span class="o">,</span>
                        <span class="nl">keepAll:</span> <span class="kc">true</span><span class="o">,</span>
                        <span class="nl">reportDir:</span> <span class="s1">&#39;target/surefire-reports&#39;</span><span class="o">,</span>
                        <span class="nl">reportFiles:</span> <span class="s1">&#39;index.html&#39;</span><span class="o">,</span>
                        <span class="nl">reportName:</span> <span class="s1">&#39;UI Test Report&#39;</span>
                    <span class="o">])</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="n">post</span> <span class="o">{</span>
        <span class="n">always</span> <span class="o">{</span>
            <span class="n">archiveArtifacts</span> <span class="nl">artifacts:</span> <span class="s1">&#39;target/*.jar&#39;</span><span class="o">,</span> <span class="nl">fingerprint:</span> <span class="kc">true</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>

<h3>Feature Toggles</h3>
<p>Feature Toggles (lub Feature Flags) to technika, która umożliwia włączanie i wyłączanie funkcjonalności bez konieczności
wdrażania nowego kodu. Jest to szczególnie przydatne w kontekście testowania równoległego z wytwarzaniem, ponieważ
pozwala na testowanie funkcjonalności jeszcze niedostępnych dla użytkowników końcowych.</p>
<div class="codehilite"><pre><span></span><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">FeatureToggleService</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">Boolean</span><span class="o">&gt;</span> <span class="n">toggles</span><span class="p">;</span>

    <span class="kd">public</span> <span class="nf">FeatureToggleService</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Inicjalizacja z konfiguracji, bazy danych lub zewnętrznego serwisu</span>
        <span class="n">toggles</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;</span><span class="p">();</span>
        <span class="n">toggles</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;NEW_REGISTRATION_FLOW&quot;</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
        <span class="n">toggles</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;ENHANCED_SEARCH&quot;</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
        <span class="n">toggles</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;DARK_MODE&quot;</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isEnabled</span><span class="p">(</span><span class="n">String</span> <span class="n">featureName</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">toggles</span><span class="p">.</span><span class="na">getOrDefault</span><span class="p">(</span><span class="n">featureName</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Użycie Feature Toggle w kodzie</span>
<span class="nd">@Controller</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">RegistrationController</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">FeatureToggleService</span> <span class="n">featureToggleService</span><span class="p">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">RegistrationService</span> <span class="n">registrationService</span><span class="p">;</span>

    <span class="kd">public</span> <span class="nf">RegistrationController</span><span class="p">(</span>
            <span class="n">FeatureToggleService</span> <span class="n">featureToggleService</span><span class="p">,</span>
            <span class="n">RegistrationService</span> <span class="n">registrationService</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="na">featureToggleService</span> <span class="o">=</span> <span class="n">featureToggleService</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="na">registrationService</span> <span class="o">=</span> <span class="n">registrationService</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nd">@GetMapping</span><span class="p">(</span><span class="s">&quot;/register&quot;</span><span class="p">)</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">showRegistrationPage</span><span class="p">(</span><span class="n">Model</span> <span class="n">model</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Wybór widoku w zależności od togglea</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">featureToggleService</span><span class="p">.</span><span class="na">isEnabled</span><span class="p">(</span><span class="s">&quot;NEW_REGISTRATION_FLOW&quot;</span><span class="p">))</span> <span class="p">{</span>
            <span class="n">model</span><span class="p">.</span><span class="na">addAttribute</span><span class="p">(</span><span class="s">&quot;useNewFlow&quot;</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
            <span class="k">return</span> <span class="s">&quot;registration-new&quot;</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="s">&quot;registration&quot;</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Testowanie z Feature Toggle</span>
<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">testNewRegistrationFlow</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Przygotowanie mocka FeatureToggleService, który zawsze zwraca true dla NEW_REGISTRATION_FLOW</span>
    <span class="n">FeatureToggleService</span> <span class="n">mockToggleService</span> <span class="o">=</span> <span class="n">mock</span><span class="p">(</span><span class="n">FeatureToggleService</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
    <span class="n">when</span><span class="p">(</span><span class="n">mockToggleService</span><span class="p">.</span><span class="na">isEnabled</span><span class="p">(</span><span class="s">&quot;NEW_REGISTRATION_FLOW&quot;</span><span class="p">)).</span><span class="na">thenReturn</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

    <span class="n">RegistrationService</span> <span class="n">mockRegistrationService</span> <span class="o">=</span> <span class="n">mock</span><span class="p">(</span><span class="n">RegistrationService</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
    <span class="n">RegistrationController</span> <span class="n">controller</span> <span class="o">=</span> <span class="k">new</span> <span class="n">RegistrationController</span><span class="p">(</span>
            <span class="n">mockToggleService</span><span class="p">,</span> <span class="n">mockRegistrationService</span><span class="p">);</span>

    <span class="n">Model</span> <span class="n">model</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ExtendedModelMap</span><span class="p">();</span>
    <span class="n">String</span> <span class="n">viewName</span> <span class="o">=</span> <span class="n">controller</span><span class="p">.</span><span class="na">showRegistrationPage</span><span class="p">(</span><span class="n">model</span><span class="p">);</span>

    <span class="n">assertEquals</span><span class="p">(</span><span class="s">&quot;registration-new&quot;</span><span class="p">,</span> <span class="n">viewName</span><span class="p">);</span>
    <span class="n">assertTrue</span><span class="p">((</span><span class="n">Boolean</span><span class="p">)</span> <span class="n">model</span><span class="p">.</span><span class="na">getAttribute</span><span class="p">(</span><span class="s">&quot;useNewFlow&quot;</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div>

<h1>9. Definition of Ready i Definition of Done</h1>
<h2>9.1. Definition of Ready (DoR)</h2>
<p>Definition of Ready (DoR) to kompleksowy zestaw kryteriów określających gotowość zadania automatyzacyjnego do
implementacji. W kontekście profesjonalnej automatyzacji testów z wykorzystaniem stosu technologicznego Java, Selenium,
Selenide i REST Assured, DoR musi łączyć aspekty techniczne z biznesowymi, zapewniając optymalne wykorzystanie zasobów i
maksymalizację zwrotu z inwestycji (ROI).</p>
<p><strong>Analiza biznesowej wartości automatyzacji</strong> - Każde zadanie automatyzacyjne powinno mieć jasno określoną wartość
biznesową, wyrażoną jako wskaźnik ROI. Należy zdefiniować, ile ręcznych cykli testowych zostanie zastąpionych przez
automatyzację oraz jaki jest szacowany czas życia testu. Zgodnie z rekomendacjami ISTQB Advanced Test Automation
Engineer, automatyzować należy tylko te przypadki, które będą wykonywane wielokrotnie i nie podlegają częstym zmianom.
Kalkulator ROI powinien uwzględniać: czas implementacji automatyzacji, czas wykonania testu ręcznego, częstotliwość
wykonywania i szacowany okres użytkowania testu.</p>
<p><strong>Szczegółowa specyfikacja techniczna</strong> - Oprócz ogólnych wymagań funkcjonalnych, DoR powinno zawierać szczegółową
specyfikację techniczną dla każdego przypadku testowego, w tym:</p>
<ul>
<li>Selektory XPath/CSS dla elementów webowych (dla Selenium/Selenide) z uwzględnieniem ich stabilności
*Szczegółowe schematy JSON/XML dla żądań i odpowiedzi API (dla REST Assured)</li>
<li>Specyfikację nagłówków HTTP, parametrów zapytań i kodów statusu</li>
<li>Definicje JSON Schema do walidacji odpowiedzi API</li>
</ul>
<p><strong>Mapowanie przypadków testowych do wymagań</strong> - Każdy automatyzowany przypadek testowy powinien być powiązany z
konkretnym wymaganiem biznesowym w systemie zarządzania wymaganiami (np. JIRA). Zgodnie z praktykami TMap NEXT, należy
stosować macierz traceability, która dokumentuje pokrycie wymagań przez testy i umożliwia analizę wpływu zmian.</p>
<p><strong>Szczegółowa analiza ryzyka technicznego</strong> - DoR powinno zawierać analizę potencjalnych wyzwań technicznych, takich
jak:</p>
<ul>
<li>Dynamicznie generowane identyfikatory elementów w DOM</li>
<li>Skomplikowane mechanizmy AJAX i SPA (Single Page Applications)</li>
<li>Kwestie synchronizacji i timeoutów</li>
<li>Obsługa scenariuszy cross-browser z uwzględnieniem specyficznych zachowań przeglądarek</li>
<li>Mechanizmy zabezpieczeń API (OAuth 2.0, JWT, CSRF tokens)</li>
</ul>
<p><strong>Aspekty infrastrukturalne</strong> - Szczegółowe wymagania dotyczące infrastruktury testowej:</p>
<ul>
<li>Konfiguracja Selenium Grid lub alternatywnych rozwiązań (Selenoid, Zalenium)</li>
<li>Specyfikacja kontenerów Docker z określonymi wersjami przeglądarek</li>
<li>Wymagania dotyczące wydajności maszyn testowych (CPU, RAM)</li>
<li>Konfiguracja proxy dla przechwytywania ruchu HTTP/HTTPS (np. BrowserMob Proxy)</li>
<li>Parametry profilów przeglądarek (chrome options, firefox profile)</li>
</ul>
<p><strong>Strategia zarządzania danymi testowymi</strong> - Kompletna specyfikacja wymaganych danych testowych:</p>
<ul>
<li>Schemat automatycznej generacji danych (np. z wykorzystaniem biblioteki JavaFaker)</li>
<li>Strategia izolacji danych dla równoległego wykonywania testów</li>
<li>Model dostępu do zewnętrznych źródeł danych (JDBC, MongoDB, REST API)</li>
<li>Mechanizmy anonymizacji danych produkcyjnych do celów testowych zgodne z RODO/GDPR</li>
</ul>
<p><strong>Integracja z ekosystemem DevOps</strong> - Określenie, jak testy będą współpracować z:</p>
<ul>
<li>Systemem kontroli wersji (Git branching strategy)</li>
<li>Pipeline'ami CI/CD (Jenkins, GitLab CI, GitHub Actions)</li>
<li>Systemami raportowania (Allure, ExtentReports)</li>
<li>Narzędziami monitoringu jakości kodu (SonarQube, CodeClimate)</li>
</ul>
<p><strong>Wymagania niefunkcjonalne</strong> - Zdefiniowanie aspektów niefunkcjonalnych testów:</p>
<ul>
<li>Maksymalny akceptowalny czas wykonania pojedynczego testu (np. &lt;2 minuty)</li>
<li>Limity czasu odpowiedzi API przy różnych warunkach sieciowych</li>
<li>Wymagania dotyczące lokalizacji i obsługi wielu języków</li>
<li>Dostępność (WCAG) i zgodność z czytnikami ekranu</li>
</ul>
<p><strong>Uzgodniona architektura techniczna</strong> - Szczegółowy opis architektury frameworka testowego:</p>
<ul>
<li>Hierarchia abstrakcji dla POM (Page Object Model)</li>
<li>Strategia implementacji wzorców projektowych (Factory, Builder, Chain of Responsibility)</li>
<li>Model kompozycji dla komponentów wielokrotnego użytku</li>
<li>Mechanizm zarządzania stanem (state management) między krokami testowymi</li>
<li>Strategia wykorzystania adnotacji i metaprogramowania w JUnit/TestNG</li>
</ul>
<p><strong>Gotowość biznesowa</strong> - Aspekty organizacyjne gotowości:</p>
<ul>
<li>Zatwierdzenie przez Product Ownera i Stakeholderów</li>
<li>Potwierdzenie finansowania i przydzielenia zasobów</li>
<li>Zgodność z regulacjami branżowymi (np. HIPAA dla aplikacji medycznych, PCI DSS dla aplikacji płatniczych)</li>
<li>Priorytetyzacja względem innych inicjatyw testowych</li>
</ul>
<p>Zgodnie z filozofią Scaled Agile Framework (SAFe), DoR powinno także uwzględniać potrzeby różnych poziomów organizacji,
od zespołu testowego po zarząd, zapewniając, że automatyzacja testów jest zgodna ze strategicznymi celami biznesowymi i
technicznymi. Dokument DoR powinien być wersjonowany i przechowywany w systemie zarządzania konfiguracją, z jasno
określonym procesem zatwierdzania zmian.</p>
<h2>9.2. Definition of Done (DoD)</h2>
<p>Definition of Done (DoD) w kontekście automatyzacji testów z wykorzystaniem Javy, Selenium, Selenide i REST Assured to
wielowymiarowy zbiór kryteriów, łączący rygorystyczne aspekty techniczne z kluczowymi wskaźnikami biznesowymi.
Kompleksowy DoD stanowi gwarancję jakości, utrzymywalności i wartości biznesowej zautomatyzowanych testów.</p>
<p><strong>Jakość i czystość kodu</strong> - Kod testów automatycznych musi spełniać ściśle zdefiniowane metryki jakości:</p>
<ul>
<li>Pokrycie testami jednostkowymi na poziomie min. 85% dla samego kodu automatyzacyjnego (zgodnie z wytycznymi TMMi
      poziom 4)</li>
<li>Zgodność ze standardem kodowania określonym przez SonarQube (zero "blocker issues", max 5 "critical issues")</li>
<li>Złożoność cyklomatyczna metod &lt; 10 (dla lepszej czytelności i utrzymywalności)</li>
<li>Brak duplikacji kodu &gt; 5 linii (DRY principle)</li>
<li>Zastosowanie adnotacji <code>@API</code> (stability markers) z frameworka Guava dla publicznych interfejsów</li>
<li>Poprawna implementacja wzorców GoF (Gang of Four) zgodnie z zasadami SOLID</li>
</ul>
<p><strong>Aspekty techniczne wykonania testów</strong> - Szczegółowe kryteria techniczne:</p>
<ul>
<li>Efektywność lokatorów Selenium (preferencja dla CSS, XPath tylko w uzasadnionych przypadkach)</li>
<li>Wykorzystanie explicit wait zamiast implicit wait, z timeout'ami skonfigurowanymi w pliku properties</li>
<li>Implementacja wzorca PageFactory z wykorzystaniem adnotacji <code>@FindBy</code> dla elementów UI</li>
<li>Zastosowanie <code>ExpectedConditions</code> dla zaawansowanych warunków oczekiwania</li>
<li>Konfiguracja timeout'ów dla REST Assured z wykorzystaniem RequestSpecBuilder</li>
<li>Walidacja schematów odpowiedzi API z użyciem JSON Schema lub XMLUnit</li>
<li>Obsługa serializacji/deserializacji z wykorzystaniem Jackson/GSON</li>
<li>Implementacja custom assertion'ów dla złożonych walidacji biznesowych</li>
</ul>
<p><strong>Zaawansowane aspekty architektury testów</strong> - Standardy architektoniczne:</p>
<ul>
<li>Implementacja architektury screenplay/journey/BDD zgodna z ATDD (Acceptance Test-Driven Development)</li>
<li>Zastosowanie wzorca Chain of Responsibility dla elastycznej obsługi prekondycji testowych</li>
<li>Wykorzystanie rzutowania typu z Proxy Pattern dla dynamicznych interfejsów Page Object</li>
<li>Implementacja mechanizmu lazy loading dla heavy page objects</li>
<li>Zastosowanie kompozycji zamiast dziedziczenia dla współdzielonych funkcjonalności</li>
<li>Implementacja custom ExpectedConditions dla złożonych stanów UI</li>
<li>Zastosowanie wzorca Decorator dla rozszerzania funkcjonalności bazowych klas testowych</li>
</ul>
<p><strong>Obsługa równoległego wykonania i skalowalności</strong> - Kryteria wydajnościowe:</p>
<ul>
<li>Testy skonfigurowane do wykonania równoległego z parametrem thread-count w TestNG/JUnit5</li>
<li>Zaimplementowana izolacja danych testowych dla wykonania współbieżnego</li>
<li>Testy zoptymalizowane pod kątem wydajności (benchmark: kompletna suita &lt;30 minut)</li>
<li>Poprawne zarządzanie zasobami (zamykanie WebDriver, czyszczenie połączeń HTTP)</li>
<li>Mechanizm ponownych prób (retry mechanism) dla niestabilnych testów z exponential backoff</li>
<li>Konfiguracja dla dynamic thread allocation w środowisku CI</li>
</ul>
<p><strong>Integracja biznesowa</strong> - Aspekty biznesowe zdefiniowane według ISTQB Business Analyst:</p>
<ul>
<li>Test Coverage Report powiązany z ryzykiem biznesowym w formacie RCRCM (Risk &amp; Control Risk Coverage Matrix)</li>
<li>Zrealizowane cele KPI dla automatyzacji (np. redukcja czasu cyklu testowego o X%)</li>
<li>Udokumentowany zwrot z inwestycji (ROI) zgodny z przedwdrożeniowymi kalkulacjami</li>
<li>Raport z analizy trendów defektów wykrywanych przez zautomatyzowane testy</li>
<li>Metryki efektywności testów (Defect Detection Percentage, Test Design Efficiency, Test Execution Efficiency)</li>
</ul>
<p><strong>Zaawansowane raportowanie</strong> - Wymagania dotyczące raportowania:</p>
<ul>
<li>Integracja Allure ReportPortal z dashboardami zarządczymi</li>
<li>Wdrożona graficzna wizualizacja trendów wykonania testów</li>
<li>Automatyczna kategoryzacja defektów według wzorców błędów</li>
<li>Integracja z systemem śledzenia defektów (JIRA) z automatycznym tworzeniem zgłoszeń</li>
<li>Raportowanie metryk flaky tests z analizą przyczyn źródłowych</li>
<li>Wdrożony mechanizm notification (Slack, email, MS Teams) dla krytycznych błędów</li>
</ul>
<p><strong>Standardy dokumentacji technicznej</strong> - Dokumentacja kodu i procedur:</p>
<ul>
<li>Dokumentacja JavaDoc zgodna ze standardem Oracle dla wszystkich publicznych API</li>
<li>Diagram architektury frameworka testowego w notacji UML/C4</li>
<li>Dokumentacja warstwy abstrakcji z opisem wzorców projektowych</li>
<li>Instrukcja konfiguracji środowiska lokalnego w formacie asciidoc/markdown</li>
<li>Słownik Domain-Specific Language dla słów kluczowych BDD</li>
<li>Wiki z troubleshooting guide dla najczęstszych problemów</li>
</ul>
<p><strong>Aspekty bezpieczeństwa i zgodności</strong> - Kryteria bezpieczeństwa:</p>
<ul>
<li>Audyt kodu pod kątem wrażliwych danych (hasła, tokeny)</li>
<li>Implementacja szyfrowania dla wrażliwych danych testowych zgodnie z OWASP</li>
<li>Zgodność z polityką bezpieczeństwa organizacji (Security Compliance Report)</li>
<li>Odseparowanie danych testowych z różnych środowisk (dev, stage, prod)</li>
<li>Implementacja bezpiecznego zarządzania sekretami (np. HashiCorp Vault integration)</li>
</ul>
<p><strong>Maintainability i knowledge transfer</strong> - Aspekty utrzymaniowe:</p>
<ul>
<li>Code walkthrough przeprowadzony z zespołem deweloperskim i QA</li>
<li>Sesja knowledge sharing z dokumentacją video</li>
<li>Identyfikacja key-person risk i plan mitygacji</li>
<li>Stworzenie "decision log" dokumentującego kluczowe decyzje architektoniczne</li>
<li>Wdrożenie Test Maintenance Plan zgodnego z IEEE 829</li>
</ul>
<p>Zgodnie z metodyką TMap NEXT, DoD powinno być wielopoziomowe, z oddzielnymi kryteriami dla poziomu komponentu,
integracji i systemu. Każdy poziom DoD powinien być zweryfikowany przez odpowiednie role (developer, technical lead,
business analyst, product owner), co zapewnia kompleksowe podejście do jakości zautomatyzowanych testów.</p>
<p>Proces weryfikacji DoD powinien być sformalizowany z wykorzystaniem checklist i zintegrowany z procesem continuous
improvement, umożliwiając regularne przeglądy i aktualizacje kryteriów w oparciu o retrospektywy sprintów i analizę
metryk jakości.</p>
</body>
</html>
